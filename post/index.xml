<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on Skylm</title>
        <link>https://skylm808.github.io/post/</link>
        <description>Recent content in Posts on Skylm</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Skylm</copyright>
        <lastBuildDate>Tue, 27 Jan 2026 22:32:05 +0800</lastBuildDate><atom:link href="https://skylm808.github.io/post/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Go å†…å­˜åˆ†é…ç­–ç•¥ã€å†…å­˜é€ƒé€¸ã€ä¸ GC æœºåˆ¶</title>
        <link>https://skylm808.github.io/p/go-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8%E4%B8%8E-gc-%E6%9C%BA%E5%88%B6/</link>
        <pubDate>Tue, 27 Jan 2026 22:32:05 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/go-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8%E4%B8%8E-gc-%E6%9C%BA%E5%88%B6/</guid>
        <description>&lt;h1 id=&#34;go-å†…å­˜åˆ†é…ç­–ç•¥å†…å­˜é€ƒé€¸ä¸-gc-æœºåˆ¶&#34;&gt;Go å†…å­˜åˆ†é…ç­–ç•¥ã€å†…å­˜é€ƒé€¸ã€ä¸ GC æœºåˆ¶
&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡å°†è¯¦ç»†è§£æ Go è¯­è¨€ä¸­çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼ˆæ ˆä¸å †ï¼‰ã€é€ƒé€¸åˆ†ææœºåˆ¶ï¼Œä»¥åŠåƒåœ¾å›æ”¶ï¼ˆGCï¼‰å¦‚ä½•ä¸è¿™ä¸¤éƒ¨åˆ†å†…å­˜äº¤äº’ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-å†…å­˜åˆ†é…åŸºç¡€æ ˆ-stack-vs-å †-heap&#34;&gt;1. å†…å­˜åˆ†é…åŸºç¡€ï¼šæ ˆ (Stack) vs å † (Heap)
&lt;/h2&gt;&lt;p&gt;åœ¨ Go è¯­è¨€ä¸­ï¼Œå†…å­˜ä¸»è¦åˆ†ä¸ºä¸¤ç±»åŒºåŸŸï¼š&lt;/p&gt;
&lt;h3 id=&#34;æ ˆ-stack&#34;&gt;æ ˆ (Stack)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;: ç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…ä¸é‡Šæ”¾æå¿«&lt;/strong&gt;: ä¼´éšå‡½æ•°è°ƒç”¨ï¼ˆå…¥æ ˆï¼‰åˆ†é…ï¼Œå‡½æ•°è¿”å›ï¼ˆå‡ºæ ˆï¼‰é‡Šæ”¾ã€‚ç”± CPU çš„æ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ˆSPï¼‰ç§»åŠ¨æ¥å®Œæˆï¼Œå‡ ä¹æ²¡æœ‰é¢å¤–å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨ç®¡ç†&lt;/strong&gt;: ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ä»‹å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿ç»­å†…å­˜&lt;/strong&gt;: å…·æœ‰è‰¯å¥½çš„å±€éƒ¨æ€§ï¼Œå¯¹ CPU ç¼“å­˜å‹å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å°é™åˆ¶&lt;/strong&gt;: æ¯ä¸ª Goroutine åˆå§‹æ ˆå¾ˆå°ï¼ˆé€šå¸¸ 2KBï¼‰ï¼Œä½†å¯ä»¥åŠ¨æ€æ‰©å®¹ï¼ˆæœ€å¤§å¯è¾¾ 1GBï¼Œè§†æ¶æ„è€Œå®šï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å †-heap&#34;&gt;å † (Heap)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;: ç”¨äºå­˜å‚¨ç”Ÿå‘½å‘¨æœŸé•¿äºå‡½æ•°è°ƒç”¨ã€æˆ–è€…å¤§å°æœªçŸ¥ã€æˆ–è€…ä½“ç§¯å·¨å¤§çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…è¾ƒæ…¢&lt;/strong&gt;: éœ€è¦åœ¨ç©ºé—²å†…å­˜åˆ—è¡¨ä¸­å¯»æ‰¾åˆé€‚çš„å—ï¼Œå¯èƒ½æ¶‰åŠé”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨/GC ç®¡ç†&lt;/strong&gt;: åœ¨ Go ä¸­ï¼Œç”±åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰è´Ÿè´£æ‰«æå’Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº§ç”Ÿç¢ç‰‡&lt;/strong&gt;: é¢‘ç¹åˆ†é…é‡Šæ”¾å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-å†…å­˜é€ƒé€¸åˆ†æ-escape-analysis&#34;&gt;2. å†…å­˜é€ƒé€¸åˆ†æ (Escape Analysis)
&lt;/h2&gt;&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯å†…å­˜é€ƒé€¸&#34;&gt;ä»€ä¹ˆæ˜¯å†…å­˜é€ƒé€¸ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å†…å­˜é€ƒé€¸&lt;/strong&gt;æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œçš„ä¸€é¡¹åˆ†æï¼Œå®ƒå†³å®šä¸€ä¸ªå˜é‡æ˜¯åº”è¯¥åˆ†é…åœ¨&lt;strong&gt;æ ˆ&lt;/strong&gt;ä¸Šè¿˜æ˜¯&lt;strong&gt;å †&lt;/strong&gt;ä¸Šã€‚
å¦‚æœç¼–è¯‘å™¨å‘ç°ä¸€ä¸ªå˜é‡åœ¨å‡½æ•°è¿”å›åä»ç„¶è¢«å¤–éƒ¨å¼•ç”¨ï¼ˆç”Ÿå‘½å‘¨æœŸè¶…å‡ºäº†å½“å‰å‡½æ•°æ ˆå¸§ï¼‰ï¼Œæˆ–è€…ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…¶å¤§å°ï¼Œè¯¥å˜é‡å°±ä¼šâ€œé€ƒé€¸â€åˆ°å †ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦é€ƒé€¸åˆ†æ&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦é€ƒé€¸åˆ†æï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ€§èƒ½&lt;/strong&gt;: å°½å¯èƒ½å°†å˜é‡åˆ†é…åœ¨æ ˆä¸Šï¼Œå‡è½» GC çš„å‹åŠ›ã€‚æ ˆä¸Šåˆ†é…çš„å¼€é”€è¿œå°äºå †ï¼Œä¸”ä¸éœ€è¦ GC æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯å®‰å…¨&lt;/strong&gt;: ç¡®ä¿å‡½æ•°è¿”å›åï¼Œè¢«å¼•ç”¨çš„æ•°æ®ä¾ç„¶æœ‰æ•ˆï¼ˆé˜²æ­¢æ‚¬å‚æŒ‡é’ˆï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ—¶å€™å˜é‡åœ¨æ ˆä»€ä¹ˆæ—¶å€™åœ¨å †&#34;&gt;ä»€ä¹ˆæ—¶å€™å˜é‡åœ¨æ ˆï¼Œä»€ä¹ˆæ—¶å€™åœ¨å †ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;Go ç¼–è¯‘å™¨çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼š&lt;strong&gt;å¦‚æœå˜é‡åœ¨å‡½æ•°è¿”å›åä¸å†è¢«å¼•ç”¨ï¼Œä¼˜å…ˆåˆ†é…åœ¨æ ˆä¸Šï¼›å¦åˆ™åˆ†é…åœ¨å †ä¸Šã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¸¸è§çš„é€ƒé€¸åœºæ™¯&#34;&gt;å¸¸è§çš„é€ƒé€¸åœºæ™¯
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆ&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;NewUser&lt;/span&gt;() &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;User {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    u &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; User{Name: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Bob&amp;#34;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;u &lt;span style=&#34;color:#6272a4&#34;&gt;// u é€ƒé€¸åˆ°å †ï¼Œå› ä¸ºå‡½æ•°è¿”å›å u ä»éœ€è¢«å¤–éƒ¨è®¿é—®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;å‘ &lt;code&gt;interface{}&lt;/code&gt; èµ‹å€¼ (åŠ¨æ€ç±»å‹)&lt;/strong&gt;:
å¾ˆå¤šæ ‡å‡†åº“å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;fmt.Println&lt;/code&gt;ï¼‰æ¥æ”¶ &lt;code&gt;interface{}&lt;/code&gt; å‚æ•°ã€‚ç¼–è¯‘å™¨éš¾ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šå…·ä½“çš„ç±»å‹å’Œå¤§å°ï¼Œé€šå¸¸ä¼šé€ƒé€¸ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;name &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fmt.&lt;span style=&#34;color:#50fa7b&#34;&gt;Println&lt;/span&gt;(name) &lt;span style=&#34;color:#6272a4&#34;&gt;// name å¯èƒ½ä¼šé€ƒé€¸ï¼Œå› ä¸º fmt.Println å†…éƒ¨ä½¿ç”¨åå°„ä¸”æ¥æ”¶ interface{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;é—­åŒ…å¼•ç”¨å¤–éƒ¨å˜é‡&lt;/strong&gt;:
å¦‚æœé—­åŒ…ä¿®æ”¹äº†å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œæˆ–è€…å¤–éƒ¨å˜é‡è¢«é—­åŒ…æŒæœ‰å¹¶åœ¨å¤–éƒ¨å‡½æ•°è¿”å›åç»§ç»­å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;ClosureEscape&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    x &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        x&lt;span style=&#34;color:#ff79c6&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#6272a4&#34;&gt;// x è¢«é—­åŒ…å¼•ç”¨ï¼Œå¿…é¡»åˆ†é…åœ¨å †ä¸Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; x
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;æ ˆç©ºé—´ä¸è¶³ (Stack Overflow)&lt;/strong&gt;:
è™½ç„¶ Goroutine æ ˆå¯æ‰©å®¹ï¼Œä½†å¦‚æœä½ åˆ†é…ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„ï¼ˆä¾‹å¦‚ &lt;code&gt;[1000000]int&lt;/code&gt;ï¼‰ï¼Œå¯èƒ½ä¼šç›´æ¥åˆ†é…åˆ°å †ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;BigStack&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// æ•°ç»„è¿‡å¤§ï¼Œè¶…è¿‡æ ˆå¸§é™åˆ¶ï¼Œé€ƒé€¸åˆ°å †&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; big [&lt;span style=&#34;color:#bd93f9&#34;&gt;10000000&lt;/span&gt;]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _ = big
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡ç‰‡é•¿åº¦åŠ¨æ€å˜åŒ–æˆ–è¿‡å¤§&lt;/strong&gt;:
å½“åˆ‡ç‰‡åº•å±‚æ•°ç»„éœ€è¦åœ¨è¿è¡Œæ—¶æ‰©å®¹ä¸”å¤§å°ä¸å¯é¢„æµ‹æ—¶ï¼Œå¾€å¾€åˆ†é…åœ¨å †ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;DynamicSlice&lt;/span&gt;(n &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// ç¼–è¯‘æœŸæ— æ³•ç¡®å®š n çš„å¤§å°ï¼Œä¸ºäº†å®‰å…¨åˆ†é…åœ¨å †ä¸Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    s &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;, n)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _ = s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;go build -gcflags=&amp;quot;-m&amp;quot;&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ç¼–è¯‘å™¨çš„é€ƒé€¸åˆ†æç»“æœã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-go-çš„-gc-garbage-collection-æ·±åº¦è§£æ&#34;&gt;3. Go çš„ GC (Garbage Collection) æ·±åº¦è§£æ
&lt;/h2&gt;&lt;p&gt;Go çš„ GC æœºåˆ¶æ˜¯ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç‰¹å¾&lt;strong&gt;å…±åŒå®šä¹‰&lt;/strong&gt;çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éåˆ†ä»£ (Non-generational)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¸åƒ Java/JVM é‚£æ ·å°†å†…å­˜åˆ†ä¸ºâ€œæ–°ç”Ÿä»£â€å’Œâ€œè€å¹´ä»£â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;åŸå› &lt;/em&gt;: Go çš„ç¼–è¯‘å™¨é€ƒé€¸åˆ†æå·²ç»éå¸¸å¼ºå¤§ï¼Œå¾ˆå¤šçŸ­ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ç›´æ¥åˆ†é…åœ¨æ ˆä¸Šå¹¶è‡ªåŠ¨é”€æ¯äº†ï¼Œè¿™å¤§å¤§é™ä½äº†åˆ†ä»£ GC åœ¨ Go ä¸­çš„ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘ (Concurrent)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;GC çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹ï¼ˆMutatorï¼‰æ˜¯&lt;strong&gt;å¹¶è¡Œè¿è¡Œ&lt;/strong&gt;çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¤§éƒ¨åˆ†æ—¶é—´ä¸éœ€è¦æš‚åœç¨‹åº (Stop The World)ï¼Œæå¤§åœ°é™ä½äº†å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰è‰²æ ‡è®°æ¸…é™¤ (Tri-color Mark and Sweep)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯å…·ä½“çš„&lt;strong&gt;å®ç°ç®—æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†åœ¨â€œå¹¶å‘â€è¿è¡Œçš„çŠ¶æ€ä¸‹å‡†ç¡®è¿½è¸ªå†…å­˜ï¼ŒGo ä½¿ç”¨äº†ä¸‰è‰²ï¼ˆé»‘ã€ç°ã€ç™½ï¼‰æ¨¡å‹æ¥æ ‡è®°å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šè¿™ä¸‰è€…åˆèµ·æ¥æ„æˆäº† Go çš„ GCã€‚å…¶ä¸­ï¼Œâ€œä¸‰è‰²æ ‡è®°æ³•â€æ˜¯å…¶æ ¸å¿ƒç®—æ³•é€»è¾‘ï¼Œä¸‹é¢é‡ç‚¹å±•å¼€è®²è§£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-ä¸‰è‰²æ ‡è®°æ³•åŸç†-tri-color-marking&#34;&gt;3.1 ä¸‰è‰²æ ‡è®°æ³•åŸç† (Tri-color Marking)
&lt;/h3&gt;&lt;p&gt;GC çš„æ ¸å¿ƒä»»åŠ¡æ˜¯æ‰¾åˆ°æ‰€æœ‰â€œå¯è¾¾â€çš„å¯¹è±¡ã€‚ä¸ºäº†åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼ˆç”¨æˆ·ä»£ç å’Œ GC åŒæ—¶è¿è¡Œï¼‰é«˜æ•ˆåœ°å®Œæˆè¿™ä¸€ä»»åŠ¡ï¼ŒGo å°†å¯¹è±¡åˆ†ä¸ºä¸‰ç§é¢œè‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;âšª ç™½è‰² (White)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ½œåœ¨çš„åƒåœ¾ã€‚è¡¨ç¤ºè¯¥å¯¹è±¡å°šæœªè¢« GC è®¿é—®åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;: GC å¼€å§‹å‰ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æŸçŠ¶æ€&lt;/strong&gt;: æ ‡è®°ç»“æŸåï¼Œä»ç„¶æ˜¯ç™½è‰²çš„å¯¹è±¡å°†è¢«æ¸…é™¤ï¼ˆå›æ”¶ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ğŸ”˜ ç°è‰² (Grey)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ´»è·ƒå¯¹è±¡ï¼Œä½†å…¶å­å¯¹è±¡ï¼ˆå¼•ç”¨çš„å¯¹è±¡ï¼‰å°šæœªè¢«å®Œå…¨æ‰«æã€‚å®ƒæ˜¯ç™½è‰²å’Œé»‘è‰²çš„ä¸­é—´çŠ¶æ€ï¼Œç±»ä¼¼äºâ€œå¾…å¤„ç†é˜Ÿåˆ—â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âš« é»‘è‰² (Black)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ´»è·ƒå¯¹è±¡ï¼Œä¸”å…¶å¼•ç”¨çš„æ‰€æœ‰å­å¯¹è±¡éƒ½å·²ç»è¢«æ‰«æè¿‡äº†ã€‚GC ä¸ä¼šå†æ¬¡æ‰«æé»‘è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ ‡è®°è¿‡ç¨‹æµè½¬&#34;&gt;æ ‡è®°è¿‡ç¨‹æµè½¬ï¼š
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;: æ‰€æœ‰å¯¹è±¡å‡ä¸ºç™½è‰²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹èŠ‚ç‚¹æ‰«æ&lt;/strong&gt;: GC ä» &lt;strong&gt;æ ¹èŠ‚ç‚¹ (GC Roots)&lt;/strong&gt;ï¼ˆåŒ…æ‹¬&lt;strong&gt;æ ˆä¸Šçš„å˜é‡&lt;/strong&gt;ã€å…¨å±€å˜é‡ã€å¯„å­˜å™¨ç­‰ï¼‰å‡ºå‘ï¼Œå°†å®ƒä»¬å¼•ç”¨çš„å¯¹è±¡æ ‡è®°ä¸º &lt;strong&gt;ç°è‰²&lt;/strong&gt;ï¼Œå¹¶æ”¾å…¥ç°è‰²é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯æ‰«æ&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä»ç°è‰²é›†åˆä¸­å–å‡ºä¸€ä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;å°†å…¶å¼•ç”¨çš„æ‰€æœ‰ç™½è‰²å­å¯¹è±¡æ ‡è®°ä¸º &lt;strong&gt;ç°è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°†è¯¥å¯¹è±¡è‡ªèº«æ ‡è®°ä¸º &lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;å®Œæˆæ ‡è®°&lt;/strong&gt;: é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°ç°è‰²é›†åˆä¸ºç©ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…é™¤&lt;/strong&gt;: æ­¤æ—¶ï¼Œå †ä¸Šåªå‰©ä¸‹é»‘è‰²ï¼ˆå­˜æ´»ï¼‰å’Œç™½è‰²ï¼ˆåƒåœ¾ï¼‰å¯¹è±¡ã€‚GC æ¸…é™¤æ‰€æœ‰ç™½è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;311-æ ¸å¿ƒç–‘é—®ä¸ºä»€ä¹ˆ-gc-è¦æ‰«ææ ˆ&#34;&gt;3.1.1 æ ¸å¿ƒç–‘é—®ï¼šä¸ºä»€ä¹ˆ GC è¦æ‰«ææ ˆï¼Ÿ
&lt;/h4&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šé—®ï¼š&lt;em&gt;â€œæ ˆä¸Šçš„å†…å­˜ä¸æ˜¯è‡ªåŠ¨é‡Šæ”¾å—ï¼Ÿä¸ºä»€ä¹ˆ GC è¿˜è¦è´¹åŠ²å»æ‰«æå®ƒï¼Ÿâ€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„&lt;strong&gt;æ‰«æ&lt;/strong&gt;å¹¶ä¸æ˜¯ä¸ºäº†å›æ”¶æ ˆï¼Œè€Œæ˜¯ä¸ºäº†&lt;strong&gt;ä¿æŠ¤å †&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;â€œæ‰«æâ€ç©¶ç«Ÿåœ¨åšä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;GC ä¼šéå†å½“å‰æ‰€æœ‰ Goroutine çš„æ ˆå¸§ï¼ŒæŸ¥çœ‹æ ˆä¸Šçš„&lt;strong&gt;å±€éƒ¨å˜é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒåœ¨å¯»æ‰¾&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ï¼šçœ‹çœ‹è¿™äº›å±€éƒ¨å˜é‡æ˜¯ä¸æ˜¯æŒ‡å‘äº†&lt;strong&gt;å †&lt;/strong&gt;ä¸Šçš„æŸä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦æ ‡è®°ä¸ºç°è‰²ï¼Ÿï¼ˆå¦‚æœä¸æ ‡ä¼šæ€æ ·ï¼Ÿï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å‡è®¾ä½ çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;HandleRequest&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// &amp;#39;u&amp;#39; æ˜¯æ ˆä¸Šçš„å±€éƒ¨å˜é‡ï¼Œä½†å®ƒæŒ‡å‘äº†å †ä¸Šçš„ User å¯¹è±¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    u &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;User{Name: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Admin&amp;#34;&lt;/span&gt;} 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// --- æ­¤æ—¶ GC å¼€å§‹ ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    fmt.&lt;span style=&#34;color:#50fa7b&#34;&gt;Println&lt;/span&gt;(u.Name) &lt;span style=&#34;color:#6272a4&#34;&gt;// åç»­è¿˜éœ€è¦ç”¨ u&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœ GC ä¸æ‰«ææ ˆ&lt;/strong&gt;ï¼šGC ä¼šå‘ç°å †ä¸Šçš„è¿™ä¸ª &lt;code&gt;User&lt;/code&gt; å¯¹è±¡æ²¡æœ‰ä»»ä½•&lt;em&gt;å †ä¸Š&lt;/em&gt;çš„å…¶ä»–å¯¹è±¡å¼•ç”¨å®ƒã€‚GC ä¼šè¯¯åˆ¤å®ƒæ˜¯åƒåœ¾ï¼ˆç™½è‰²ï¼‰ï¼Œç›´æ¥å›æ”¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šå½“ä»£ç æ‰§è¡Œåˆ° &lt;code&gt;fmt.Println(u.Name)&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;u&lt;/code&gt; æŒ‡å‘çš„å†…å­˜å·²ç»è¢«æ¸…ç©ºï¼Œç¨‹åºç›´æ¥å´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šæ ˆæ˜¯ç¨‹åºè¿è¡Œçš„â€œæœ€å‰çº¿â€ã€‚&lt;strong&gt;åªè¦æ ˆä¸Šè¿˜èƒ½å¼•ç”¨åˆ°çš„å¯¹è±¡ï¼Œå°±ç»å¯¹ä¸èƒ½å›æ”¶&lt;/strong&gt;ã€‚æ ‡è®°ä¸ºç°è‰²ï¼Œå°±æ˜¯ç»™è¿™ä¸ªå¯¹è±¡æŒ‚ä¸Šâ€œå…æ­»é‡‘ç‰Œâ€ï¼Œå‘Šè¯‰ GCï¼šâ€œè¿™ä¸ªå¯¹è±¡æˆ‘æ ˆä¸Šæ­£å¼•ç”¨ç€å‘¢ï¼Œåˆ«åŠ¨å®ƒï¼â€&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;32-ä¸ºä»€ä¹ˆéœ€è¦å†™å±éšœ-write-barrier&#34;&gt;3.2 ä¸ºä»€ä¹ˆéœ€è¦å†™å±éšœ (Write Barrier)ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ 3.1 èŠ‚çš„ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ GC æ‰«ææœŸé—´å†…å­˜å¼•ç”¨å…³ç³»æ˜¯ä¸å˜çš„ã€‚ä½†åœ¨ Go çš„&lt;strong&gt;å¹¶å‘ GC&lt;/strong&gt; ä¸­ï¼Œ&lt;strong&gt;GC æ­£åœ¨æ ‡è®°çš„åŒæ—¶ï¼Œä½ çš„ç¨‹åºä»£ç ï¼ˆç”¨æˆ·çº¿ç¨‹/Mutatorï¼‰ä¹Ÿåœ¨è¿è¡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å†™å±éšœç”¨åœ¨å“ªé‡Œ&#34;&gt;å†™å±éšœç”¨åœ¨å“ªé‡Œï¼Ÿ
&lt;/h4&gt;&lt;p&gt;å†™å±éšœï¼ˆWrite Barrierï¼‰ä¸æ˜¯ GC çš„ä¸€ä¸ªç‹¬ç«‹æ­¥éª¤ï¼Œè€Œæ˜¯&lt;strong&gt;ç¼–è¯‘å™¨åœ¨ä½ çš„ä»£ç ä¸­è‡ªåŠ¨æ’å…¥çš„â€œé’©å­â€ä»£ç &lt;/strong&gt;ã€‚ï¼ˆâ€œé’©å­â€è¿™ä¸ªè¯åœ¨ç¼–ç¨‹é‡Œé€šå¸¸æŒ‡&lt;strong&gt;æ‹¦æˆª&lt;/strong&gt;ï¼‰
æ¯å½“ä½ æ‰§è¡Œç±»ä¼¼ &lt;code&gt;obj.next = newNode&lt;/code&gt; è¿™æ ·çš„&lt;strong&gt;æŒ‡é’ˆèµ‹å€¼è¯­å¥&lt;/strong&gt;æ—¶ï¼Œä¸ä»…ä¼šä¿®æ”¹å†…å­˜ï¼Œè¿˜ä¼š&lt;strong&gt;è§¦å‘å†™å±éšœä»£ç &lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä¸ºä»€ä¹ˆè¦è§¦å‘å®ƒ&#34;&gt;ä¸ºä»€ä¹ˆè¦è§¦å‘å®ƒï¼Ÿ
&lt;/h4&gt;&lt;p&gt;å¦‚æœç”¨æˆ·ä»£ç å¹¶å‘åœ°ä¿®æ”¹äº†å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šæ¬ºéª— GCï¼Œå¯¼è‡´&lt;strong&gt;åˆæ³•å¯¹è±¡è¢«å›æ”¶ï¼ˆä¸¢å¯¹è±¡ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‚¬æŒ‚æŒ‡é’ˆé—®é¢˜ï¼ˆä¸¢å¯¹è±¡ï¼‰æ¼”ç¤º&lt;/strong&gt;:
å‡è®¾ GC æ­£åœ¨æ‰«æï¼ŒA(é»‘) å·²ç»æ‰«æå®Œï¼ŒB(ç°) æ­£åœ¨é˜Ÿåˆ—ä¸­ï¼ŒC(ç™½) æ˜¯ B çš„å­èŠ‚ç‚¹ã€‚
æ­¤æ—¶ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œäº†ï¼š &lt;code&gt;A.ptr = C; B.ptr = nil;&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ“ä½œ&lt;/strong&gt;: å°† C æŒ‚åˆ°äº† A ä¸‹é¢ï¼ˆé»‘è‰²æŒ‡å‘ç™½è‰²ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ“ä½œ&lt;/strong&gt;: æ–­å¼€äº† B å¯¹ C çš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GC æ¥ç€è·‘ï¼šå› ä¸º A å·²ç»æ˜¯é»‘è‰²ï¼ˆè¡¨ç¤ºå·²æ‰«æå®Œï¼‰ï¼ŒGC &lt;strong&gt;ä¸ä¼šå›å¤´&lt;/strong&gt;å†å»æ£€æŸ¥ Aï¼Œæ‰€ä»¥ GC æ ¹æœ¬ä¸çŸ¥é“ A ç°åœ¨å¼•ç”¨äº† Cã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ B ä¹Ÿä¸å¼•ç”¨ C äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆ&lt;/strong&gt;: C æ°¸è¿œä¿æŒç™½è‰²ã€‚GC è®¤ä¸º C æ˜¯åƒåœ¾å¹¶å›æ”¶å®ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å´©&lt;/strong&gt;: ç¨‹åºç¨åè¯•å›¾è®¿é—® &lt;code&gt;A.ptr&lt;/code&gt; (å³ C)ï¼Œå‘ç°å†…å­˜å·²æ— æ•ˆï¼Œç›´æ¥å´©æºƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;: å¿…é¡»æœ‰æœºåˆ¶ï¼ˆå†™å±éšœï¼‰åœ¨ç”¨æˆ·&lt;strong&gt;ä¿®æ”¹æŒ‡é’ˆ&lt;/strong&gt;æ—¶å‘Šè¯‰ GCï¼Œé˜²æ­¢è¿™ç§â€œé»‘è‰²æŒ‡å‘ç™½è‰²â€ä¸”â€œç™½è‰²å¤±å»ä¿æŠ¤â€çš„æƒ…å†µå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå¿…é¡»æ»¡è¶³ &lt;strong&gt;ä¸‰è‰²ä¸å˜é‡&lt;/strong&gt; çš„å…¶ä¸­ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸‰è‰²ä¸å˜é‡&lt;/strong&gt;: é»‘è‰²å¯¹è±¡ä¸å…è®¸å¼•ç”¨ç™½è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼±ä¸‰è‰²ä¸å˜é‡&lt;/strong&gt;: é»‘è‰²å¯¹è±¡å¯ä»¥å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œä½†è¯¥ç™½è‰²å¯¹è±¡å¿…é¡»å­˜åœ¨å…¶ä»–ç°è‰²å¯¹è±¡çš„è·¯å¾„ä¿æŠ¤ï¼ˆå³å®ƒæœ€ç»ˆä¼šè¢«æ‰«æåˆ°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å†™å±éšœ&lt;/strong&gt; å°±æ˜¯åœ¨â€œèµ‹å€¼æ“ä½œâ€å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œçš„ä¸€æ®µä»£ç ï¼Œç”¨äºç»´æŠ¤ä¸Šè¿°ä¸å˜é‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;33-æ·±å…¥æ¼”è¿›ä»æ’å…¥å±éšœåˆ°æ··åˆå±éšœ&#34;&gt;3.3 æ·±å…¥æ¼”è¿›ï¼šä»æ’å…¥å±éšœåˆ°æ··åˆå±éšœ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å½»åº•ç†è§£ Go 1.8 çš„æ··åˆå†™å±éšœï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å®ƒè¯•å›¾èåˆçš„ä¸¤ç§åŸºç¡€ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç­–ç•¥-aæ’å…¥å†™å±éšœ-dijkstra--å¼ºä¸‰è‰²ä¸å˜é‡&#34;&gt;ç­–ç•¥ Aï¼šæ’å…¥å†™å±éšœ (Dijkstra) â€” å¼ºä¸‰è‰²ä¸å˜é‡
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;: æ—¢ç„¶æ€•é»‘è‰²æŒ‡å‘ç™½è‰²ï¼Œé‚£æˆ‘å°±&lt;strong&gt;ä¸å…è®¸é»‘è‰²æŒ‡å‘ç™½è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åšæ³•&lt;/strong&gt;: å½“ä½ æ‰§è¡Œ &lt;code&gt;A.ptr = C&lt;/code&gt;ï¼ˆA æ˜¯é»‘ï¼ŒC æ˜¯ç™½ï¼‰æ—¶ï¼Œå†™å±éšœç«‹é©¬è§¦å‘ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œåœï¼Cï¼Œä½ è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨äº†ï¼Œä½ ä¸èƒ½æ˜¯ç™½è‰²çš„ï¼ŒæŠŠä½ æ¶‚æˆç°è‰²ï¼â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;: C å˜æˆäº†ç°è‰²ï¼ŒåŠ å…¥æ‰«æé˜Ÿåˆ—ã€‚C å®‰å…¨äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ˆçš„ç‰¹æ®Šæ€§&lt;/strong&gt;: ä¸ºäº†æé«˜çš„è¿è¡Œé€Ÿåº¦ï¼Œ&lt;strong&gt;æ ˆä¸Šçš„æŒ‡é’ˆä¿®æ”¹æ˜¯ä¸èƒ½åŠ å†™å±éšœçš„&lt;/strong&gt;ï¼ˆåŠ äº†ä¼šæ…¢æ­»ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¼æ´&lt;/strong&gt;: å¦‚æœæˆ‘åœ¨æ ˆä¸Šæ”¹äº†æŒ‡é’ˆï¼ˆæ¯”å¦‚æ ˆä¸Šçš„é»‘å¯¹è±¡å¼•ç”¨äº†å †ä¸Šçš„ç™½å¯¹è±¡ï¼‰ï¼Œå†™å±éšœæŠ“ä¸åˆ°ï¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥æ•‘&lt;/strong&gt;: æ‰€ä»¥ GC å¿…é¡»åœ¨ç»“æŸå‰ï¼Œ&lt;strong&gt;æš‚åœæ•´ä¸ªç¨‹åº (STW)&lt;/strong&gt;ï¼Œé‡æ–°æŠŠæ‰€æœ‰æ ˆæ‰«æä¸€éï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚è¿™å°±æ˜¯ Go 1.5 æ—¶ä»£ STW è€—æ—¶è¾ƒé«˜çš„åŸå› ï¼ˆ10ms - 100ms çº§åˆ«ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç­–ç•¥-båˆ é™¤å†™å±éšœ-yuasa--å¼±ä¸‰è‰²ä¸å˜é‡&#34;&gt;ç­–ç•¥ Bï¼šåˆ é™¤å†™å±éšœ (Yuasa) â€” å¼±ä¸‰è‰²ä¸å˜é‡
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;: æ—¢ç„¶æ€•â€œç™½è‰²å¤±å»ä¿æŠ¤â€ï¼Œé‚£æˆ‘å°±&lt;strong&gt;ä¸å…è®¸ç™½è‰²å¤±å»ä¿æŠ¤&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†™å±éšœæœºåˆ¶&lt;/strong&gt;: å†æ¬¡å¼ºè°ƒï¼Œå†™å±éšœæ˜¯ç¼–è¯‘å™¨æ’å…¥åœ¨&lt;strong&gt;ä½ çš„ Go ä»£ç &lt;/strong&gt;èµ‹å€¼æ“ä½œä¸­çš„ä¸€æ®µä¿æŠ¤é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åšæ³•&lt;/strong&gt;: å½“ä½ æ‰§è¡Œ &lt;code&gt;B.ptr = nil&lt;/code&gt; æˆ–è€… &lt;code&gt;B.ptr = D&lt;/code&gt;ï¼ˆB åŸæœ¬å¼•ç”¨ Cï¼Œç°åœ¨æ–­å¼€æˆ–è¦†ç›–ï¼‰æ—¶ï¼Œå†™å±éšœè§¦å‘ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œåœï¼Cï¼Œä½ è¦è¢«æŠ›å¼ƒäº†å—ï¼Ÿåœ¨ä½ è¢«æ–­å¼€ä¹‹å‰ï¼Œæˆ‘å¿…é¡»æŠŠä½ &lt;strong&gt;æ¶‚æˆç°è‰²&lt;/strong&gt;ï¼â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯æ·±åº¦è§£æï¼šå¯¹è±¡â€œç§»åŠ¨â€ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ C æ˜¯ç™½è‰²å¯¹è±¡ï¼Œåªæœ‰ B (ç°è‰²) å¼•ç”¨å®ƒã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„ä»»åŠ¡æ˜¯ï¼šæŠŠ C ä» B ç§»åŠ¨åˆ° A (é»‘è‰²)ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å¯èƒ½æ˜¯ï¼š&lt;code&gt;A.ptr = B.ptr; B.ptr = nil;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;1.  **å¦‚æœæ²¡æœ‰å±éšœï¼ˆå±é™©ï¼‰**:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   `A.ptr = C`: A æ˜¯é»‘è‰²ï¼ŒGC ä¸ä¼šå†æ‰«æ Aã€‚GC æ­¤æ—¶ä¸çŸ¥é“ A å¼•ç”¨äº† Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   `B.ptr = nil`: B å’Œ C çš„è¿æ¥æ–­å¼€ã€‚GC æ‰«æ B æ—¶å‘ç°å®ƒä¸å†å¼•ç”¨ Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   **ç»“æœ**: C æˆäº†â€œå­¤å„¿â€ï¼ˆç™½è‰²ï¼‰ï¼ŒGC ä»¥ä¸ºæ²¡äººè¦å®ƒï¼Œç›´æ¥å›æ”¶ã€‚**å´©ï¼**
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2.  **æœ‰äº†åˆ é™¤å±éšœï¼ˆå®‰å…¨ï¼‰**:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   åœ¨æ‰§è¡Œ `B.ptr = nil`ï¼ˆæ–­å¼€å¼•ç”¨ï¼‰çš„é‚£ä¸€åˆ»ï¼Œå†™å±éšœä»‹å…¥ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   å®ƒå‘ç° B åŸæœ¬å¼•ç”¨çš„æ˜¯ Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   å®ƒå¼ºåˆ¶æŠŠ **C (æ—§å€¼)** æ ‡è®°ä¸º **ç°è‰²**ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   **ç»“æœ**: æ—¢ç„¶ C ç°äº†ï¼ŒGC ç¨åä¸€å®šä¼šæ‰«æ Cã€‚è™½ç„¶ A (é»‘è‰²) å¼•ç”¨ C æ²¡è¢« GC çœ‹åˆ°ï¼Œä½† C è‡ªå·±å˜ç°äº†ï¼Œå®ƒå°±å®‰å…¨äº†ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿«ç…§æ€§è´¨ (Snapshot-at-the-beginning)&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;è¿™ç§ç­–ç•¥å®é™…ä¸Šæ˜¯ä¿ç•™äº† &lt;strong&gt;GC å¼€å§‹é‚£ä¸€åˆ»çš„å­˜æ´»å¿«ç…§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åªè¦ GC å¼€å§‹æ—¶ C æ˜¯æ´»çš„ï¼Œå“ªæ€•ä½ ä¸­é—´æŠŠå®ƒæ–­å¼€äº†ã€ç§»èµ°äº†ï¼Œå†™å±éšœéƒ½ä¼šæŠŠå®ƒæ¶‚ç°ï¼Œå¼ºè¡Œä¿å®ƒæ´»è¿‡è¿™ä¸€è½® GCã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ®åŠ¨åƒåœ¾&lt;/strong&gt;: å¦‚æœ C åæ¥çœŸçš„æ²¡äººå¼•ç”¨äº†ï¼ˆä¹Ÿæ²¡ç»™ Aï¼‰ï¼Œå®ƒè¿™è½®ä¾ç„¶ä¼šè¢«ä¿ç•™ã€‚è¿™å°±æ˜¯â€œæµ®åŠ¨åƒåœ¾â€ï¼Œä½†è¿™æ˜¯ä¸ºäº†å®‰å…¨ï¼ˆä¸è¯¯åˆ ï¼‰æ‰€ä»˜å‡ºçš„æœ€å°ä»£ä»·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;: è™½ç„¶ä¸éœ€è¦ STW é‡æ‰«æ ˆï¼Œä½†å›æ”¶ç²¾åº¦è¾ƒä½ï¼ˆä¼šäº§ç”Ÿæµ®åŠ¨åƒåœ¾ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;ç»ˆæå½¢æ€go-18-æ··åˆå†™å±éšœ-hybrid-write-barrier&#34;&gt;ç»ˆæå½¢æ€ï¼šGo 1.8 æ··åˆå†™å±éšœ (Hybrid Write Barrier)
&lt;/h4&gt;&lt;p&gt;Go 1.8 ç»“åˆäº†ä¸Šè¿°ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œè®¾è®¡äº†&lt;strong&gt;æ··åˆå†™å±éšœ&lt;/strong&gt;ã€‚å®ƒçš„ç›®æ ‡æ˜¯ï¼š&lt;strong&gt;æ—¢ä¸éœ€è¦ STW é‡æ‰«æ ˆï¼ˆåƒåˆ é™¤å±éšœï¼‰ï¼Œä¹Ÿä¸éœ€è¦åœ¨æ ˆä¸ŠåŠ å±éšœï¼ˆåƒæ’å…¥å±éšœï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåšæ³•&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;GC å¼€å§‹æ—¶&lt;/strong&gt;: ç›´æ¥æŠŠæ ˆä¸Šæ‰€æœ‰å¯è¾¾çš„å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸º&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ï¼ˆæ— éœ€ STW é‡æ‰«ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GC æœŸé—´&lt;/strong&gt;: ä»»ä½•åœ¨æ ˆä¸Š&lt;strong&gt;æ–°åˆ›å»º&lt;/strong&gt;çš„å¯¹è±¡ï¼Œç›´æ¥æ ‡è®°ä¸º&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †ä¸Šå†™å±éšœ&lt;/strong&gt;: å½“å †ä¸Šçš„æŒ‡é’ˆä¿®æ”¹æ—¶ï¼Œæ‰§è¡Œæ··åˆé€»è¾‘ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// å½“æ‰§è¡Œ ptr.field = obj æ—¶ï¼ˆä¿®æ”¹å †ä¸Šçš„å¼•ç”¨ï¼‰ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;write_barrier&lt;/span&gt;(slot, obj) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 1. [åˆ é™¤å±éšœé€»è¾‘] ä¿æŠ¤æ—§å€¼ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// å¦‚æœæ—§å€¼ï¼ˆptr.fieldæŒ‡çš„ä»¥å‰çš„å€¼ï¼‰æ˜¯ç™½è‰²çš„ï¼Œå°±æ¶‚æˆç°è‰²ã€‚é˜²æ­¢å®ƒè¢«æ–­å¼€åä¸¢å¤±ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#50fa7b&#34;&gt;shade&lt;/span&gt;(slot.old_value)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 2. [æ’å…¥å±éšœé€»è¾‘] ä¿æŠ¤æ–°å€¼ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// å¦‚æœæ–°å€¼æ˜¯ç™½è‰²çš„ï¼Œå°±æ¶‚æˆç°è‰²ã€‚é˜²æ­¢å®ƒè¢«æŒ‚åœ¨é»‘è‰²å¯¹è±¡ä¸‹è€Œä¸è¢«æ‰«æã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#50fa7b&#34;&gt;shade&lt;/span&gt;(obj)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 3. æ‰§è¡ŒçœŸæ­£çš„èµ‹å€¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;slot = obj
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ˆçš„æ“ä½œ&lt;/strong&gt;: æ ˆå…¨æ˜¯é»‘çš„ï¼ˆæˆ–èƒ½å¼•ç”¨çš„éƒ½ç°äº†ï¼‰ï¼Œä¸”æ–°åˆ†é…çš„ä¹Ÿæ˜¯é»‘çš„ã€‚æ‰€ä»¥åœ¨æ ˆä¸Šæ€ä¹ˆæ”¹æŒ‡é’ˆéƒ½ä¸æ€•ä¸¢å¯¹è±¡ï¼Œ&lt;strong&gt;ä¸éœ€è¦åŠ å±éšœï¼Œä¹Ÿä¸éœ€è¦ STW é‡æ‰«&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †çš„æ“ä½œ&lt;/strong&gt;: æ··åˆå±éšœåŒæ—¶ä¿æŠ¤äº†â€œæ—§å¯¹è±¡ä¸ä¸¢å¤±â€å’Œâ€œæ–°å¯¹è±¡è¢«æ‰«æâ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;:
Go çš„ GC æš‚åœæ—¶é—´ (STW) è¢«å‹ç¼©åˆ°äº† &lt;strong&gt;äºšæ¯«ç§’çº§&lt;/strong&gt;ï¼ˆé€šå¸¸å‡ åå¾®ç§’ï¼‰ï¼Œåªå‰©ä¸‹å¼€å¯/å…³é—­å±éšœçš„æçŸ­ç¬é—´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ€»ç»“gc-æ¼”è¿›&#34;&gt;æ€»ç»“ï¼šGC æ¼”è¿›
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Go 1.3&lt;/strong&gt;: STW æ ‡è®°æ¸…é™¤ (ç™¾æ¯«ç§’çº§)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Go 1.5&lt;/strong&gt;: å¹¶å‘æ ‡è®° + Dijkstra æ’å…¥å±éšœ (éœ€è¦ STW é‡æ‰«æ ˆï¼Œæ¯«ç§’çº§)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Go 1.8&lt;/strong&gt;: &lt;strong&gt;æ··åˆå†™å±éšœ&lt;/strong&gt; (æ— éœ€ STW é‡æ‰«æ ˆï¼Œäºšæ¯«ç§’/å¾®ç§’çº§)ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰ Go GC ä½å»¶è¿Ÿçš„æ ¸å¿ƒåŸºçŸ³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ€»ç»“å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å›æ”¶&#34;&gt;æ€»ç»“ï¼šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å›æ”¶
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
          &lt;th&gt;æ ˆ (Stack)&lt;/th&gt;
          &lt;th&gt;å † (Heap)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;åˆ†é…ä½ç½®&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å±€éƒ¨å˜é‡ï¼Œæ— æŒ‡é’ˆé€ƒé€¸&lt;/td&gt;
          &lt;td&gt;é€ƒé€¸çš„å˜é‡ï¼Œå¤§å¯¹è±¡ï¼ŒåŠ¨æ€å¯¹è±¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;åˆ†é…é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æå¿« (SP æŒ‡é’ˆç§»åŠ¨)&lt;/td&gt;
          &lt;td&gt;è¾ƒæ…¢ (å†…å­˜åˆ†é…å™¨ mallocgc)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å›æ”¶æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt;: å‡½æ•°è¿”å›å³é”€æ¯&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;GC&lt;/strong&gt;: æ ‡è®°æ¸…é™¤&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;GC è§’è‰²&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;ä½œä¸ºæ ¹èŠ‚ç‚¹ (Root)&lt;/strong&gt;: GC æ‰«ææ ˆä»¥å‘ç°å †å¯¹è±¡çš„å¼•ç”¨&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;è¢«å›æ”¶ç›®æ ‡&lt;/strong&gt;: GC æ‰«æå¹¶æ¸…ç†ä¸å¯è¾¾å¯¹è±¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æä½&lt;/td&gt;
          &lt;td&gt;è¾ƒé«˜ (åˆ†é…å¼€é”€ + GC CPU å ç”¨)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æœ€ä½³å®è·µ&#34;&gt;æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å‡å°‘ GC å‹åŠ›ï¼ˆStop The World æ—¶é—´å’Œ CPU å ç”¨ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘é€ƒé€¸&lt;/strong&gt;: å°½é‡åœ¨æ ˆä¸Šåˆ†é…ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå°å¯¹è±¡ï¼Œç›´æ¥ä¼ å€¼è€Œéä¼ æŒ‡é’ˆï¼ˆå¦‚æœå¤åˆ¶æˆæœ¬ &amp;lt; GC æ‰«ææˆæœ¬ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢„åˆ†é…å†…å­˜&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;make([]T, 0, cap)&lt;/code&gt; é¢„åˆ†é…åˆ‡ç‰‡ï¼Œå‡å°‘æ‰©å®¹å¯¼è‡´çš„å †åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡å¤ç”¨&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;sync.Pool&lt;/code&gt; å¤ç”¨å †ä¸Šçš„å¤§å¯¹è±¡ï¼Œé¿å…åå¤åˆ›å»ºå’Œé”€æ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>go-zero çš„ Model å±‚ Redis ç¼“å­˜æœºåˆ¶</title>
        <link>https://skylm808.github.io/p/go-zero-%E7%9A%84-model-%E5%B1%82-redis-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</link>
        <pubDate>Fri, 16 Jan 2026 08:00:00 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/go-zero-%E7%9A%84-model-%E5%B1%82-redis-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</guid>
        <description>&lt;p&gt;åœ¨æ„å»ºé«˜æ€§èƒ½å¾®æœåŠ¡æ—¶ï¼Œæ•°æ®åº“å¾€å¾€æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚go-zero åœ¨ Model å±‚å†…ç½®äº†ä¸€å¥—é«˜æ•ˆä¸”è‡ªåŠ¨åŒ–çš„ Redis ç¼“å­˜æœºåˆ¶ã€‚æœ¬æ–‡åŸºäºæºç é€»è¾‘ï¼Œè®²æ¸…æ¥šå®ƒå¦‚ä½•å¤„ç†ä¸»é”®ç¼“å­˜ã€å”¯ä¸€ç´¢å¼•ç¼“å­˜ä»¥åŠæ•°æ®ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-æ ¸å¿ƒè®¾è®¡å“²å­¦index-cacheç´¢å¼•ç¼“å­˜&#34;&gt;1. æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼šIndex Cacheï¼ˆç´¢å¼•ç¼“å­˜ï¼‰
&lt;/h2&gt;&lt;p&gt;go-zero å¹¶æ²¡æœ‰é‡‡ç”¨â€œå¤§æ‚çƒ©â€å¼çš„ç¼“å­˜ç­–ç•¥ï¼Œè€Œæ˜¯ä¸¥æ ¼éµå¾ª &lt;strong&gt;â€œæ‰€æœ‰æŸ¥è¯¢æœ€ç»ˆéƒ½å›å½’åˆ° IDâ€&lt;/strong&gt; çš„è®¾è®¡åŸåˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;11-ä¸¤ç§ç¼“å­˜ç±»å‹&#34;&gt;1.1 ä¸¤ç§ç¼“å­˜ç±»å‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Primary Cache (ä¸»é”®ç¼“å­˜)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Key&lt;/strong&gt;: &lt;code&gt;cache:user:id:1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Value&lt;/strong&gt;: &lt;code&gt;{&amp;quot;Id&amp;quot;:1, &amp;quot;Username&amp;quot;:&amp;quot;admin&amp;quot;, ...}&lt;/code&gt;ï¼ˆæ•´è¡Œæ•°æ® JSONï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;: çœŸæ­£å­˜å‚¨æ•°æ®çš„åœ°æ–¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;Index Cache (å”¯ä¸€ç´¢å¼•ç¼“å­˜)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Key&lt;/strong&gt;: &lt;code&gt;cache:user:username:admin&lt;/code&gt; / &lt;code&gt;cache:user:phone:138xxxx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Value&lt;/strong&gt;: &lt;code&gt;1&lt;/code&gt;ï¼ˆå¯¹åº”çš„ UserIDï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;: åªæ˜¯ä¸€ä¸ªè·¯æ ‡ï¼ŒæŒ‡å‘ä¸»é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-æŸ¥è¯¢æµç¨‹ä»ä¸¤æ­¥èµ°åˆ°ä¸€æ­¥åˆ°ä½&#34;&gt;2. æŸ¥è¯¢æµç¨‹ï¼šä»â€œä¸¤æ­¥èµ°â€åˆ°â€œä¸€æ­¥åˆ°ä½â€
&lt;/h2&gt;&lt;h3 id=&#34;åœºæ™¯-aåŸºäºä¸»é”®æŸ¥è¯¢findoneid&#34;&gt;åœºæ™¯ Aï¼šåŸºäºä¸»é”®æŸ¥è¯¢ï¼ˆ&lt;code&gt;FindOne(id)&lt;/code&gt;ï¼‰
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€å¿«è·¯å¾„ï¼Œä¸€æ­¥åˆ°ä½ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»£ç è°ƒç”¨ &lt;code&gt;FindOne(1)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¡†æ¶ç›´æ¥æŸ¥ Redis &lt;code&gt;cache:user:id:1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hit&lt;/strong&gt;: æ‹¿åˆ° JSONï¼Œååºåˆ—åŒ–è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Miss&lt;/strong&gt;: æŸ¥ MySQL -&amp;gt; æ‹¿åˆ°æ•´è¡Œæ•°æ® -&amp;gt; &lt;strong&gt;å†™å…¥ Redis&lt;/strong&gt; -&amp;gt; è¿”å›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åœºæ™¯-båŸºäºå”¯ä¸€ç´¢å¼•æŸ¥è¯¢findonebyusernameadmin&#34;&gt;åœºæ™¯ Bï¼šåŸºäºå”¯ä¸€ç´¢å¼•æŸ¥è¯¢ï¼ˆ&lt;code&gt;FindOneByUsername(&amp;quot;admin&amp;quot;)&lt;/code&gt;ï¼‰
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯å…¸å‹çš„â€œä»¥ç©ºé—´æ¢æ—¶é—´ + æ•°æ®å½’ä¸€åŒ–â€ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼ˆæ‰¾ IDï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥ Redis &lt;code&gt;cache:user:username:admin&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‹¿åˆ° UserID: &lt;code&gt;1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼ˆæ‰¾æ•°æ®ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶å†…éƒ¨è‡ªåŠ¨å¤ç”¨ &lt;code&gt;FindOne(1)&lt;/code&gt; çš„é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥ Redis &lt;code&gt;cache:user:id:1&lt;/code&gt; æ‹¿åˆ°è¯¦ç»†æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ&lt;/strong&gt;&lt;br&gt;
å¦‚æœåœ¨ &lt;code&gt;username&lt;/code&gt; çš„ç¼“å­˜é‡Œä¹Ÿå­˜ä¸€ä»½å®Œæ•´çš„ User æ•°æ®ï¼Œå½“ç”¨æˆ·ä¿®æ”¹æ˜µç§°æ—¶ï¼Œéœ€è¦åŒæ—¶æ›´æ–° &lt;code&gt;id:1&lt;/code&gt;ã€&lt;code&gt;username:admin&lt;/code&gt;ã€&lt;code&gt;phone:xxxx&lt;/code&gt; ç­‰å¤šä»½ç¼“å­˜ï¼Œææ˜“äº§ç”Ÿä¸ä¸€è‡´ã€‚&lt;br&gt;
ç°åœ¨çš„æ–¹æ¡ˆæ˜¯åªç»´æŠ¤ä¸»é”®ç¼“å­˜ï¼šåˆ é™¤ &lt;code&gt;id:1&lt;/code&gt; åï¼Œæ‰€æœ‰ç´¢å¼•æŸ¥è¯¢éƒ½ä¼šå›åˆ°ä¸»é”®ç¼“å­˜ï¼Œå¤©ç„¶ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-å†™å…¥ä¸æ›´æ–°æµç¨‹cache-aside-pattern&#34;&gt;3. å†™å…¥ä¸æ›´æ–°æµç¨‹ï¼šCache-Aside Pattern
&lt;/h2&gt;&lt;p&gt;go-zero ä¸¥æ ¼éµå¾ª &lt;strong&gt;æ—è·¯ç¼“å­˜ (Cache-Aside)&lt;/strong&gt; æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-ä»€ä¹ˆæ—¶å€™å†™å…¥ç¼“å­˜&#34;&gt;3.1 ä»€ä¹ˆæ—¶å€™å†™å…¥ç¼“å­˜ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;åªæœ‰åœ¨è¯»å–å¤±è´¥ï¼ˆCache Missï¼‰æ—¶æ‰å†™å…¥&lt;/strong&gt;ã€‚å³ &lt;code&gt;Lazy Load&lt;/code&gt;ï¼ˆæ‡’åŠ è½½ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶ä¸æ˜¯ update å®Œæ•°æ®åº“é©¬ä¸Šå†™ Redisã€‚&lt;/li&gt;
&lt;li&gt;è€Œæ˜¯ update å®Œåªåˆ ç¼“å­˜ã€‚ä¸‹æ¬¡è°æ¥è¯»ï¼Œè°è´Ÿè´£å»æŠŠæ•°æ®ä» MySQLâ€œæ¬è¿â€åˆ° Redisã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;32-æ›´æ–°åˆ é™¤æ—¶çš„è‡ªåŠ¨æ¸…ç†&#34;&gt;3.2 æ›´æ–°/åˆ é™¤æ—¶çš„â€œè‡ªåŠ¨æ¸…ç†â€
&lt;/h3&gt;&lt;p&gt;å½“ä½ è°ƒç”¨ &lt;code&gt;Update(user)&lt;/code&gt; æˆ– &lt;code&gt;Delete(id)&lt;/code&gt; æ—¶ï¼Œæ¡†æ¶åº•å±‚ï¼ˆ&lt;code&gt;sqlc.CachedConn&lt;/code&gt;ï¼‰ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// ä¼ªä»£ç é€»è¾‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;Delete&lt;/span&gt;(id &lt;span style=&#34;color:#8be9fd&#34;&gt;int64&lt;/span&gt;) &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 1. å…ˆæŸ¥å‡ºè€æ•°æ®ï¼ˆä¸ºäº†æ‹¿åˆ° usernameã€phone ç­‰ç´¢å¼•é”®ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    data, _ &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;FindOne&lt;/span&gt;(id)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 2. å‡†å¤‡æ‰€æœ‰ç›¸å…³çš„ Redis Keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    keys &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:id:1&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:username:admin&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:phone:138xxxx&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 3. æ‰§è¡Œæ•°æ®åº“æ“ä½œ + åˆ é™¤ç¼“å­˜&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _, err &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;Exec&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; DB.&lt;span style=&#34;color:#50fa7b&#34;&gt;Delete&lt;/span&gt;(id)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }, keys&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; err
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢æ˜¯ &lt;code&gt;github.com/zeromicro/go-zero@v1.9.4/core/stores/sqlc/cachedsql.go&lt;/code&gt; ä¸­çš„å…·ä½“ä»£ç ï¼Œ&lt;code&gt;ExecCtx&lt;/code&gt; æ˜¯ç”Ÿæˆçš„ model å±‚ä»£ç é‡Œæ‰§è¡Œæ•°æ®åº“æ“ä½œå¹¶åˆ é™¤ç¼“å­˜çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (cc CachedConn) &lt;span style=&#34;color:#50fa7b&#34;&gt;ExecCtx&lt;/span&gt;(ctx context.Context, exec ExecCtxFn, keys &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;) (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sql.Result, &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    res, err &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;exec&lt;/span&gt;(ctx, cc.db)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; err &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;, err
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; res, cc.&lt;span style=&#34;color:#50fa7b&#34;&gt;DelCacheCtx&lt;/span&gt;(ctx, keys&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ Redis é‡Œæœ‰ç¼“å­˜&lt;/strong&gt; -&amp;gt; &lt;code&gt;DEL&lt;/code&gt; å‘½ä»¤è¢«æ‰§è¡Œï¼Œç¼“å­˜è¢«æ¸…ç©ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ Redis é‡Œæ²¡ç¼“å­˜&lt;/strong&gt; -&amp;gt; &lt;code&gt;DEL&lt;/code&gt; å‘½ä»¤ä¾ç„¶è¢«æ‰§è¡Œï¼ˆè¿”å› 0ï¼‰ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-æ€»ç»“&#34;&gt;4. æ€»ç»“
&lt;/h2&gt;&lt;p&gt;go-zero çš„ç¼“å­˜æœºåˆ¶é€šè¿‡ &lt;strong&gt;Model ä»£ç ç”Ÿæˆ&lt;/strong&gt; å¸®æˆ‘ä»¬å±è”½äº†å¤æ‚çš„ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å½’ä¸€&lt;/strong&gt;ï¼šæ‰€æœ‰æ•°æ®å®ä½“åªå­˜ä¸€ä»½ï¼ˆåœ¨ ID ç¼“å­˜é‡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ˜ å°„&lt;/strong&gt;ï¼šå”¯ä¸€ç´¢å¼•åªå­˜ IDï¼Œé€šè¿‡ä¸¤æ¬¡æŸ¥æ‰¾è§£å†³é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§ä¿è¯&lt;/strong&gt;ï¼šä¿®æ”¹æ•°æ®åº“è‡ªåŠ¨çº§è”åˆ é™¤å¯¹åº”çš„æ‰€æœ‰ç¼“å­˜ Keyï¼ˆåŒ…æ‹¬ ID Key å’Œ Index Keysï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å¥—æœºåˆ¶ç®€å•ã€å¥å£®ï¼Œæ˜¯è§£å†³é«˜å¹¶å‘è¯»é—®é¢˜çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Golang slice ä¸ map åº•å±‚è¯¦è§£</title>
        <link>https://skylm808.github.io/p/golang-slice-%E4%B8%8E-map-%E5%BA%95%E5%B1%82%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Thu, 15 Jan 2026 16:39:08 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/golang-slice-%E4%B8%8E-map-%E5%BA%95%E5%B1%82%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h2 id=&#34;ä¸ºä»€ä¹ˆè¦ç†è§£-slice-å’Œ-map-çš„åº•å±‚&#34;&gt;ä¸ºä»€ä¹ˆè¦ç†è§£ slice å’Œ map çš„åº•å±‚
&lt;/h2&gt;&lt;p&gt;åœ¨ Go é‡Œï¼Œslice å’Œ map æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç±»å®¹å™¨ã€‚å®ƒä»¬çœ‹èµ·æ¥ç®€å•ï¼Œä½†å¾ˆå¤šæ€§èƒ½å·®å¼‚ã€å†…å­˜å ç”¨ã€å¹¶å‘é—®é¢˜éƒ½å’Œåº•å±‚å®ç°ç›¸å…³ã€‚æœ¬æ–‡ä»è¿è¡Œæ—¶è§†è§’è§£é‡Š slice ä¸ map çš„å†…å­˜å¸ƒå±€ã€æ‰©å®¹ç­–ç•¥ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åŸºäº Go 1.18+ çš„å®ç°æ€è·¯ï¼Œå…·ä½“ç»†èŠ‚å¯èƒ½éšç‰ˆæœ¬å¾®è°ƒï¼Œæ ¸å¿ƒæ¦‚å¿µä¿æŒç¨³å®šã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;slice-çš„åº•å±‚ç»“æ„&#34;&gt;slice çš„åº•å±‚ç»“æ„
&lt;/h2&gt;&lt;h3 id=&#34;1-slice-åªæ˜¯ä¸€ä¸ªæè¿°ç¬¦&#34;&gt;1) slice åªæ˜¯ä¸€ä¸ªâ€œæè¿°ç¬¦â€
&lt;/h3&gt;&lt;p&gt;slice æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒæŒ‡å‘ä¸€æ®µè¿ç»­æ•°ç»„ï¼Œå¹¶è®°å½•é•¿åº¦ä¸å®¹é‡ï¼ˆä¼ªä»£ç ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; slice &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    array unsafe.Pointer
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    len   &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    cap   &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;array&lt;/code&gt; æŒ‡å‘åº•å±‚æ•°ç»„é¦–å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;len&lt;/code&gt; è¡¨ç¤ºå½“å‰å¯ç”¨å…ƒç´ æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cap&lt;/code&gt; è¡¨ç¤ºåº•å±‚æ•°ç»„ä» &lt;code&gt;array&lt;/code&gt; èµ·å§‹è¿˜èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œslice çš„å¤åˆ¶æ˜¯â€œæµ…æ‹·è´â€ã€‚å¤šä¸ª slice å¯èƒ½å…±äº«åŒä¸€åº•å±‚æ•°ç»„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-nil-slice-ä¸-empty-slice&#34;&gt;2) nil slice ä¸ empty slice
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; s1 []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;          &lt;span style=&#34;color:#6272a4&#34;&gt;// nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s2 &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;{}         &lt;span style=&#34;color:#6272a4&#34;&gt;// empty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s3 &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;)  &lt;span style=&#34;color:#6272a4&#34;&gt;// empty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;s1 == nil&lt;/code&gt; ä¸º trueï¼Œ&lt;code&gt;len&lt;/code&gt; ä¸ &lt;code&gt;cap&lt;/code&gt; éƒ½ä¸º 0ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s2&lt;/code&gt;/&lt;code&gt;s3&lt;/code&gt; çš„ &lt;code&gt;len&lt;/code&gt;/&lt;code&gt;cap&lt;/code&gt; ä¸º 0ï¼Œä½† &lt;code&gt;s2 == nil&lt;/code&gt; ä¸º falseã€‚&lt;/li&gt;
&lt;li&gt;è®¿é—®/éå†è¡Œä¸ºä¸€è‡´ï¼Œä½†å¯¹ JSON ç¼–ç æˆ–åå°„ç»“æœå¯èƒ½ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-åˆ‡ç‰‡è¡¨è¾¾å¼ä¸å…±äº«å†…å­˜&#34;&gt;3) åˆ‡ç‰‡è¡¨è¾¾å¼ä¸å…±äº«å†…å­˜
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;a &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;{&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;5&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;b &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; a[&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;]    &lt;span style=&#34;color:#6272a4&#34;&gt;// [2,3]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;c &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; a[&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt;]  &lt;span style=&#34;color:#6272a4&#34;&gt;// len=2, cap=3 (cap = max - low)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;b&lt;/code&gt; ä¸ &lt;code&gt;a&lt;/code&gt; å…±äº«åº•å±‚æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[low:high:max]&lt;/code&gt; å¯ä»¥æ˜¾å¼é™åˆ¶æ–° slice çš„ &lt;code&gt;cap&lt;/code&gt;ï¼Œé¿å…åç»­ &lt;code&gt;append&lt;/code&gt; å½±å“åˆ°åŸæ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;é‡æ–°åˆ‡ç‰‡ä¸ä¼šæ‹·è´æ•°æ®ï¼Œåªä¼šåˆ›å»ºæ–°çš„ slice å¤´éƒ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-append-çš„æ‰©å®¹ç­–ç•¥&#34;&gt;4) append çš„æ‰©å®¹ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;append&lt;/code&gt; çš„è¡Œä¸ºå–å†³äº &lt;code&gt;cap&lt;/code&gt; æ˜¯å¦å¤Ÿç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;len+appendLen &amp;lt;= cap&lt;/code&gt;ï¼Œç›´æ¥åœ¨åŸæ•°ç»„ä¸Šè¿½åŠ ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™åˆ†é…æ–°æ•°ç»„å¹¶æ‹·è´æ—§æ•°æ®ï¼Œå†è¿½åŠ æ–°å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰©å®¹ç­–ç•¥å¤§è‡´ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°å®¹é‡æ—¶æŒ‰ 2 å€å¢é•¿ã€‚&lt;/li&gt;
&lt;li&gt;å¤§å®¹é‡æ—¶æŒ‰ ~1.25 å€å¢é•¿ï¼ˆå…·ä½“é˜ˆå€¼ä¸ç®—æ³•å¯èƒ½éšç‰ˆæœ¬å˜åŒ–ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ„å‘³ç€é¢‘ç¹å°æ­¥ &lt;code&gt;append&lt;/code&gt; ä¼šäº§ç”Ÿå¤šæ¬¡æ‰©å®¹å’Œæ‹·è´ã€‚å¯ç”¨ &lt;code&gt;make([]T, 0, n)&lt;/code&gt; è¿›è¡Œé¢„åˆ†é…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-å†…å­˜æ»ç•™ä¸åˆ‡ç‰‡æ³„æ¼&#34;&gt;5) å†…å­˜æ»ç•™ä¸â€œåˆ‡ç‰‡æ³„æ¼â€
&lt;/h3&gt;&lt;p&gt;å½“ä½ ä»ä¸€ä¸ªå¾ˆå¤§çš„ slice ä¸Šåˆ‡ä¸€å°æ®µæ—¶ï¼Œåº•å±‚æ•°ç»„ä¾ç„¶è¢«å¼•ç”¨ï¼Œå¯¼è‡´å¤§å—å†…å­˜æ— æ³•å›æ”¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;big &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;byte&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;20&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; big[:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶å³ä½¿ &lt;code&gt;small&lt;/code&gt; çš„ &lt;code&gt;len&lt;/code&gt; å¾ˆå°ï¼Œåº•å±‚æ•°ç»„ä»è¢« &lt;code&gt;cap&lt;/code&gt; å¼•ç”¨ã€‚è§£å†³æ–¹å¼æ˜¯æ˜¾å¼æ‹·è´ä¸€ä»½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small = &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;append&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;byte&lt;/span&gt;(&lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;), small&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ · &lt;code&gt;small&lt;/code&gt; åªä¿ç•™éœ€è¦çš„é‚£æ®µæ•°æ®ã€‚è‹¥åªæ˜¯ä¸ºäº†é¿å…åç»­ &lt;code&gt;append&lt;/code&gt; æ±¡æŸ“åŸæ•°ç»„ï¼Œå¯ç”¨ &lt;code&gt;full slice&lt;/code&gt; é™åˆ¶å®¹é‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; big[:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šé™åˆ¶ &lt;code&gt;cap&lt;/code&gt; å¹¶ä¸èƒ½é‡Šæ”¾å¤§æ•°ç»„æœ¬èº«ï¼ŒçœŸæ­£é‡Šæ”¾ä»éœ€æ‹·è´æˆ–è®©åŸ slice å¤±å»å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;6-åˆ‡ç‰‡å†…æŒ‡é’ˆæœªé‡Šæ”¾&#34;&gt;6) åˆ‡ç‰‡å†…æŒ‡é’ˆæœªé‡Šæ”¾
&lt;/h3&gt;&lt;p&gt;å½“ slice å…ƒç´ æ˜¯æŒ‡é’ˆï¼Œæˆ–å…ƒç´ åŒ…å«æŒ‡é’ˆå­—æ®µæ—¶ï¼Œå³ä½¿ä½ â€œç¼©çŸ­â€äº† sliceï¼Œåº•å±‚æ•°ç»„ä¸­å°¾éƒ¨çš„æ—§æŒ‡é’ˆä»ä¼šè¢« GC æ‰«æï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•å›æ”¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; Node &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Next &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Node
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Node, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;1024&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// ... append äº†ä¸€å †å…ƒç´ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#6272a4&#34;&gt;// å°¾éƒ¨ä»ä¿ç•™æ—§æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­£ç¡®åšæ³•æ˜¯æ˜¾å¼æ¸…ç†å¼•ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;range&lt;/span&gt; s {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    s[i] = &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ é™¤å…ƒç´ æ—¶ä¹Ÿè¦æ¸…æ‰å°¾éƒ¨å¼•ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;copy&lt;/span&gt;(s[i:], s[i&lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s[&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;len&lt;/span&gt;(s)&lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;] = &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;len&lt;/span&gt;(s)&lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœå…ƒç´ æ˜¯åŒ…å«æŒ‡é’ˆçš„ç»“æ„ä½“ï¼Œå¯ç”¨é›¶å€¼æ¸…ç†ï¼š&lt;code&gt;var zero T; s[i] = zero&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;7-copy-ä¸-append-çš„è¯­ä¹‰&#34;&gt;7) copy ä¸ append çš„è¯­ä¹‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;copy(dst, src)&lt;/code&gt; ä¼šæŒ‰å…ƒç´ é¡ºåºæ‹·è´ï¼Œå…è®¸å†…å­˜é‡å ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;append(dst, src...)&lt;/code&gt; ä¼šæŠŠ &lt;code&gt;src&lt;/code&gt; å±•å¼€æˆå…ƒç´ ï¼Œå†è¿½åŠ åˆ° &lt;code&gt;dst&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ &lt;code&gt;dst&lt;/code&gt; å’Œ &lt;code&gt;src&lt;/code&gt; å…±äº«åº•å±‚æ•°ç»„æ—¶ï¼Œ&lt;code&gt;append&lt;/code&gt; å¯èƒ½è§¦å‘æ‰©å®¹ï¼Œä»è€Œå¾—åˆ°æ–°çš„æ•°ç»„ï¼›æ‰€ä»¥è¡Œä¸ºä¾èµ–å®¹é‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;map-çš„åº•å±‚ç»“æ„&#34;&gt;map çš„åº•å±‚ç»“æ„
&lt;/h2&gt;&lt;h3 id=&#34;1-map-æ˜¯å“ˆå¸Œè¡¨&#34;&gt;1) map æ˜¯å“ˆå¸Œè¡¨
&lt;/h3&gt;&lt;p&gt;Go çš„ map åº•å±‚æ˜¯å“ˆå¸Œè¡¨ç»“æ„ï¼Œæ ¸å¿ƒæ˜¯ &lt;code&gt;hmap&lt;/code&gt;ï¼ˆä¼ªç»“æ„ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; hmap &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    count     &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;           &lt;span style=&#34;color:#ff79c6&#34;&gt;//å½“å‰mapä¸­å·²ç»å­˜å‚¨é”®å€¼å¯¹çš„æ€»æ•°é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    B         &lt;span style=&#34;color:#8be9fd&#34;&gt;uint8&lt;/span&gt;        &lt;span style=&#34;color:#6272a4&#34;&gt;// æ¡¶æ•° = 2^B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    buckets   unsafe.Pointer  &lt;span style=&#34;color:#ff79c6&#34;&gt;//ä¸»æ¡¶æ•°ç»„æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    oldbuckets unsafe.Pointer    &lt;span style=&#34;color:#ff79c6&#34;&gt;//æ—§æ¡¶æ•°ç»„æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    nevacuate &lt;span style=&#34;color:#8be9fd&#34;&gt;uintptr&lt;/span&gt;            &lt;span style=&#34;color:#ff79c6&#34;&gt;//ä¸‹ä¸€ä¸ªè¦æ¬è¿çš„æ¡¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    hash0     &lt;span style=&#34;color:#8be9fd&#34;&gt;uint32&lt;/span&gt;            &lt;span style=&#34;color:#ff79c6&#34;&gt;//å“ˆå¸Œç§å­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;buckets&lt;/code&gt; æŒ‡å‘æ¡¶æ•°ç»„ï¼ˆbucketï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ª bucket å›ºå®šå®¹çº³ 8 ä¸ª key/valueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;oldbuckets&lt;/code&gt; ç”¨äºæ‰©å®¹è¿‡ç¨‹ä¸­çš„æ¸è¿›å¼æ¬è¿ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœå®ƒæ˜¯ nilï¼šè¯´æ˜ map å½“å‰å¤„äºæ­£å¸¸çŠ¶æ€ï¼Œæ²¡æœ‰åœ¨æ‰©å®¹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå®ƒé nilï¼šè¯´æ˜ map æ­£å¤„äºâ€œæ¸è¿›å¼æ‰©å®¹â€çš„è¿‡ç¨‹ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hash0&lt;/code&gt; æ˜¯éšæœºç§å­ï¼Œç”¨äºé˜²æ­¢ hash ç¢°æ’æ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-makemap--å»ºå‚ä¸åŸºç¡€è®¾æ–½æ­å»º&#34;&gt;2) make(map) â€”â€” å»ºå‚ä¸åŸºç¡€è®¾æ–½æ­å»º
&lt;/h3&gt;&lt;p&gt;ä»¥ &lt;code&gt;m := make(map[string]int, 10)&lt;/code&gt; ä¸ºä¾‹ï¼Œè¿è¡Œæ—¶ä¼šåšä¸€ç³»åˆ—åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€é˜¶æ®µï¼šç®—æ¡¶æ•°é‡ï¼ˆBï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è´Ÿè½½å› å­çº¦ä¸º 6.5ï¼Œæ¯ä¸ªæ¡¶å›ºå®š 8 ä¸ªæ§½ä½ï¼Œä½†ä¸å…è®¸æ»¡è½½è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ® &lt;code&gt;hint&lt;/code&gt; ä¼°ç®—æ¡¶æ•°ï¼Œé€‰æ‹©æœ€å°çš„ &lt;code&gt;B&lt;/code&gt; ä½¿å¾— &lt;code&gt;2^B &amp;gt;= hint / 6.5&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ &lt;code&gt;hint=10&lt;/code&gt;ï¼Œé€šå¸¸éœ€è¦ &lt;code&gt;B=1&lt;/code&gt;ï¼ˆ2 ä¸ªæ¡¶ï¼Œ16 ä¸ªæ§½ä½ï¼‰ï¼Œå®é™…ä¼šç•¥å‘ä¸Šå–æ•´ä»¥ç•™ä½™é‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šåˆå§‹åŒ– &lt;code&gt;hmap&lt;/code&gt; å¤´éƒ¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨å †ä¸Šåˆ†é… &lt;code&gt;hmap&lt;/code&gt;ï¼Œ&lt;code&gt;count=0&lt;/code&gt;ã€&lt;code&gt;B&lt;/code&gt; å†™å…¥ã€å…¶ä½™å­—æ®µæ¸…é›¶ã€‚&lt;/li&gt;
&lt;li&gt;è®¾ç½® &lt;code&gt;hash0&lt;/code&gt; éšæœºç§å­ï¼Œé˜²æ­¢å“ˆå¸Œç¢°æ’æ”»å‡»ï¼ˆæ¯æ¬¡è¿›ç¨‹å¯åŠ¨éƒ½ä¸åŒï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬ä¸‰é˜¶æ®µï¼šåˆ†é…æ¡¶æ•°ç»„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è‹¥ &lt;code&gt;hint &amp;gt; 0&lt;/code&gt;ï¼Œé€šå¸¸ä¼šç›´æ¥åˆ†é…æ¡¶æ•°ç»„ï¼ˆè¿ç»­å†…å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;hint&lt;/code&gt; å¾ˆå°æˆ–ä¸º 0ï¼Œæ¡¶æ•°ç»„å¯èƒ½å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡å†™å…¥æ‰åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;å½“ key/elem éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œä¼šåˆå§‹åŒ– &lt;code&gt;mapextra&lt;/code&gt; ç”¨äºè·Ÿè¸ª overflow bucketï¼Œé¿å…è¢« GC è¯¯å›æ”¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;hint&lt;/code&gt; åªæ˜¯å®¹é‡å»ºè®®ï¼Œä¸æ˜¯ç¡¬ä¸Šé™ï¼Œè¶…è¿‡åä¼šè§¦å‘æ‰©å®¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-bucket-çš„å¸ƒå±€&#34;&gt;3) bucket çš„å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ª bucket é‡ŒåŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tophash[8]&lt;/code&gt;ï¼šhash é«˜ä½çš„ 8 ä¸ªæ ‡è®°ï¼Œç”¨äºå¿«é€Ÿè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;keys[8]&lt;/code&gt; ä¸ &lt;code&gt;values[8]&lt;/code&gt;ï¼šçœŸæ­£çš„ key/valueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;overflow&lt;/code&gt; æŒ‡é’ˆï¼šå½“ bucket æ»¡äº†ï¼Œé“¾æ¥é¢å¤– bucketã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§â€œåˆ†ç¦»æ¡¶ + æº¢å‡ºé“¾â€çš„è®¾è®¡ï¼Œå…¼é¡¾äº†å±€éƒ¨æ€§ä¸æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;4-å†™å…¥è¯»å–æ—¶çš„å“ˆå¸Œæµç¨‹ä»¥-mhello--10086-ä¸ºä¾‹&#34;&gt;4) å†™å…¥/è¯»å–æ—¶çš„å“ˆå¸Œæµç¨‹ï¼ˆä»¥ m[&amp;ldquo;hello&amp;rdquo;] = 10086 ä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šç²¾å¯†çš„å­˜å‚¨è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;Step 1: è®¡ç®—å“ˆå¸Œå€¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒç”¨å“ˆå¸Œå‡½æ•°ï¼ˆä¾‹å¦‚ aeshash/memhashï¼‰ï¼Œç»“åˆ &lt;code&gt;h.hash0&lt;/code&gt; ç§å­ä¸ key å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;å¾—åˆ°ä¸€ä¸ª 64 ä½ hashã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 2: ä½ B ä½å®šä½æ¡¶ï¼ˆbucketIndexï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¡ç®— &lt;code&gt;bucketIndex = hash &amp;amp; ((1&amp;lt;&amp;lt;B) - 1)&lt;/code&gt;ï¼Œç”¨ä½ B ä½å†³å®šå»å“ªä¸ªæ¡¶ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æ­£åœ¨æ‰©å®¹ï¼Œå…ˆè§¦å‘ &lt;code&gt;growWork&lt;/code&gt; æ¬è¿å¯¹åº”æ—§æ¡¶ï¼Œå†å®šä½æ–°æ¡¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 3: è®¡ç®— tophashï¼ˆé«˜ 8 ä½æŒ‡çº¹ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å– &lt;code&gt;tophash = hash &amp;gt;&amp;gt; (wordbits - 8)&lt;/code&gt; ä½œä¸ºæŒ‡çº¹ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;tophash &amp;lt; minTopHash(5)&lt;/code&gt;ï¼Œåˆ™åŠ ä¸Šåç§»ï¼Œä½¿å…¶è½åœ¨ 5..255 èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;0..4 é¢„ç•™ç”¨äºç©ºæ§½ä¸æ¬è¿çŠ¶æ€æ ‡è®°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 4: æ‰«ææ¡¶ä¸æº¢å‡ºæ¡¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éå†å½“å‰æ¡¶çš„ 8 ä¸ªæ§½ä½ï¼Œå¿…è¦æ—¶éå† overflow bucketã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tophash&lt;/code&gt; ä¸åŒ¹é…ç›´æ¥è·³è¿‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tophash&lt;/code&gt; åŒ¹é…åå†æ¯”è¾ƒçœŸå® keyï¼ˆå¯èƒ½å“ˆå¸Œå†²çªï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®°å½•é‡åˆ°çš„ç¬¬ä¸€ä¸ªç©ºæ§½ä½ï¼ˆæ’å…¥å€™é€‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥å‘½ä¸­åŒ keyï¼Œç›´æ¥è¦†ç›– value å¹¶è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥é‡åˆ° &lt;code&gt;emptyRest&lt;/code&gt;ï¼Œè¯´æ˜åé¢å…¨ç©ºï¼Œå¯æå‰ç»“æŸæ‰«æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 5: æ’å…¥æˆ–æ‰©å®¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥æœªæ‰¾åˆ° keyï¼šæ£€æŸ¥ &lt;code&gt;count+1&lt;/code&gt; æ˜¯å¦è¶…è¿‡è´Ÿè½½å› å­ï¼Œæˆ– overflow è¿‡å¤šã€‚&lt;/li&gt;
&lt;li&gt;è‹¥è§¦å‘æ‰©å®¹ï¼Œå…ˆ grow å†é‡æ–°èµ°ä¸€éæµç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ä½¿ç”¨ç©ºæ§½ä½å†™å…¥ï¼š&lt;code&gt;tophash&lt;/code&gt;ã€keyã€valueã€‚&lt;/li&gt;
&lt;li&gt;è‹¥å½“å‰æ¡¶å·²æ»¡ä¸”æ²¡æœ‰ç©ºæ§½ï¼Œç”³è¯· overflow bucket å¹¶æ’å…¥ã€‚&lt;/li&gt;
&lt;li&gt;å†™å…¥å &lt;code&gt;count++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯»æµç¨‹ä¸å†™æµç¨‹ç±»ä¼¼ï¼Œä½†ä¸ä¼šåˆ›å»ºæ–°æ¡¶æˆ–æ–°æ§½ï¼Œæ‰¾ä¸åˆ° key å°±è¿”å›é›¶å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¹³å‡å¤æ‚åº¦ä¸º O(1)ï¼Œç¢°æ’æˆ–æº¢å‡ºé“¾è¿‡é•¿æ—¶ä¼šé€€åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;h3 id=&#34;5-æ‰©å®¹ä¸æ¸è¿›å¼è¿ç§»&#34;&gt;5) æ‰©å®¹ä¸æ¸è¿›å¼è¿ç§»
&lt;/h3&gt;&lt;p&gt;map çš„æ‰©å®¹ä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆï¼Œè€Œæ˜¯æ’å…¥/è®¿é—®æ—¶é€æ­¥â€œæ¬è¿â€ bucketï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;oldbuckets&lt;/code&gt; ä¿å­˜æ—§è¡¨ï¼Œ&lt;code&gt;nevacuate&lt;/code&gt; è®°å½•æ¬è¿è¿›åº¦ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ map æ“ä½œä¼šé¡ºå¸¦æ¬è¿å°‘é‡æ¡¶ï¼Œæ‘Šè–„æš‚åœæ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-æ‰©å®¹çš„ä¸¤ç§å½¢å¼&#34;&gt;6) æ‰©å®¹çš„ä¸¤ç§å½¢å¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¿»å€æ‰©å®¹ï¼ˆB+1ï¼‰&lt;/strong&gt;&lt;br&gt;
å½“è´Ÿè½½å› å­è¿‡é«˜ï¼ˆçº¦ 6.5 ä¸ªå…ƒç´ /æ¡¶ï¼‰è§¦å‘ï¼Œæ¡¶æ•°é‡ç¿»å€ï¼Œå‡å°‘å†²çªã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç­‰é‡æ‰©å®¹ï¼ˆsame-size growï¼‰&lt;/strong&gt;&lt;br&gt;
å½“ overflow bucket è¿‡å¤šæ—¶è§¦å‘ï¼Œæ¡¶æ•°é‡ä¸å˜ï¼Œä½†é‡æ–°åˆ†å¸ƒå…ƒç´ ï¼Œç¼©çŸ­æº¢å‡ºé“¾ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;7-åˆ é™¤ä¸å†…å­˜æ”¶ç¼©&#34;&gt;7) åˆ é™¤ä¸å†…å­˜æ”¶ç¼©
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;delete(m, key)&lt;/code&gt; ä¼šæ¸…æ‰ key/valueï¼Œä½† map é€šå¸¸ä¸ä¼šè‡ªåŠ¨ç¼©å®¹ã€‚å¤§é‡åˆ é™¤åï¼Œmap å¯èƒ½ä»å ç”¨è¾ƒå¤§å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;é‡Šæ”¾å†…å­˜çš„å¸¸è§åŠæ³•æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ–° map å¹¶æ‹·è´éœ€è¦çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;8-nil-map-ä¸å¹¶å‘å®‰å…¨&#34;&gt;8) nil map ä¸å¹¶å‘å®‰å…¨
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; m &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#6272a4&#34;&gt;// nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;è¯»å– &lt;code&gt;m[key]&lt;/code&gt; è¿”å›é›¶å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å†™å…¥ä¼š panicï¼š&lt;code&gt;assignment to entry in nil map&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;map ä¸æ˜¯å¹¶å‘å®‰å…¨ç»“æ„ï¼Œå¤šä¸ª goroutine å¹¶å‘å†™ä¼šè§¦å‘è¿è¡Œæ—¶å´©æºƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹¶å‘åœºæ™¯å¯ç”¨ &lt;code&gt;sync.Mutex&lt;/code&gt; ä¿æŠ¤æˆ–ä½¿ç”¨ &lt;code&gt;sync.Map&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;9-go-ç‰ˆæœ¬å·®å¼‚æç¤º&#34;&gt;9) Go ç‰ˆæœ¬å·®å¼‚æç¤º
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æœ¬æ–‡ä»¥ Go 1.18+ çš„ &lt;code&gt;hmap/bucket&lt;/code&gt; ç»“æ„ä¸ºå‚è€ƒï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½åœ¨å­—æ®µå¸ƒå±€å’Œå¸¸é‡ä¸Šæœ‰å¾®è°ƒã€‚&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œå‡½æ•°å®ç°ä¼šéšç‰ˆæœ¬ä¸ CPU ç‰¹æ€§è°ƒæ•´ï¼ˆä¾‹å¦‚ aeshash/memhashï¼‰ï¼Œä½†æ•´ä½“æµç¨‹ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æ‰©å®¹é˜ˆå€¼ä¸ same-size grow çš„è§¦å‘æ¡ä»¶å¯èƒ½ä¼šåœ¨ç‰ˆæœ¬é—´å°å¹…è°ƒå‚ï¼Œç»†èŠ‚ä»¥ &lt;code&gt;GOROOT/src/runtime/map.go&lt;/code&gt; ä¸ºå‡†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;slice-vs-map-çš„å…³é”®å¯¹æ¯”&#34;&gt;slice vs map çš„å…³é”®å¯¹æ¯”
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»´åº¦&lt;/th&gt;
          &lt;th&gt;slice&lt;/th&gt;
          &lt;th&gt;map&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;åº•å±‚ç»“æ„&lt;/td&gt;
          &lt;td&gt;è¿ç»­æ•°ç»„ + å¤´éƒ¨æè¿°ç¬¦&lt;/td&gt;
          &lt;td&gt;å“ˆå¸Œè¡¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è®¿é—®å¤æ‚åº¦&lt;/td&gt;
          &lt;td&gt;O(1) é€šè¿‡ç´¢å¼•&lt;/td&gt;
          &lt;td&gt;O(1) å¹³å‡ï¼Œé€šè¿‡ key&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å†…å­˜å±€éƒ¨æ€§&lt;/td&gt;
          &lt;td&gt;å¾ˆå¥½&lt;/td&gt;
          &lt;td&gt;ä¸€èˆ¬&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;é€‚ç”¨åœºæ™¯&lt;/td&gt;
          &lt;td&gt;é¡ºåºæ•°æ®ã€å¯ç´¢å¼•&lt;/td&gt;
          &lt;td&gt;æ— åºæŸ¥æ‰¾ã€å»é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ‰©å®¹ä»£ä»·&lt;/td&gt;
          &lt;td&gt;æ‹·è´æ•°ç»„&lt;/td&gt;
          &lt;td&gt;æ¸è¿›å¼ rehash&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ&#34;&gt;å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢„åˆ†é…å®¹é‡&lt;/strong&gt;&lt;br&gt;
é¢„ä¼°é•¿åº¦æ—¶ä½¿ç”¨ &lt;code&gt;make([]T, 0, n)&lt;/code&gt; æˆ– &lt;code&gt;make(map[K]V, n)&lt;/code&gt;ï¼Œå‡å°‘æ‰©å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…å…±äº«åº•å±‚æ•°ç»„å¼•å‘çš„å‰¯ä½œç”¨&lt;/strong&gt;&lt;br&gt;
ä¸ç¡®å®šæ˜¯å¦å…±äº«æ—¶ï¼Œå¯ &lt;code&gt;copy&lt;/code&gt;/&lt;code&gt;append&lt;/code&gt; ç”Ÿæˆæ–° sliceã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;map è¿­ä»£é¡ºåºä¸ç¨³å®š&lt;/strong&gt;&lt;br&gt;
Go åˆ»æ„éšæœºåŒ–éå†é¡ºåºï¼Œä¸èƒ½ä¾èµ–é¡ºåºé€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…å¤„ç†å¤§å¯¹è±¡åˆ‡ç‰‡ä¸æŒ‡é’ˆæ®‹ç•™&lt;/strong&gt;&lt;br&gt;
åˆ‡å° slice æ—¶æ³¨æ„åº•å±‚æ•°ç»„å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ»ç•™ï¼›åˆ é™¤/ç¼©çŸ­æ—¶å¯¹æŒ‡é’ˆå…ƒç´ æ¸…é›¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘å†™ map å¿…é¡»åŠ é”&lt;/strong&gt;&lt;br&gt;
è¯»å†™æ··ç”¨ä¹Ÿéœ€è¦åŒæ­¥ï¼Œé¿å…è¿è¡Œæ—¶å´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­
&lt;/h2&gt;&lt;p&gt;ç†è§£ slice ä¸ map çš„åº•å±‚å®ç°ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨æ€§èƒ½è°ƒä¼˜ã€å†…å­˜æ§åˆ¶å’Œå¹¶å‘å®‰å…¨æ–¹é¢åšå‡ºæ›´å¯é çš„é€‰æ‹©ã€‚å†™ Go æ—¶ä¸å¿…å¤„å¤„å¾®ä¼˜åŒ–ï¼Œä½†çŸ¥é“â€œå®ƒä¸ºä»€ä¹ˆæ…¢â€æˆ–â€œä¸ºä»€ä¹ˆå å†…å­˜â€ï¼Œå°±èƒ½æ›´å¿«å®šä½é—®é¢˜ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é“¾è¡¨åè½¬ï¼šå¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«</title>
        <link>https://skylm808.github.io/p/%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC%E5%A4%B4%E6%8F%92%E6%B3%95%E4%B8%8E%E5%8F%8C%E6%8C%87%E9%92%88%E8%BF%AD%E4%BB%A3%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
        <pubDate>Mon, 08 Dec 2025 10:35:20 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC%E5%A4%B4%E6%8F%92%E6%B3%95%E4%B8%8E%E5%8F%8C%E6%8C%87%E9%92%88%E8%BF%AD%E4%BB%A3%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
        <description>&lt;h1 id=&#34;é“¾è¡¨åè½¬å¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«&#34;&gt;é“¾è¡¨åè½¬ï¼šå¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«
&lt;/h1&gt;&lt;p&gt;é“¾è¡¨åè½¬æ˜¯ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸¤ç§å¸¸è§çš„æ–¹æ³•ï¼šå¤´æ’æ³•å’ŒåŒæŒ‡é’ˆè¿­ä»£æ³•ã€‚æœ¬æ–‡å°†è®¨è®ºå®ƒä»¬çš„åŒºåˆ«ï¼Œå¹¶é™„ä¸Šæ ¸å¿ƒä»£ç ç¤ºä¾‹ï¼ˆä½¿ç”¨Goï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤´æ’æ³•&#34;&gt;å¤´æ’æ³•
&lt;/h2&gt;&lt;p&gt;å¤´æ’æ³•é€šè¿‡ä¸æ–­å°†åŸé“¾è¡¨çš„èŠ‚ç‚¹æ’å…¥åˆ°ä¸€ä¸ªæ–°é“¾è¡¨çš„å¤´éƒ¨æ¥å®ç°åè½¬ã€‚è¿™ç§æ–¹æ³•éœ€è¦ä¸€ä¸ªè¾…åŠ©é“¾è¡¨å¤´éƒ¨ã€‚æ¯”å¦‚åŠ›æ‰£ä¸­çš„ 92. &lt;a class=&#34;link&#34; href=&#34;https://leetcode.cn/problems/reverse-linked-list-ii/description/?envType=study-plan-v2&amp;amp;envId=top-interview-150&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åè½¬é“¾è¡¨ II&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–ä¸€ä¸ªæ–°å¤´èŠ‚ç‚¹ï¼ˆdummyï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éå†åŸé“¾è¡¨ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹æ’å…¥åˆ°æ–°å¤´èŠ‚ç‚¹çš„åé¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä»£ç &#34;&gt;æ ¸å¿ƒä»£ç 
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; ListNode &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Val  &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Next &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// å¤´æ’æ³•ï¼šåˆ©ç”¨ dummy å¤´æ„å»ºæ–°é“¾è¡¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;reverseList&lt;/span&gt;(head &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    dummy &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;ListNode{}   &lt;span style=&#34;color:#6272a4&#34;&gt;// æ–°é“¾è¡¨çš„è™šæ‹Ÿå¤´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; head &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        next &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; head.Next         &lt;span style=&#34;color:#6272a4&#34;&gt;// å…ˆä¿å­˜åç»§&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        head.Next = dummy.Next    &lt;span style=&#34;color:#6272a4&#34;&gt;// æ’åˆ° dummy åé¢&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        dummy.Next = head
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        head = next
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; dummy.Next
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åŒæŒ‡é’ˆè¿­ä»£æ³•&#34;&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•
&lt;/h2&gt;&lt;p&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼ˆprev å’Œ currï¼‰æ¥åè½¬é“¾è¡¨çš„æŒ‡å‘ã€‚æ¯”å¦‚åŠ›æ‰£ä¸­çš„ 25. &lt;a class=&#34;link&#34; href=&#34;https://leetcode.cn/problems/reverse-nodes-in-k-group/description/?envType=study-plan-v2&amp;amp;envId=top-interview-150&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ– prev ä¸º nilï¼Œcurr ä¸º headã€‚&lt;/li&gt;
&lt;li&gt;éå†é“¾è¡¨ï¼Œæ”¹å˜ curr çš„ next æŒ‡å‘ prevï¼Œç„¶åç§»åŠ¨æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä»£ç -1&#34;&gt;æ ¸å¿ƒä»£ç 
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// åŒæŒ‡é’ˆè¿­ä»£æ³•ï¼šåŸåœ°åè½¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;reverseList&lt;/span&gt;(head &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; prev &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    cur &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; head
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; cur &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        next &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; cur.Next   &lt;span style=&#34;color:#6272a4&#34;&gt;// ä¿å­˜åç»§&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        cur.Next = prev    &lt;span style=&#34;color:#6272a4&#34;&gt;// ç¿»è½¬æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        prev = cur         &lt;span style=&#34;color:#6272a4&#34;&gt;// prev å‰è¿›&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        cur = next         &lt;span style=&#34;color:#6272a4&#34;&gt;// cur å‰è¿›&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; prev
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åŒºåˆ«&#34;&gt;åŒºåˆ«
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤´æ’æ³•&lt;/strong&gt;ï¼šç±»ä¼¼äºæ„å»ºä¸€ä¸ªæ–°é“¾è¡¨ï¼Œé€‚åˆéœ€è¦å¤åˆ¶æˆ–é¢å¤–ç©ºé—´çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•&lt;/strong&gt;ï¼šåŸåœ°åè½¬ï¼Œä¸éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¤ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å»ºåšå®¢æˆåŠŸï¼</title>
        <link>https://skylm808.github.io/p/%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%88%90%E5%8A%9F/</link>
        <pubDate>Tue, 22 Jul 2025 17:09:54 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%88%90%E5%8A%9F/</guid>
        <description>&lt;h2 id=&#34;-å»ºåšå®¢æˆåŠŸ&#34;&gt;ğŸ‰ å»ºåšå®¢æˆåŠŸï¼
&lt;/h2&gt;&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„æŠ€æœ¯åšå®¢ï¼è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ ‡å¿—ç€æˆ‘æ­£å¼å¼€å§‹äº†æŠ€æœ¯å†™ä½œä¹‹æ—…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³äºè¿™ä¸ªåšå®¢&#34;&gt;å…³äºè¿™ä¸ªåšå®¢
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªåšå®¢ä¸»è¦ç”¨æ¥åˆ†äº«æˆ‘åœ¨ç¼–ç¨‹å­¦ä¹ å’Œå·¥ä½œä¸­çš„å¿ƒå¾—ä½“ä¼šï¼Œä¸»è¦ä¼šæ¶‰åŠä»¥ä¸‹æŠ€æœ¯é¢†åŸŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç¨‹è¯­è¨€&lt;/strong&gt;: Java, Go, C++, Python&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•ä¸æ•°æ®ç»“æ„&lt;/strong&gt;: ç®—æ³•é¢˜è§£ã€æ•°æ®ç»“æ„åˆ†æ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯æ€»ç»“&lt;/strong&gt;: é¡¹ç›®ç»éªŒã€æŠ€æœ¯éš¾ç‚¹è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­¦ä¹ ç¬”è®°&lt;/strong&gt;: æ–°æŠ€æœ¯å­¦ä¹ è®°å½•&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœªæ¥è®¡åˆ’&#34;&gt;æœªæ¥è®¡åˆ’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒç»­æ›´æ–°æŠ€æœ¯æ–‡ç« &lt;/li&gt;
&lt;li&gt;åˆ†äº«å®é™…é¡¹ç›®ç»éªŒ&lt;/li&gt;
&lt;li&gt;è®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„æ€è€ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœŸå¾…ä¸å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ï¼ ğŸš€&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
