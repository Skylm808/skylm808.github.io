<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Skylm</title>
        <link>https://skylm808.github.io/</link>
        <description>Recent content on Skylm</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Skylm</copyright>
        <lastBuildDate>Mon, 02 Feb 2026 19:35:29 +0800</lastBuildDate><atom:link href="https://skylm808.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Mysql æ—¥å¿—è¯¦è§£</title>
        <link>https://skylm808.github.io/p/mysql-%E6%97%A5%E5%BF%97%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Mon, 02 Feb 2026 19:35:29 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/mysql-%E6%97%A5%E5%BF%97%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h1 id=&#34;mysql-æ—¥å¿—ä½“ç³»è¯¦è§£&#34;&gt;MySQL æ—¥å¿—ä½“ç³»è¯¦è§£
&lt;/h1&gt;&lt;p&gt;MySQL çš„æ—¥å¿—ä½“ç³»æ˜¯æ•°æ®åº“å®ç°&lt;strong&gt;æ•°æ®æ¢å¤&lt;/strong&gt;ã€&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;ã€&lt;strong&gt;é«˜å¹¶å‘ï¼ˆMVCCï¼‰&lt;strong&gt;åŠ&lt;/strong&gt;æ•…éšœæ’æŸ¥&lt;/strong&gt;çš„æ ¸å¿ƒåŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;æ—¥å¿—ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Server å±‚æ—¥å¿—&lt;/strong&gt;ï¼šMySQL æœåŠ¡å±‚äº§ç”Ÿï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“é€šç”¨ï¼ˆBinlog, Error Log, Slow Query Logï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•æ“å±‚æ—¥å¿—&lt;/strong&gt;ï¼šç‰¹å®šå­˜å‚¨å¼•æ“äº§ç”Ÿï¼ˆInnoDB çš„ Redo Log, Undo Logï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-æ ¸å¿ƒæ—¥å¿—è¯¦è§£&#34;&gt;1. æ ¸å¿ƒæ—¥å¿—è¯¦è§£
&lt;/h2&gt;&lt;h3 id=&#34;11-äºŒè¿›åˆ¶æ—¥å¿—-binlog&#34;&gt;1.1 äºŒè¿›åˆ¶æ—¥å¿— (Binlog)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½’å±&lt;/strong&gt;ï¼šServer å±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§è´¨&lt;/strong&gt;ï¼šé€»è¾‘æ—¥å¿—ï¼ˆè®°å½• SQL è¯­å¥æˆ–è¡Œæ•°æ®çš„å˜æ›´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šæ•°æ®æ¢å¤ã€ä¸»ä»å¤åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥æ–¹å¼&lt;/strong&gt;ï¼š&lt;strong&gt;è¿½åŠ å†™&lt;/strong&gt;ã€‚æ–‡ä»¶å†™æ»¡åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;-binlog-å¦‚ä½•å®ç°ä¸»ä»ä¸€è‡´-replication&#34;&gt;â“ Binlog å¦‚ä½•å®ç°ä¸»ä»ä¸€è‡´ (Replication)ï¼Ÿ
&lt;/h4&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶æœ¬è´¨ä¸Šå°±æ˜¯è®©ä»åº“ï¼ˆSlaveï¼‰æŠŠä¸»åº“ï¼ˆMasterï¼‰åšè¿‡çš„äº‹æƒ…å†åšä¸€éã€‚æ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼ˆ&lt;strong&gt;3ä¸ªçº¿ç¨‹&lt;/strong&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Dump çº¿ç¨‹ (Master)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Slave è¿æ¥åˆ° Masterï¼Œå‘Šè¯‰ Masterï¼šâ€œæˆ‘æƒ³è¦ä» &lt;code&gt;binlog-file-001&lt;/code&gt; çš„ç¬¬ &lt;code&gt;890&lt;/code&gt; ä½ç½®å¼€å§‹åŒæ­¥â€ã€‚&lt;/li&gt;
&lt;li&gt;Master å¯åŠ¨ä¸€ä¸ª &lt;code&gt;bin_log dump_thread&lt;/code&gt;ï¼Œè´Ÿè´£è¯»å–æœ¬åœ° Binlogï¼Œå¹¶é€šè¿‡ç½‘ç»œå‘é€ç»™ Slaveã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;I/O çº¿ç¨‹ (Slave)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Slave å¯åŠ¨ä¸€ä¸ª &lt;code&gt;I/O thread&lt;/code&gt;ï¼Œæ¥æ”¶ Master å‘æ¥çš„ Binlog æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒ&lt;strong&gt;ä¸ç›´æ¥æ‰§è¡Œ&lt;/strong&gt;ï¼Œè€Œæ˜¯å°†è¿™äº›æ•°æ®å¿«é€Ÿå†™å…¥åˆ° Slave æœ¬åœ°çš„ &lt;strong&gt;ä¸­ç»§æ—¥å¿— (Relay Log)&lt;/strong&gt; ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;æ³¨ï¼šRelay Log ç»“æ„å’Œ Binlog ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å®ƒæ˜¯å­˜åœ¨ Slave ä¸Šçš„ã€‚&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;SQL çº¿ç¨‹ (Slave)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Slave å¯åŠ¨ä¸€ä¸ª &lt;code&gt;SQL thread&lt;/code&gt;ï¼Œè¯»å– Relay Log ä¸­çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;è§£æå‡º SQL è¯­å¥æˆ–è¡Œå˜æ›´æ•°æ®ï¼Œåœ¨ Slave çš„æ•°æ®åº“ä¸­&lt;strong&gt;é‡æ”¾ (Replay)&lt;/strong&gt; æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆå®ç° Slave æ•°æ®ä¸ Master ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç®€å›¾ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [Master æ•°æ®åº“]                        [Slave æ•°æ®åº“]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        |                                      |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   (å†™ Binlog)                            (è¯» Relay Log)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        v                                      v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   [Binlog æ–‡ä»¶] --------(ç½‘ç»œ)--------&amp;gt; [Relay Log æ–‡ä»¶]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        |                                      ^
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   [Dump çº¿ç¨‹]                            [I/O çº¿ç¨‹] ---&amp;gt; [SQL çº¿ç¨‹] æ‰§è¡Œå›æ”¾
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;12-é‡åšæ—¥å¿—-redo-log&#34;&gt;1.2 é‡åšæ—¥å¿— (Redo Log)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½’å±&lt;/strong&gt;ï¼šInnoDB å¼•æ“å±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§è´¨&lt;/strong&gt;ï¼šç‰©ç†æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥æ–¹å¼&lt;/strong&gt;ï¼š&lt;strong&gt;å¾ªç¯å†™&lt;/strong&gt; (Circular Buffer)ã€‚Write Pos è¿½ä¸Š Checkpoint æ—¶éœ€åœé¡¿åˆ·ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;13-å›æ»šæ—¥å¿—-undo-log&#34;&gt;1.3 å›æ»šæ—¥å¿— (Undo Log)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½’å±&lt;/strong&gt;ï¼šInnoDB å¼•æ“å±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šäº‹åŠ¡å›æ»šã€MVCCã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥æ–¹å¼&lt;/strong&gt;ï¼šInsert æäº¤å³åˆ ï¼ŒUpdate/Delete æäº¤åæ”¾å…¥ History List å¾…æ¸…ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-æ ¸å¿ƒæœºåˆ¶è¾¨æ&#34;&gt;2. æ ¸å¿ƒæœºåˆ¶è¾¨æ
&lt;/h2&gt;&lt;h3 id=&#34;31-redo-log-vs-undo-log&#34;&gt;3.1 Redo Log vs Undo Log
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
          &lt;th&gt;Undo Log (å›æ»šæ—¥å¿—)&lt;/th&gt;
          &lt;th&gt;Redo Log (é‡åšæ—¥å¿—)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è®°å½•çš„æ•°æ®çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;äº‹åŠ¡å¼€å§‹å‰&lt;/strong&gt; (æ›´æ–°ä¹‹å‰çš„å€¼)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;äº‹åŠ¡å®Œæˆå&lt;/strong&gt; (æ›´æ–°ä¹‹åçš„å€¼)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®çš„&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ’¤é”€æ“ä½œ (å›æ»š)&lt;/td&gt;
          &lt;td&gt;é‡åšæ“ä½œ (æ¢å¤)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å´©æºƒæ¢å¤&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æäº¤&lt;strong&gt;å‰&lt;/strong&gt;å´©æºƒ -&amp;gt; &lt;strong&gt;å›æ»š&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æäº¤&lt;strong&gt;å&lt;/strong&gt;å´©æºƒ -&amp;gt; &lt;strong&gt;æ¢å¤&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;32-redo-log-vs-binlog&#34;&gt;3.2 Redo Log vs Binlog
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»´åº¦&lt;/th&gt;
          &lt;th&gt;Redo Log&lt;/th&gt;
          &lt;th&gt;Binlog&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Crash-safe (å´©æºƒæ¢å¤)&lt;/td&gt;
          &lt;td&gt;å½’æ¡£ã€ä¸»ä»å¤åˆ¶&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å†™å…¥ç‰¹å¾&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;å¾ªç¯å†™&lt;/strong&gt; (ç©ºé—´å›ºå®š)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;è¿½åŠ å†™&lt;/strong&gt; (æ— é™å¢é•¿)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-äº‹åŠ¡æ‰§è¡Œä¸æ—¥å¿—å†™å…¥æ—¶åº&#34;&gt;3. äº‹åŠ¡æ‰§è¡Œä¸æ—¥å¿—å†™å…¥æ—¶åº
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥ Undo Log&lt;/strong&gt; (è®°å½•â€œæ›´æ–°å‰â€)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ Update&lt;/strong&gt; (ä¿®æ”¹å†…å­˜)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥ Redo Log (Prepare)&lt;/strong&gt; (è®°å½•â€œæ›´æ–°åâ€ï¼Œæ ‡è®° Prepare)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥ Binlog&lt;/strong&gt; (Server å±‚æŒä¹…åŒ–)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤ Redo Log (Commit)&lt;/strong&gt; (æ ‡è®° Commit)ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-ä¸¤é˜¶æ®µæäº¤ä¸å´©æºƒæ¢å¤&#34;&gt;4. ä¸¤é˜¶æ®µæäº¤ä¸å´©æºƒæ¢å¤
&lt;/h2&gt;&lt;h3 id=&#34;å´©æºƒæ¢å¤é€»è¾‘&#34;&gt;å´©æºƒæ¢å¤é€»è¾‘
&lt;/h3&gt;&lt;p&gt;MySQL é‡å¯æ—¶æ£€æŸ¥ Redo Log çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Binlog æœªå†™å…¥&lt;/strong&gt; (Redo Log å¤„äº Prepare)ï¼š-&amp;gt; &lt;strong&gt;å›æ»šäº‹åŠ¡ (Undo)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Binlog å·²å†™å…¥&lt;/strong&gt; (Redo Log å¤„äº Prepare)ï¼š-&amp;gt; &lt;strong&gt;æäº¤äº‹åŠ¡ (Redo)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;-ç–‘éš¾è§£ç­”ä¸ºä»€ä¹ˆ-binlog-æ²¡å†™å°±è¦å›æ»š&#34;&gt;â“ ç–‘éš¾è§£ç­”ï¼šä¸ºä»€ä¹ˆ Binlog æ²¡å†™å°±è¦å›æ»šï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;ï¼š&lt;strong&gt;ä¸ºäº†ä¿è¯ä¸»ä»æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/strong&gt;
Binlog æ˜¯ä¸»ä»åŒæ­¥çš„å‡­è¯ã€‚å¦‚æœä¸»åº“åˆ©ç”¨ Redo Log æ¢å¤äº†æ•°æ®ï¼ˆæ²¡ç¥¨ä¹Ÿæ‹¿è´§ï¼‰ï¼Œä½†å› ä¸ºæ²¡å†™ Binlog å¯¼è‡´ä»åº“æ²¡æ”¶åˆ°æ•°æ®ï¼Œå°±ä¼šå¯¼è‡´ä¸»åº“æœ‰æ•°æ®ã€ä»åº“æ²¡æ•°æ®ã€‚ä¸ºäº†é›†ç¾¤ä¸€è‡´ï¼Œä¸»åº“å¿…é¡»å›æ»šã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>MySQL é”æœºåˆ¶è¯¦è§£</title>
        <link>https://skylm808.github.io/p/mysql-%E9%94%81%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Mon, 02 Feb 2026 11:54:09 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/mysql-%E9%94%81%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;p&gt;åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œ&lt;strong&gt;é”&lt;/strong&gt;æ˜¯ç”¨äºç®¡ç†å¯¹å…±äº«èµ„æºå¹¶å‘è®¿é—®çš„æœºåˆ¶ã€‚MySQL çš„é”æœºåˆ¶è®¾è®¡éå¸¸ç²¾å·§ï¼Œä¸»è¦ä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå¹¶å‘æ€§ã€‚æ ¹æ®åŠ é”çš„èŒƒå›´ï¼ŒMySQL çš„é”å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š&lt;strong&gt;å…¨å±€é”&lt;/strong&gt;ã€&lt;strong&gt;è¡¨çº§é”&lt;/strong&gt;å’Œ&lt;strong&gt;è¡Œçº§é”&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‰ç½®çŸ¥è¯†è¿æ¥çº¿ç¨‹ä¸äº‹åŠ¡&#34;&gt;å‰ç½®çŸ¥è¯†ï¼šè¿æ¥ã€çº¿ç¨‹ä¸äº‹åŠ¡
&lt;/h2&gt;&lt;p&gt;åœ¨æ·±å…¥ç†è§£é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆç†æ¸… MySQL çš„æ¶æ„å±‚çº§ï¼Œè¿™å°±åƒâ€œä¿„ç½—æ–¯å¥—å¨ƒâ€ä¸€æ ·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://skylm808.github.io/p/mysql-%E9%94%81%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/img.png&#34;
	width=&#34;796&#34;
	height=&#34;357&#34;
	srcset=&#34;https://skylm808.github.io/p/mysql-%E9%94%81%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/img_hu_910ed6dc9d1778c8.png 480w, https://skylm808.github.io/p/mysql-%E9%94%81%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/img_hu_b3a1a00575298c62.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img.png&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;222&#34;
		data-flex-basis=&#34;535px&#34;
	
&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥ (Connection)&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„ç‰©ç† TCP é€šé“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹ (Thread/Session)&lt;/strong&gt;ï¼šMySQL ä¸ºæ¯ä¸ªè¿æ¥åˆ†é…ä¸€ä¸ªçº¿ç¨‹ã€‚&lt;strong&gt;è¡¨é” (&lt;code&gt;lock tables&lt;/code&gt;)&lt;/strong&gt; é€šå¸¸ä¸ä¼šè¯ç»‘å®šï¼Œè¿æ¥ä¸æ–­ï¼Œé”å¯èƒ½ä¸é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ (Transaction)&lt;/strong&gt;ï¼šé€»è¾‘æ“ä½œå•å…ƒã€‚&lt;strong&gt;MDL é”&lt;/strong&gt; å’Œ &lt;strong&gt;InnoDB è¡Œé”&lt;/strong&gt; éƒ½æ˜¯ä¸äº‹åŠ¡ç»‘å®šçš„ã€‚&lt;strong&gt;åªæœ‰äº‹åŠ¡æäº¤ (Commit) åï¼Œè¿™äº›é”æ‰ä¼šé‡Šæ”¾&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;âš ï¸ æ ¸å¿ƒè®¤çŸ¥&lt;/strong&gt;ï¼šMDL é”çš„å±é™©ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸æ˜¯ SQL æ‰§è¡Œå®Œå°±é‡Šæ”¾ï¼Œè€Œæ˜¯&lt;strong&gt;äº‹åŠ¡æäº¤æ‰é‡Šæ”¾&lt;/strong&gt;ã€‚å¦‚æœä¸€ä¸ªé•¿äº‹åŠ¡æŸ¥äº†ä¸€æ¬¡è¡¨åå°±æŒ‚èµ·äº†ï¼Œå®ƒä¼šä¸€ç›´æŒæœ‰ MDL è¯»é”ï¼Œå¯¼è‡´åç»­çš„è¡¨ç»“æ„ä¿®æ”¹ï¼ˆDDLï¼‰è¢«é˜»å¡ï¼Œè¿›è€Œé˜»å¡æ‰€æœ‰æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¡¨é” æ˜¯ ä¼šè¯ï¼ˆçº¿ç¨‹ï¼‰çº§ çš„ã€‚&lt;/li&gt;
&lt;li&gt;MDL å’Œ è¡Œé” æ˜¯ äº‹åŠ¡çº§ çš„ï¼ˆè¿™æ˜¯é‡ç‚¹ï¼Œäº‹åŠ¡ä¸æäº¤ï¼ŒMDL å°±ä¸é‡Šæ”¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ä¸€å…¨å±€é”&#34;&gt;ä¸€ã€å…¨å±€é”
&lt;/h2&gt;&lt;p&gt;å…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ã€‚&lt;/p&gt;
&lt;h3 id=&#34;11-å‘½ä»¤ä¸æ•ˆæœ&#34;&gt;1.1 å‘½ä»¤ä¸æ•ˆæœ
&lt;/h3&gt;&lt;p&gt;MySQL æä¾›äº†ä¸€ä¸ªåŠ å…¨å±€è¯»é”çš„æ–¹æ³•ï¼Œå‘½ä»¤æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Flush tables &lt;span style=&#34;color:#ff79c6&#34;&gt;with&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;read&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;lock&lt;/span&gt; (FTWRL);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡Œåï¼Œæ•´ä¸ªåº“å¤„äº&lt;strong&gt;åªè¯»çŠ¶æ€&lt;/strong&gt;ã€‚ä¹‹åå…¶ä»–çº¿ç¨‹çš„ä»¥ä¸‹è¯­å¥ä¼šè¢«é˜»å¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®æ›´æ–°è¯­å¥ï¼ˆæ•°æ®çš„å¢åˆ æ”¹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å®šä¹‰è¯­å¥ï¼ˆåŒ…æ‹¬å»ºè¡¨ã€ä¿®æ”¹è¡¨ç»“æ„ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;12-ä½¿ç”¨åœºæ™¯&#34;&gt;1.2 ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å…¨å±€é”çš„ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯åš&lt;strong&gt;å…¨åº“é€»è¾‘å¤‡ä»½&lt;/strong&gt;ï¼ˆmysqldumpï¼‰ã€‚åœ¨å¤‡ä»½è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ä¿è¯æ‰€æœ‰è¡¨çš„æ•°æ®åœ¨åŒä¸€é€»è¾‘æ—¶é—´ç‚¹ä¸Šä¸€è‡´ï¼Œéœ€è¦å†»ç»“æ‰€æœ‰æ›´æ–°æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;13-æ½œåœ¨é£é™©&#34;&gt;1.3 æ½œåœ¨é£é™©
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åº“å¤‡ä»½&lt;/strong&gt;ï¼šä¸šåŠ¡åœæ‘†ï¼Œæ— æ³•å¤„ç†æ›´æ–°è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“å¤‡ä»½&lt;/strong&gt;ï¼šä»åº“ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„ binlogï¼Œå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯ InnoDB å¼•æ“ï¼Œç”±äºå…¶æ”¯æŒ MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;mysqldump --single-transaction&lt;/code&gt; å‚æ•°ã€‚è¿™ä¼šåœ¨å¤‡ä»½å¼€å§‹æ—¶å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‹¿åˆ°ä¸€è‡´æ€§è§†å›¾ï¼Œä»è€Œåœ¨ä¸é˜»å¡æ›´æ–°çš„æƒ…å†µä¸‹å®ç°å¤‡ä»½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;äºŒè¡¨çº§é”&#34;&gt;äºŒã€è¡¨çº§é”
&lt;/h2&gt;&lt;p&gt;è¡¨çº§é”æ˜¯ MySQL ä¸­æœ€å¸¸ç”¨çš„é”ç­–ç•¥ã€‚ä¸ºäº†ç†è§£é€å½»ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ† &lt;strong&gt;æ˜¾å¼é”&lt;/strong&gt; å’Œ &lt;strong&gt;éšå¼é”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼è¡¨é”&lt;/strong&gt;ï¼šå¿…é¡»æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ï¼ˆ&lt;code&gt;LOCK TABLES&lt;/code&gt;ï¼‰æ‰ä¼šç”Ÿæ•ˆã€‚æ—¥å¸¸å¼€å‘å¾ˆå°‘ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è¡¨é”&lt;/strong&gt;ï¼šMySQL å†…éƒ¨è‡ªåŠ¨åŠ çš„ï¼Œæ— å¤„ä¸åœ¨ã€‚åŒ…æ‹¬ &lt;strong&gt;MDL&lt;/strong&gt;ï¼ˆä¿æŠ¤è¡¨ç»“æ„ï¼‰å’Œ &lt;strong&gt;æ„å‘é”&lt;/strong&gt;ï¼ˆé…åˆè¡Œé”ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;21-è¡¨é”-table-lock---æ˜¾å¼&#34;&gt;2.1 è¡¨é” (Table Lock) - [æ˜¾å¼]
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯­æ³•&lt;/strong&gt;ï¼š&lt;code&gt;lock tables t1 read, t2 write;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£é”&lt;/strong&gt;ï¼š&lt;code&gt;unlock tables;&lt;/code&gt; æˆ–å®¢æˆ·ç«¯æ–­å¼€è¿æ¥è‡ªåŠ¨é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;code&gt;lock tables&lt;/code&gt; è¯­æ³•é™¤äº†é™åˆ¶åˆ«çš„çº¿ç¨‹çš„è¯»å†™å¤–ï¼Œä¹Ÿé™åˆ¶äº†æœ¬çº¿ç¨‹çš„æ“ä½œã€‚å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»é” (Read Lock)&lt;/strong&gt;ï¼š&lt;code&gt;lock tables t1 read&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½“å‰çº¿ç¨‹&lt;/strong&gt;ï¼šåªèƒ½è¯» t1ï¼Œ&lt;strong&gt;ä¸èƒ½å†™&lt;/strong&gt; t1ï¼Œä¹Ÿä¸èƒ½è®¿é—®å…¶ä»–æœªé”å®šçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–çº¿ç¨‹&lt;/strong&gt;ï¼šå¯ä»¥è¯» t1ï¼Œ&lt;strong&gt;ä¸èƒ½å†™&lt;/strong&gt; t1ï¼ˆå†™æ“ä½œä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é”é‡Šæ”¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™é” (Write Lock)&lt;/strong&gt;ï¼š&lt;code&gt;lock tables t1 write&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½“å‰çº¿ç¨‹&lt;/strong&gt;ï¼šå¯ä»¥&lt;strong&gt;è¯»å’Œå†™&lt;/strong&gt; t1ï¼Œä¸èƒ½è®¿é—®å…¶ä»–æœªé”å®šçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–çº¿ç¨‹&lt;/strong&gt;ï¼š&lt;strong&gt;ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™&lt;/strong&gt; t1ï¼ˆè¯»å†™æ“ä½œå‡ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é”é‡Šæ”¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ” æ·±åº¦ç†è§£ï¼šé”ã€çº¿ç¨‹ä¸äº‹åŠ¡çš„å…³ç³»&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹å³ä¼šè¯&lt;/strong&gt;ï¼šè¿™é‡Œçš„â€œçº¿ç¨‹â€æŒ‡çš„æ˜¯&lt;strong&gt;å®¢æˆ·ç«¯è¿æ¥ (Session)&lt;/strong&gt;ã€‚MySQL ä¸ºæ¯ä¸ªè¿æ¥åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œé”çš„æ‰€æœ‰æƒå±äºè¿™ä¸ªè¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éšå¼æäº¤ (Implicit Commit)&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ã€‚æ‰§è¡Œ &lt;code&gt;LOCK TABLES&lt;/code&gt; æ—¶ï¼Œå¦‚æœå½“å‰ä¼šè¯ä¸­æœ‰æœªæäº¤çš„äº‹åŠ¡ï¼ŒMySQL ä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œ &lt;code&gt;COMMIT&lt;/code&gt;ã€‚
&amp;gt;   - è¿™æ„å‘³ç€ï¼š&lt;strong&gt;æ˜¾å¼è¡¨é”ä¸èƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡çš„ä¸­é—´ä½¿ç”¨&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šæ‰“æ–­åŸæœ‰çš„äº‹åŠ¡é€»è¾‘ã€‚å®ƒæ˜¯ä¼šè¯çº§åˆ«çš„èµ„æºæ§åˆ¶ï¼Œç‹¬ç«‹äº InnoDB çš„äº‹åŠ¡æœºåˆ¶ä¹‹å¤–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;22-å…ƒæ•°æ®é”-mdl---metadata-lock---éšå¼&#34;&gt;2.2 å…ƒæ•°æ®é” (MDL - Metadata Lock) - [éšå¼]
&lt;/h3&gt;&lt;p&gt;MDL ä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚é˜²æ­¢åœ¨æŸ¥è¯¢è¡¨æ•°æ®æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¡¨ç»“æ„ï¼ˆå¦‚åˆ äº†ä¸€åˆ—ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;*   **è¯»é” (MDL read lock)**ï¼šå¯¹è¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œæ—¶åŠ ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;*   **å†™é” (MDL write lock)**ï¼šå¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œæ—¶åŠ ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;âš–ï¸ æ ¸å¿ƒè¾¨æï¼šMDL è¯»é” vs æ•°æ®å†™æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯¯åŒº&lt;/strong&gt;ï¼šâ€œåŠ äº† MDL è¯»é”ï¼Œåˆ«äººå°±ä¸èƒ½å†™æ•°æ®äº†å—ï¼Ÿâ€ â€”â€” &lt;strong&gt;é”™ï¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœŸç›¸&lt;/strong&gt;ï¼šMDL è¯»é”ä¹‹é—´æ˜¯&lt;strong&gt;äº’ä¸å†²çª&lt;/strong&gt;çš„ã€‚
&amp;gt;   - ä½  &lt;code&gt;UPDATE&lt;/code&gt;ï¼Œæˆ‘ä¹Ÿ &lt;code&gt;UPDATE&lt;/code&gt;ï¼Œæˆ‘ä»¬éƒ½æŒæœ‰ MDL è¯»é”ã€‚æˆ‘ä»¬å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ˆæ•°æ®å†²çªç”± InnoDB è¡Œé”è§£å†³ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;MDL è¯»é”&lt;strong&gt;åªé˜² DDL&lt;/strong&gt;ï¼ˆä¿®æ”¹è¡¨ç»“æ„ï¼‰ã€‚å®ƒå°±åƒå¤§é—¨å£çš„ä¿å®‰ï¼Œåªç®¡é˜²æ­¢æœ‰äººæ¥&lt;strong&gt;æ‹†æˆ¿å­&lt;/strong&gt;ï¼Œä¸ç®¡æˆ¿å­é‡Œçš„äººæ€ä¹ˆ&lt;strong&gt;æ‰“æ¶&lt;/strong&gt;ï¼ˆæ•°æ®ç«äº‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹»è¯»è°ç®¡ï¼Ÿ&lt;/strong&gt; MDL ä¸ç®¡å¹»è¯»ã€‚å¹»è¯»ç”± InnoDB çš„ &lt;strong&gt;Next-Key Lock&lt;/strong&gt; å’Œ &lt;strong&gt;MVCC&lt;/strong&gt; è´Ÿè´£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥æ€§&lt;/strong&gt;ï¼šè¯»é”ä¹‹é—´ä¸äº’æ–¥ï¼›è¯»å†™é”ä¹‹é—´ã€å†™é”ä¹‹é—´æ˜¯äº’æ–¥çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‘&lt;/strong&gt;ï¼šç»™ä¸€ä¸ªå°è¡¨åŠ å­—æ®µï¼ˆMDL å†™é”ï¼‰ï¼Œå¯èƒ½ä¼šé˜»å¡åç»­æ‰€æœ‰çš„æŸ¥è¯¢ï¼ˆMDL è¯»é”ï¼‰ï¼Œå¯¼è‡´æ•°æ®åº“è¿æ¥çˆ†æ»¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ›‘ ä»€ä¹ˆæ˜¯â€œäº‹åŠ¡æŒ‚èµ·â€ï¼Ÿä¸ºä»€ä¹ˆå¯æ€•ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚èµ·å«ä¹‰&lt;/strong&gt;ï¼šæŒ‡äº‹åŠ¡å¼€å¯å¹¶æ‰§è¡Œäº†æŸ¥è¯¢ï¼ˆæ‹¿åˆ°äº† MDL è¯»é”ï¼‰åï¼Œå®¢æˆ·ç«¯è¿Ÿè¿Ÿæ²¡æœ‰å‘é€ &lt;code&gt;COMMIT&lt;/code&gt;ã€‚
&amp;gt;   - &lt;strong&gt;åœºæ™¯ 1&lt;/strong&gt;ï¼šä»£ç åœ¨äº‹åŠ¡ä¸­è°ƒç”¨äº†è€—æ—¶çš„ç¬¬ä¸‰æ–¹ APIï¼ˆå¦‚æ”¯ä»˜æ¥å£ï¼‰ï¼Œå¯¼è‡´äº‹åŠ¡é•¿æ—¶é—´ä¸æäº¤ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯ 2&lt;/strong&gt;ï¼šå¼€å‘äººå‘˜åœ¨å‘½ä»¤è¡Œ &lt;code&gt;BEGIN&lt;/code&gt; åå»å¼€ä¼šäº†ï¼Œæ²¡å…³ç»ˆç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿é”ååº” (Blocking Chain)&lt;/strong&gt;ï¼š
&amp;gt;
&amp;gt;   1. &lt;strong&gt;äº‹åŠ¡ A&lt;/strong&gt;ï¼ˆæŒ‚èµ·ï¼‰ï¼šæŒæœ‰ MDL è¯»é”ã€‚
2. &lt;strong&gt;äº‹åŠ¡ B&lt;/strong&gt;ï¼ˆDDLï¼‰ï¼šæƒ³åŠ å­—æ®µï¼Œéœ€è¦ MDL &lt;strong&gt;å†™é”&lt;/strong&gt;ã€‚-&amp;gt; &lt;strong&gt;è¢« A é˜»å¡&lt;/strong&gt;ã€‚
3. &lt;strong&gt;äº‹åŠ¡ C/D/E&lt;/strong&gt;ï¼ˆæ™®é€šæŸ¥è¯¢ï¼‰ï¼šéœ€è¦ MDL è¯»é”ã€‚ç”±äºå†™é”ä¼˜å…ˆçº§é«˜ï¼ŒB åœ¨æ’é˜Ÿï¼Œ&lt;strong&gt;C/D/E ä¹Ÿå¿…é¡»åœ¨ B åé¢æ’é˜Ÿ&lt;/strong&gt;ã€‚
&amp;gt;
&amp;gt;   - &lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šä¸€ä¸ªä¸æ˜¾çœ¼çš„è¯»é”ï¼Œå¯¼è‡´åç»­é’ˆå¯¹è¯¥è¡¨çš„æ‰€æœ‰è¯»å†™è¯·æ±‚å…¨éƒ¨å¡æ­»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;23-æ„å‘é”-intention-locks---éšå¼&#34;&gt;2.3 æ„å‘é” (Intention Locks) - [éšå¼]
&lt;/h3&gt;&lt;p&gt;æ„å‘é”æ˜¯ InnoDB &lt;strong&gt;è‡ªåŠ¨åŠ &lt;/strong&gt;çš„è¡¨çº§é”ï¼Œå®ƒçš„åå­—å¬èµ·æ¥å¾ˆæŠ½è±¡ï¼Œä½†åŸç†éå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;h4 id=&#34;-é€šä¿—è§£é‡Šæ•™å­¦æ¥¼ä¸å‘ä½&#34;&gt;ğŸ’¡ é€šä¿—è§£é‡Šï¼ˆæ•™å­¦æ¥¼ä¸å‘ä½ï¼‰
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šæŠŠä¸€å¼ è¡¨çœ‹ä½œä¸€æ ‹&lt;strong&gt;æ•™å­¦æ¥¼&lt;/strong&gt;ï¼ŒæŠŠæ¯ä¸€è¡Œæ•°æ®çœ‹ä½œæ¥¼é‡Œçš„&lt;strong&gt;å•æ‰€å‘ä½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡Œé”&lt;/strong&gt;ï¼šä½ å»ä¸Šå•æ‰€ï¼Œé”ä½äº†æŸä¸€ä¸ªå‘ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡¨é”&lt;/strong&gt;ï¼šæ ¡é•¿æƒ³â€œå‘¨æœ«å°æ¥¼â€ï¼Œé”ä½æ•™å­¦æ¥¼å¤§é—¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çŸ›ç›¾&lt;/strong&gt;ï¼šæ ¡é•¿æƒ³é”å¤§é—¨ï¼ˆè¡¨é”ï¼‰æ—¶ï¼Œä»–å¿…é¡»ç¡®ä¿æ¥¼é‡Œ&lt;strong&gt;æ¯ä¸€ä¸ªå‘ä½&lt;/strong&gt;éƒ½æ²¡äººï¼ˆè¡Œé”ï¼‰ã€‚å¦‚æœæ²¡æœ‰æ„å‘é”ï¼Œæ ¡é•¿å¾—æŒ¨ä¸ªæ£€æŸ¥å‡ ä¸‡ä¸ªå‘ä½ï¼Œæ•ˆç‡æä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å‘é”çš„ä½œç”¨&lt;/strong&gt;ï¼šå­¦æ ¡è§„å®šï¼Œè°è¦è¿›æ¥¼ä¸Šå•æ‰€ï¼Œå¿…é¡»å…ˆåœ¨å¤§é—¨å£äº®èµ·ä¸€ç› &lt;strong&gt;â€œæ¥¼é‡Œæœ‰äººâ€çš„çº¢ç¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å½“ä½ å»é”å…·ä½“è¡Œæ—¶ï¼ŒMySQL ä¼šå…ˆè‡ªåŠ¨åœ¨è¡¨ä¸ŠåŠ ä¸ª &lt;strong&gt;æ„å‘é”&lt;/strong&gt;ï¼ˆç‚¹äº®çº¢ç¯ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“åˆ«äººæƒ³åŠ  &lt;strong&gt;è¡¨é”&lt;/strong&gt;ï¼ˆå°æ¥¼ï¼‰æ—¶ï¼Œä¸€çœ‹å¤§é—¨å£çº¢ç¯äº®ç€ï¼Œå°±çŸ¥é“ä¸èƒ½é”ï¼Œç›´æ¥ç­‰å¾…ã€‚ä¸éœ€è¦è¿›æ¥¼æŒ¨ä¸ªæ£€æŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;-æŠ€æœ¯ç»†èŠ‚&#34;&gt;ğŸ”’ æŠ€æœ¯ç»†èŠ‚
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å‘å…±äº«é” (IS)&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œçº§å…±äº«é”ï¼ˆè¯»ï¼‰ï¼Œå¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IS é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å‘æ’ä»–é” (IX)&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œçº§æ’ä»–é”ï¼ˆå†™ï¼‰ï¼Œå¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IX é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ”„ é€»è¾‘æ¢³ç†ï¼šè°åŠ é”ï¼Ÿç»™è°çœ‹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°åŠ æ„å‘é”ï¼Ÿ&lt;/strong&gt; æ˜¯æƒ³&lt;strong&gt;æ“ä½œè¡Œ&lt;/strong&gt;çš„äººï¼ˆæ¯”å¦‚ &lt;code&gt;UPDATE&lt;/code&gt; çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;*   è§„åˆ™ï¼šä½ åœ¨é”ä½è¡Œä¹‹å‰ï¼Œå¿…é¡»å…ˆåœ¨è¡¨é—¨å£è´´ä¸ªæ¡å­ï¼ˆåŠ  IS/IXï¼‰ï¼Œå£°æ˜â€œæˆ‘è¦è¿›å»äº†â€ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»™è°çœ‹ï¼Ÿ&lt;/strong&gt; æ˜¯æƒ³&lt;strong&gt;é”æ•´å¼ è¡¨&lt;/strong&gt;çš„äººï¼ˆæ¯”å¦‚ &lt;code&gt;LOCK TABLES&lt;/code&gt; çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;*   è§„åˆ™ï¼šä»–åœ¨é”è¡¨å‰ï¼Œå…ˆçœ‹é—¨å£æœ‰æ²¡æœ‰æ¡å­ã€‚æœ‰æ¡å­ï¼ˆIS/IXï¼‰ï¼Œä»–å°±çŸ¥é“é‡Œé¢æœ‰äººï¼Œåªèƒ½åœ¨é—¨å£ç­‰ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;æ„å‘é”ä¹‹é—´æ˜¯&lt;strong&gt;å®Œå…¨å…¼å®¹&lt;/strong&gt;çš„ï¼ˆä½ äº®ç¯æˆ‘ä¹Ÿäº®ç¯ï¼Œä¸å†²çªï¼Œå¤§å®¶å„ä¸Šå„çš„å•æ‰€ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;æ„å‘é”ä¸»è¦æ˜¯ä¸ºäº†&lt;strong&gt;è§£å†³è¡Œé”ä¸è¡¨é”çš„å†²çª&lt;/strong&gt;ï¼ˆå¿«é€Ÿæ‹’ç» &lt;code&gt;LOCK TABLES&lt;/code&gt; è¯·æ±‚ï¼‰ï¼Œæå¤§æé«˜äº†åŠ è¡¨é”çš„åˆ¤æ–­æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ä¸‰è¡Œçº§é”-innodb&#34;&gt;ä¸‰ã€è¡Œçº§é” (InnoDB)
&lt;/h2&gt;&lt;p&gt;è¡Œçº§é”æ˜¯ InnoDB å¼•æ“çš„ä¸€å¤§ç‰¹è‰²ï¼Œæ”¯æŒé«˜å¹¶å‘ã€‚è¡Œé”æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ ä¸Šçš„ï¼Œä½†å¹¶ä¸æ˜¯ä¸éœ€è¦äº†å°±ç«‹åˆ»é‡Šæ”¾ï¼Œè€Œæ˜¯è¦ç­‰åˆ°äº‹åŠ¡ç»“æŸæ—¶æ‰é‡Šæ”¾ï¼ˆ&lt;strong&gt;ä¸¤é˜¶æ®µé”åè®®&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-é”çš„ç±»å‹&#34;&gt;3.1 é”çš„ç±»å‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…±äº«é” (S Lock)&lt;/strong&gt;ï¼šå…è®¸äº‹åŠ¡è¯»ä¸€è¡Œæ•°æ®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SELECT ... LOCK IN SHARE MODE;&lt;/code&gt; (MySQL 8.0: &lt;code&gt;FOR SHARE&lt;/code&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹å¾&lt;/strong&gt;ï¼š&lt;strong&gt;è¯»è¯»å…±äº«ï¼Œè¯»å†™äº’æ–¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;â€œå…è®¸â€çš„æ„æ€æ˜¯ï¼š&lt;strong&gt;å…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶æŒæœ‰ S é”&lt;/strong&gt;ã€‚å“ªæ€•æœ‰ 100 ä¸ªäººåŒæ—¶åŠ  S é”è¯»åŒä¸€è¡Œï¼Œéƒ½ä¸ä¼šé˜»å¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åªé˜²ä¸€ç‚¹&lt;/strong&gt;ï¼šé˜²æ­¢åˆ«äºº&lt;strong&gt;ä¿®æ”¹&lt;/strong&gt;ï¼ˆX é”ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šçˆ¶å­è¡¨å¼•ç”¨æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹å­&lt;/strong&gt;ï¼šåœ¨æ’å…¥è®¢å•å‰ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SELECT * FROM user WHERE id=1 LOCK IN SHARE MODE;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šç¡®ä¿åœ¨æŸ¥è¯¢é‚£ä¸€åˆ»ç”¨æˆ·å­˜åœ¨ï¼Œå¹¶ä¸”&lt;strong&gt;åœ¨æ•´ä¸ªäº‹åŠ¡ç»“æŸå‰ï¼Œä¸å…è®¸å…¶ä»–äº‹åŠ¡åˆ é™¤æˆ–ä¿®æ”¹è¯¥ç”¨æˆ·&lt;/strong&gt;ï¼ˆS é”ä¸ X é”äº’æ–¥ï¼‰ã€‚è¿™å°±é˜²æ­¢äº†â€œæˆ‘åˆšæŸ¥åˆ°äººï¼Œåˆ«äººå°±æŠŠäººåˆ äº†â€çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’ä»–é” (X Lock)&lt;/strong&gt;ï¼šå…è®¸äº‹åŠ¡åˆ é™¤æˆ–æ›´æ–°ä¸€è¡Œæ•°æ®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SELECT ... FOR UPDATE;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;, &lt;code&gt;INSERT&lt;/code&gt; è‡ªåŠ¨åŠ  X é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;âš ï¸ é‡è¦ï¼šé”çš„ç”Ÿå‘½å‘¨æœŸ (ä¸¤é˜¶æ®µé”)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯¯åŒº&lt;/strong&gt;ï¼šä»¥ä¸º SQL æ‰§è¡Œå®Œï¼Œé”å°±è‡ªåŠ¨é‡Šæ”¾äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çœŸç›¸&lt;/strong&gt;ï¼šé”æ˜¯åœ¨äº‹åŠ¡æäº¤ (&lt;code&gt;COMMIT&lt;/code&gt;) æˆ–å›æ»š (&lt;code&gt;ROLLBACK&lt;/code&gt;) çš„&lt;strong&gt;æœ€åä¸€åˆ»&lt;/strong&gt;æ‰é‡Šæ”¾çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šå¦‚æœä½  &lt;code&gt;UPDATE&lt;/code&gt; äº†ä¸€è¡Œï¼Œç„¶åå»æ‰§è¡Œäº† 10 ç§’é’Ÿçš„å…¶ä»–é€»è¾‘ï¼ˆå‘é‚®ä»¶ã€è°ƒæ¥å£ï¼‰ï¼Œè¿™ 10 ç§’é’Ÿå†…ï¼Œ&lt;strong&gt;æ²¡æœ‰ä»»ä½•äººèƒ½æ”¹è¿™ä¸€è¡Œ&lt;/strong&gt;ã€‚æ‰€ä»¥ï¼Œäº‹åŠ¡ä¸€å®šè¦&lt;strong&gt;è¶ŠçŸ­è¶Šå¥½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;â“ ç–‘é—®ï¼šä¸ºä»€ä¹ˆ SELECT è¦åŠ æ’ä»–é”ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šå¹¶å‘æŠ¢è´­ï¼ˆæ£€æŸ¥åº“å­˜ -&amp;gt; æ‰£å‡åº“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šå¦‚æœç”¨æ™®é€š &lt;code&gt;SELECT&lt;/code&gt;ï¼ŒA å’Œ B åŒæ—¶è¯»åˆ°åº“å­˜ä¸º 1ï¼Œéƒ½å»æ‰£å‡ï¼Œå¯¼è‡´è¶…å–ï¼ˆåº“å­˜å˜ -1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼š&lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt; æ˜¯ä¸€ç§ &lt;strong&gt;å½“å‰è¯»&lt;/strong&gt;ã€‚
&amp;gt;   - å«ä¹‰ï¼šâ€œæˆ‘è¯»å®ƒæ˜¯ä¸ºäº†é©¬ä¸Šæ”¹å®ƒã€‚åœ¨æˆ‘æ”¹å®Œä¹‹å‰ï¼Œè°ä¹Ÿåˆ«æƒ³åŠ¨è¿™ä¸€è¡Œï¼â€
&lt;ul&gt;
&lt;li&gt;æ•ˆæœï¼šA è¯»å®Œåï¼Œè¿™ä¸€è¡Œå°±è¢«é”æ­»ã€‚B å†æƒ³è¯»ï¼ˆFOR UPDATEï¼‰æˆ–æ”¹ï¼Œå¿…é¡»ç­‰å¾… A æäº¤äº‹åŠ¡ã€‚è¿™æ˜¯è§£å†³â€œè¯»-æ”¹-å†™â€åŸå­æ€§é—®é¢˜çš„æ ‡å‡†æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;32-é”çš„ç®—æ³•-æ ¸å¿ƒ&#34;&gt;3.2 é”çš„ç®—æ³• (æ ¸å¿ƒ)
&lt;/h3&gt;&lt;p&gt;InnoDB çš„è¡Œé”æ˜¯&lt;strong&gt;é”ä½ç´¢å¼•&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯é”ä½è®°å½•æœ¬èº«ã€‚è¿™æ˜¯ä¸€ä¸ªé¢ è¦†æ€§çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h4 id=&#34;-ç¾éš¾è­¦ç¤ºæ²¡æœ‰ç´¢å¼•--é”å…¨è¡¨&#34;&gt;âš ï¸ ç¾éš¾è­¦ç¤ºï¼šæ²¡æœ‰ç´¢å¼• = é”å…¨è¡¨
&lt;/h4&gt;&lt;p&gt;å¦‚æœä½ çš„ update/delete/for update è¯­å¥&lt;strong&gt;æ²¡æœ‰ç”¨åˆ°ç´¢å¼•&lt;/strong&gt;ï¼ŒInnoDB åªèƒ½è¿›è¡Œå…¨è¡¨æ‰«æã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šMySQL ä¼šæŒ¨ä¸ªæ‰«ææ¯ä¸€è¡Œè®°å½•ï¼Œå¹¶ç»™&lt;strong&gt;æ¯ä¸€è¡Œ&lt;/strong&gt;éƒ½åŠ ä¸Šé”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šè™½ç„¶ä½ åªæ”¹äº†ä¸€è¡Œæ•°æ®ï¼Œä½†æ•´å¼ è¡¨å‡ ç™¾ä¸‡è¡Œæ•°æ®å…¨è¢«é”æ­»äº†ï¼è¿™åœ¨æ•ˆæœä¸Šç­‰åŒäºè¡¨é”ï¼Œå¹¶å‘é‡ç¬é—´é™ä¸º 0ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;UPDATE user SET age=20 WHERE name=&#39;ZhangSan&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;name&lt;/code&gt; å­—æ®µæ²¡ç´¢å¼•ï¼Œå…¨è¡¨æ‰€æœ‰äººçš„è®°å½•éƒ½ä¼šè¢«é”ä½ï¼Œå…¶ä»–äººè¿ &lt;code&gt;UPDATE user SET age=21 WHERE id=1&lt;/code&gt; éƒ½åšä¸äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;a-record-lock-è®°å½•é”&#34;&gt;A. Record Lock (è®°å½•é”)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ä»…ä»…é”ä½ç´¢å¼•è®°å½•çš„ä¸€è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼š&lt;code&gt;SELECT * FROM t WHERE id = 1 FOR UPDATE;&lt;/code&gt; (id ä¸ºä¸»é”®)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;b-gap-lock-é—´éš™é”&#34;&gt;B. Gap Lock (é—´éš™é”)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;é”ä½ç´¢å¼•è®°å½•ä¹‹é—´çš„&lt;strong&gt;é—´éš™&lt;/strong&gt;ï¼ˆä¸åŒ…å«è®°å½•æœ¬èº«ï¼‰ï¼Œç¡®ä¿ç´¢å¼•è®°å½•çš„é—´éš™ä¸å˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;ï¼šé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ•°æ®ï¼Œä»è€Œè§£å†³&lt;strong&gt;å¹»è¯»&lt;/strong&gt;é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šGap Lock åªåœ¨ &lt;strong&gt;å¯é‡å¤è¯» (RR)&lt;/strong&gt; éš”ç¦»çº§åˆ«ä¸‹æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;c-next-key-lock-ä¸´é”®é”&#34;&gt;C. Next-Key Lock (ä¸´é”®é”)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Record Lock + Gap Lock&lt;/strong&gt; çš„ç»„åˆã€‚&lt;/li&gt;
&lt;li&gt;é”ä½ä¸€ä¸ªå·¦å¼€å³é—­çš„åŒºé—´ &lt;code&gt;(negative_infinity, record]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼šInnoDB åœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œé»˜è®¤ä½¿ç”¨ Next-Key Lockã€‚åªæœ‰åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼ˆå¦‚å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢ä¸”è®°å½•å­˜åœ¨ï¼‰ï¼Œæ‰ä¼šé€€åŒ–ä¸º Record Lockã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;33-åŠ é”è§„åˆ™å®æˆ˜-å›¾è§£-rr-çº§åˆ«&#34;&gt;3.3 åŠ é”è§„åˆ™å®æˆ˜ (å›¾è§£ RR çº§åˆ«)
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ç†è§£é€å½»ï¼Œæˆ‘ä»¬ç”¨å…·ä½“æ•°å­—æ¥æ¼”ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾è¡¨ &lt;code&gt;t&lt;/code&gt; æœ‰ä¸»é”® &lt;code&gt;id&lt;/code&gt; å’Œ &lt;strong&gt;æ™®é€šç´¢å¼• &lt;code&gt;c&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç°æœ‰è®°å½• &lt;code&gt;c&lt;/code&gt; çš„å€¼ä¸ºï¼š&lt;code&gt;0, 5, 10, 15, 20, 25&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢-æŸ¥-id&#34;&gt;1. å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢ (æŸ¥ id)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥ &lt;code&gt;id = 5&lt;/code&gt; (å­˜åœ¨)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€€åŒ–ä¸º &lt;strong&gt;Record Lock&lt;/strong&gt;ã€‚åªé” id=5 è¿™ä¸€è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥ &lt;code&gt;id = 7&lt;/code&gt; (ä¸å­˜åœ¨)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶æ²¡æœ‰é”å…¨è¡¨ï¼&lt;/strong&gt; è¿™ä¸€ç‚¹è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶æŸ¥ä¸åˆ°æ•°æ®ï¼Œä½†&lt;strong&gt;æŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•&lt;/strong&gt;ï¼ˆé€šè¿‡ B+ æ ‘ç²¾å‡†å®šä½åˆ°äº† 5 å’Œ 10 ä¹‹é—´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€€åŒ–ä¸º &lt;strong&gt;Gap Lock&lt;/strong&gt;ã€‚åªé”ä½é—´éš™ &lt;strong&gt;(5, 10)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šåˆ«äººæ’å…¥ id=6, 8, 9 ä¼šè¢«é˜»å¡ï¼Œä½†æ’ id=100 æ²¡äº‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢-æŸ¥-c&#34;&gt;2. éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢ (æŸ¥ c)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¤§å‘ç‚¹ã€‚å› ä¸ºæ™®é€šç´¢å¼•å…è®¸é‡å¤ï¼Œé”èŒƒå›´å–å†³äº&lt;strong&gt;å·¦å³é‚»å±…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡è®¾æ•°æ®æ˜¯ &lt;code&gt;0, 5, 10&lt;/code&gt;ï¼ŒæŸ¥ &lt;code&gt;c = 5&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å·¦é‚»å±…æ˜¯ 0ï¼Œå³é‚»å±…æ˜¯ 10ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”ä½ &lt;strong&gt;(0, 5]&lt;/strong&gt; (Next-Key) + &lt;strong&gt;(5, 10)&lt;/strong&gt; (Gap)ã€‚èŒƒå›´ï¼š&lt;code&gt;(0, 10)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡è®¾æ•°æ®æ˜¯ &lt;code&gt;0, 3, 5, 10&lt;/code&gt;ï¼ŒæŸ¥ &lt;code&gt;c = 5&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å·¦é‚»å±…å˜æˆäº† 3ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”ä½ &lt;strong&gt;(3, 5]&lt;/strong&gt; (Next-Key) + &lt;strong&gt;(5, 10)&lt;/strong&gt; (Gap)ã€‚èŒƒå›´ï¼š&lt;code&gt;(3, 10)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š0 åˆ° 3 ä¹‹é—´æ˜¯å®‰å…¨çš„ï¼åˆ«äººå¯ä»¥æ’å…¥ &lt;code&gt;c=2&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ§  è®°å¿†å£è¯€&lt;/strong&gt;ï¼šæ™®é€šç´¢å¼•æŸ¥ç­‰å€¼ï¼Œ&lt;strong&gt;é”ä½è‡ªå·±ï¼Œè¿˜è¦é”ä½å·¦å³æœ€è¿‘é‚»å±…ä¹‹é—´çš„ç©ºéš™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å››æ­»é”ä¸å¤„ç†&#34;&gt;å››ã€æ­»é”ä¸å¤„ç†
&lt;/h2&gt;&lt;p&gt;å½“å¹¶å‘ç³»ç»Ÿä¸­ä¸åŒçº¿ç¨‹å‡ºç°å¾ªç¯èµ„æºä¾èµ–ï¼Œæ¶‰åŠçš„çº¿ç¨‹éƒ½åœ¨ç­‰å¾…åˆ«çš„çº¿ç¨‹é‡Šæ”¾èµ„æºæ—¶ï¼Œå°±ä¼šå¯¼è‡´æ­»é”ã€‚&lt;/p&gt;
&lt;h3 id=&#34;41-ç¤ºä¾‹&#34;&gt;4.1 ç¤ºä¾‹
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;äº‹åŠ¡ A&lt;/th&gt;
          &lt;th&gt;äº‹åŠ¡ B&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;update t set k=k+1 where id=1;&lt;/code&gt; (è· id=1 Xé”)&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;update t set k=k+1 where id=2;&lt;/code&gt; (è· id=2 Xé”)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;update t set k=k+1 where id=2;&lt;/code&gt; (ç­‰ id=2 Xé”)&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;update t set k=k+1 where id=1;&lt;/code&gt; (ç­‰ id=1 Xé”)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ­»é”ï¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;42-å¤„ç†ç­–ç•¥&#34;&gt;4.2 å¤„ç†ç­–ç•¥
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ—¶ç­‰å¾…&lt;/strong&gt;ï¼šé€šè¿‡å‚æ•° &lt;code&gt;innodb_lock_wait_timeout&lt;/code&gt; è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 50sï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”æ£€æµ‹&lt;/strong&gt;ï¼šé€šè¿‡å‚æ•° &lt;code&gt;innodb_deadlock_detect&lt;/code&gt; è®¾ç½®ä¸º &lt;code&gt;on&lt;/code&gt;ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚InnoDB ä¼šä¸»åŠ¨æ£€æµ‹æ­»é”ï¼Œå‘ç°æ­»é”åï¼Œä¸»åŠ¨å›æ»šæ­»é”é“¾æ¡ä¸­æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè®©å…¶ä»–äº‹åŠ¡å¾—ä»¥ç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;43-é¿å…æ­»é”çš„å»ºè®®&#34;&gt;4.3 é¿å…æ­»é”çš„å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ä»¥å›ºå®šçš„é¡ºåºè®¿é—®è¡¨å’Œè¡Œã€‚&lt;/li&gt;
&lt;li&gt;å¤§äº‹åŠ¡æ‹†å°ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå°½å¯èƒ½ä¸€æ¬¡é”å®šæ‰€æœ‰éœ€è¦çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºè¡¨æ·»åŠ åˆç†çš„ç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æå¯¼è‡´é”å®šæ‰€æœ‰è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;äº”è¿›é˜¶éš”ç¦»çº§åˆ«mvcc-ä¸é”çš„å…³ç³»&#34;&gt;äº”ã€è¿›é˜¶ï¼šéš”ç¦»çº§åˆ«ã€MVCC ä¸é”çš„å…³ç³»
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªææ˜“æ··æ·†çš„é«˜é¢‘é¢è¯•ç‚¹ï¼Œå¿…é¡»å˜æ¸…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;51-é”åœ¨ä¸åŒéš”ç¦»çº§åˆ«çš„åŒºåˆ«&#34;&gt;5.1 é”åœ¨ä¸åŒéš”ç¦»çº§åˆ«çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ RCï¼ˆè¯»å·²æäº¤ï¼‰å’Œ RRï¼ˆå¯é‡å¤è¯»ï¼‰éƒ½ä¼šåŠ è¡Œé”ï¼Œä½†åŠ é”çš„**èŒƒå›´ï¼ˆç®—æ³•ï¼‰**æˆªç„¶ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RC çº§åˆ«&lt;/strong&gt;ï¼šåªæœ‰ &lt;strong&gt;Record Lock&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;åªé”ä½å­˜åœ¨çš„è®°å½•ã€‚&lt;strong&gt;ä¸åŠ  Gap Lock&lt;/strong&gt;ï¼ˆå¤–é”®æ£€æŸ¥ç­‰ç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šå…è®¸å…¶ä»–äº‹åŠ¡åœ¨é—´éš™æ’å…¥æ•°æ®ï¼Œæ‰€ä»¥ RC ä¼šå‡ºç°&lt;strong&gt;å¹»è¯»&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RR çº§åˆ«&lt;/strong&gt;ï¼šé»˜è®¤ä½¿ç”¨ &lt;strong&gt;Next-Key Lock&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;é”ä½è®°å½• + é—´éš™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;ï¼šä¸¥é˜²æ­»å®ˆï¼Œç¦æ­¢æ’å…¥ï¼Œ&lt;strong&gt;è§£å†³å¹»è¯»&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;52-mvcc-æ˜¯ç”¨çš„ä¸´é”®é”å—&#34;&gt;5.2 MVCC æ˜¯ç”¨çš„ä¸´é”®é”å—ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç»å¯¹ä¸æ˜¯ï¼&lt;/strong&gt; å®ƒä»¬æ˜¯ä¸¤å¥—äº’è¡¥çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æœºåˆ¶&lt;/th&gt;
          &lt;th&gt;å…¨ç§°&lt;/th&gt;
          &lt;th&gt;ä½œç”¨å¯¹è±¡&lt;/th&gt;
          &lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
          &lt;th&gt;è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;MVCC&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;æ™®é€š SELECT&lt;/strong&gt; (å¿«ç…§è¯»)&lt;/td&gt;
          &lt;td&gt;é€šè¿‡ Undo Log ç»´æŠ¤æ•°æ®çš„å†å²ç‰ˆæœ¬&lt;/td&gt;
          &lt;td&gt;è§£å†³&lt;strong&gt;è¯»å†™å†²çª&lt;/strong&gt;ï¼Œå®ç°æ— é”çš„éé˜»å¡è¯»ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Next-Key Lock&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸´é”®é” (è¡Œé”çš„ä¸€ç§)&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;FOR UPDATE&lt;/strong&gt; / UPDATE (å½“å‰è¯»)&lt;/td&gt;
          &lt;td&gt;ä¹Ÿå°±æ˜¯çœŸé”ï¼Œé”ä½ç´¢å¼•åŒºé—´&lt;/td&gt;
          &lt;td&gt;è§£å†³&lt;strong&gt;å½“å‰è¯»ä¸‹çš„å¹»è¯»&lt;/strong&gt;é—®é¢˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šMySQL InnoDB åœ¨ RR çº§åˆ«ä¸‹è§£å†³å¹»è¯»é‡‡ç”¨äº†â€œåŒä¿é™©â€ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å¿«ç…§è¯»&lt;/strong&gt;ï¼Œé  &lt;strong&gt;MVCC&lt;/strong&gt; è§£å†³ï¼ˆçœ‹è€ç‰ˆæœ¬ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å½“å‰è¯»&lt;/strong&gt;ï¼Œé  &lt;strong&gt;Next-Key Lock&lt;/strong&gt; è§£å†³ï¼ˆé”ä½é—´éš™ä¸è®©æ’ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å…­æ€»ç»“&#34;&gt;å…­ã€æ€»ç»“
&lt;/h2&gt;&lt;h3 id=&#34;61-é”çš„é‡Šæ”¾æ—¶æœº-ç”Ÿå‘½å‘¨æœŸ&#34;&gt;6.1 é”çš„é‡Šæ”¾æ—¶æœº (ç”Ÿå‘½å‘¨æœŸ)
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŒºåˆ†é«˜æ‰‹çš„é‡è¦ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;é”ç±»åˆ«&lt;/th&gt;
          &lt;th&gt;å…·ä½“é”&lt;/th&gt;
          &lt;th&gt;é‡Šæ”¾æ—¶æœº&lt;/th&gt;
          &lt;th&gt;å¤‡æ³¨&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è·Ÿç€äº‹åŠ¡èµ°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;è¡Œé”ã€Gapé”ã€Next-Key&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;COMMIT / ROLLBACK&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;éµå®ˆä¸¤é˜¶æ®µé”åè®®ã€‚äº‹åŠ¡ä¸æäº¤ï¼Œé”æ­»ä¸æ”¾ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è·Ÿç€äº‹åŠ¡èµ°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;MDL (å…ƒæ•°æ®é”)ã€æ„å‘é”&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;COMMIT / ROLLBACK&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;åŒä¸Šã€‚äº‹åŠ¡æŒ‚èµ·ä¼šå¯¼è‡´ MDL é”ä¸€ç›´å ç”¨ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è·Ÿç€ä¼šè¯èµ°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å…¨å±€é” (FTWRL)&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;UNLOCK TABLES&lt;/code&gt; æˆ– æ–­å¼€è¿æ¥&lt;/td&gt;
          &lt;td&gt;éœ€è¦æ˜¾å¼è§£é”ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è·Ÿç€ä¼šè¯èµ°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ˜¾å¼è¡¨é” (&lt;code&gt;LOCK TABLES&lt;/code&gt;)&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;UNLOCK TABLES&lt;/code&gt; æˆ– æ–­å¼€è¿æ¥&lt;/td&gt;
          &lt;td&gt;éœ€è¦æ˜¾å¼è§£é”ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;62-ä¼˜ç¼ºç‚¹å¯¹æ¯”&#34;&gt;6.2 ä¼˜ç¼ºç‚¹å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;é”ç±»åˆ«&lt;/th&gt;
          &lt;th&gt;æè¿°&lt;/th&gt;
          &lt;th&gt;å…¸å‹å‘½ä»¤&lt;/th&gt;
          &lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
          &lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å…¨å±€é”&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é”æ•´ä¸ªåº“&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;FTWRL&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;ç®€å•ã€å®‰å…¨ï¼ˆå¤‡ä»½ï¼‰&lt;/td&gt;
          &lt;td&gt;æ€ä¼¤åŠ›å¤§ï¼Œä¸šåŠ¡åœæ‘†&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è¡¨çº§é”&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é”æ•´å¼ è¡¨&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;LOCK TABLES&lt;/code&gt;, MDL&lt;/td&gt;
          &lt;td&gt;å¼€é”€å°ï¼Œæ— æ­»é”&lt;/td&gt;
          &lt;td&gt;å¹¶å‘åº¦ä½&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è¡Œçº§é”&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é”ç´¢å¼•è®°å½•&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;FOR UPDATE&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;å¹¶å‘åº¦é«˜&lt;/td&gt;
          &lt;td&gt;å¼€é”€å¤§ï¼Œä¼šæœ‰æ­»é”&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç†è§£ MySQL é”æœºåˆ¶çš„æ ¸å¿ƒåœ¨äºç†è§£ &lt;strong&gt;InnoDB çš„è¡Œé”æ˜¯åŸºäºç´¢å¼•å®ç°çš„&lt;/strong&gt;ï¼Œä»¥åŠ &lt;strong&gt;Next-Key Lock æ˜¯è§£å†³å¹»è¯»çš„å…³é”®&lt;/strong&gt;ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†è®¾è®¡ç´¢å¼•å’Œäº‹åŠ¡å¤§å°ï¼Œæ˜¯é¿å…é”æ€§èƒ½é—®é¢˜çš„å…³é”®ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>MySQL InnoDB åœ¨ RR çº§åˆ«ä¸‹è§£å†³å¹»è¯»çš„ä¸¤ç§æ–¹æ¡ˆè¯¦è§£</title>
        <link>https://skylm808.github.io/p/mysql-innodb-%E5%9C%A8-rr-%E7%BA%A7%E5%88%AB%E4%B8%8B%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Fri, 30 Jan 2026 10:56:48 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/mysql-innodb-%E5%9C%A8-rr-%E7%BA%A7%E5%88%AB%E4%B8%8B%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h1 id=&#34;mysql-innodb-åœ¨-rr-çº§åˆ«ä¸‹è§£å†³å¹»è¯»çš„ä¸¤ç§æ–¹æ¡ˆè¯¦è§£&#34;&gt;MySQL InnoDB åœ¨ RR çº§åˆ«ä¸‹è§£å†³å¹»è¯»çš„ä¸¤ç§æ–¹æ¡ˆè¯¦è§£
&lt;/h1&gt;&lt;p&gt;å…³äº &lt;strong&gt;å¹»è¯» (Phantom Read)&lt;/strong&gt;ï¼Œå¾ˆå¤šäººçš„ç†è§£ä»…åœç•™åœ¨â€œæ’å…¥äº†ä¸€æ¡æ–°æ•°æ®â€ï¼Œä½†æ›´æ·±å…¥çš„é—®é¢˜æ˜¯ï¼š&lt;strong&gt;MySQL é»˜è®¤çš„ Repeatable Read (RR) åˆ°åº•æœ‰æ²¡æœ‰å®Œå…¨è§£å†³å¹»è¯»ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼š&lt;strong&gt;å¤§éƒ¨åˆ†è§£å†³äº†ï¼Œä½†æ²¡å®Œå…¨è§£å†³ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;InnoDB ä½¿ç”¨äº†ä¸¤å¥—ä¸åŒçš„æœºåˆ¶æ¥åº”å¯¹ä¸åŒçš„è¯»å–åœºæ™¯ï¼ˆå¿«ç…§è¯» vs å½“å‰è¯»ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-åœºæ™¯ä¸€å¿«ç…§è¯»-snapshot-read&#34;&gt;1. åœºæ™¯ä¸€ï¼šå¿«ç…§è¯» (Snapshot Read)
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;SQL è¯­å¥&lt;/strong&gt;ï¼šæ™®é€šçš„ &lt;code&gt;SELECT * FROM table ...&lt;/code&gt;ï¼ˆä¸åŠ é”ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;æœºåˆ¶mvcc-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶&#34;&gt;æœºåˆ¶ï¼šMVCC (å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)
&lt;/h3&gt;&lt;p&gt;åœ¨ RR çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡å¯åŠ¨åçš„&lt;strong&gt;ç¬¬ä¸€æ¬¡æŸ¥è¯¢&lt;/strong&gt;ä¼šç”Ÿæˆä¸€ä¸ª &lt;strong&gt;Read View (ä¸€è‡´æ€§è§†å›¾)&lt;/strong&gt;ï¼Œåç»­æ‰€æœ‰çš„æŸ¥è¯¢éƒ½å¤ç”¨è¿™ä¸ªè§†å›¾ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆèƒ½è§£å†³å¹»è¯»&#34;&gt;ä¸ºä»€ä¹ˆèƒ½è§£å†³å¹»è¯»ï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å°±åƒæ‹äº†ä¸€å¼ ç…§ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;å³ä½¿åˆ«çš„äº‹åŠ¡ B &lt;strong&gt;æ’å…¥ (Insert)&lt;/strong&gt; äº†å‡ ç™¾æ¡æ–°æ•°æ®å¹¶æäº¤äº†ã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡ A å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œæ‹¿ç€æ‰‹é‡Œçš„ Read View ä¸€æ¯”å¯¹ï¼Œå‘ç°è¿™äº›æ–°æ•°æ®çš„äº‹åŠ¡ ID (&lt;code&gt;DB_TRX_ID&lt;/code&gt;) æ¯”è‡ªå·±çš„ Read View è¿˜å¤§ï¼ˆå±äºæœªæ¥æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šäº‹åŠ¡ A æ ¹æœ¬çœ‹ä¸è§è¿™äº›æ–°æ•°æ®ã€‚å¯¹å®ƒæ¥è¯´ï¼Œå¹»è¯»ä»æœªå‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šåœ¨çº¯ç²¹çš„å¿«ç…§è¯»åœºæ™¯ä¸‹ï¼Œ&lt;strong&gt;MVCC å®Œç¾è§£å†³äº†å¹»è¯»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-åœºæ™¯äºŒå½“å‰è¯»-current-read&#34;&gt;2. åœºæ™¯äºŒï¼šå½“å‰è¯» (Current Read)
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;SQL è¯­å¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT ... LOCK IN SHARE MODE&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UPDATE ...&lt;/code&gt; / &lt;code&gt;DELETE ...&lt;/code&gt; / &lt;code&gt;INSERT ...&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šè¿™äº›æ“ä½œéœ€è¦è¯»å–æ•°æ®åº“&lt;strong&gt;æœ€æ–°ã€æœ€çœŸå®&lt;/strong&gt;çš„æ•°æ®ï¼Œä¸èƒ½çœ‹è€ç…§ç‰‡ï¼Œå¦åˆ™ä¼šè¦†ç›–åˆ«äººçš„æ›´æ–°ï¼Œå¯¼è‡´æ•°æ®é”™ä¹±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœºåˆ¶next-key-lock-ä¸´é”®é”&#34;&gt;æœºåˆ¶ï¼šNext-Key Lock (ä¸´é”®é”)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Next-Key Lock = Record Lock (è¡Œé”) + Gap Lock (é—´éš™é”)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;InnoDB ä¸ä»…é”ä½æ‰«æåˆ°çš„&lt;strong&gt;è¡Œ&lt;/strong&gt;ï¼Œè¿˜ä¼šé”ä½è¡Œä¸è¡Œä¹‹é—´çš„&lt;strong&gt;é—´éš™&lt;/strong&gt;ï¼Œå½»åº•æœç»åˆ«äººåœ¨è¿™ä¸ªèŒƒå›´å†…â€œæ’é˜Ÿâ€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•é”æ­»å¹»è¯»&#34;&gt;æ¡ˆä¾‹æ¼”ç¤ºï¼šå¦‚ä½•é”æ­»å¹»è¯»ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Next-Key Lock&lt;/strong&gt; çš„æ ¸å¿ƒåœ¨äºâ€œå·¦å¼€å³é—­â€åŒºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾è¡¨é‡Œç°æœ‰æ•°æ®ï¼š&lt;code&gt;id = 3, 5&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡ A æ‰§è¡Œ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;table&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;WHERE&lt;/span&gt; id &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;FOR&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;UPDATE&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;em&gt;æ³¨ï¼šè™½ç„¶è¿™é‡Œæ˜¯ç­‰å€¼æŸ¥è¯¢ï¼Œä½†å¦‚æœ id ä¸æ˜¯ä¸»é”®/å”¯ä¸€ç´¢å¼•ï¼Œæˆ–è€…æŸ¥è¯¢æ¡ä»¶æ˜¯èŒƒå›´ï¼ŒInnoDB ä¾ç„¶ä¼šåŠ é—´éš™é”ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£èŒƒå›´é”ï¼Œæˆ‘ä»¬å‡è®¾è¿™æ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢æˆ–è€…éå”¯ä¸€ç´¢å¼•æŸ¥è¯¢ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´å…¸å‹çš„èŒƒå›´æŸ¥è¯¢ä¾‹å­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;SELECT&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;table&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;WHERE&lt;/span&gt; id &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;FOR&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;UPDATE&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;InnoDB çš„é”å®šèŒƒå›´ (Next-Key Lock)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•é”&lt;/strong&gt;ï¼šé”ä½ &lt;code&gt;id = 5&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—´éš™é”&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é”ä½ &lt;code&gt;(3, 5]&lt;/code&gt;ï¼šå³ 3 åˆ° 5 ä¹‹é—´çš„ç©ºéš™ï¼ˆå« 5ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é”ä½ &lt;code&gt;(5, +âˆ)&lt;/code&gt;ï¼š5 ä¹‹åçš„æ— é™ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š
æ­¤æ—¶ï¼Œå¦‚æœäº‹åŠ¡ B å°è¯•æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;INSERT 4&lt;/strong&gt;ï¼šè½åœ¨ &lt;code&gt;(3, 5]&lt;/code&gt; åŒºé—´ -&amp;gt; &lt;strong&gt;é˜»å¡ (Blocked)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INSERT 10&lt;/strong&gt;ï¼šè½åœ¨ &lt;code&gt;(5, +âˆ)&lt;/code&gt; åŒºé—´ -&amp;gt; &lt;strong&gt;é˜»å¡ (Blocked)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INSERT 1&lt;/strong&gt;ï¼šè½åœ¨ &lt;code&gt;(-âˆ, 3]&lt;/code&gt; åŒºé—´ï¼ˆæ²¡è¢«é”ï¼‰ -&amp;gt; &lt;strong&gt;âœ… æˆåŠŸæ’å…¥ï¼&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼š
Next-Key Lock ç²¾å‡†åœ°é”ä½äº†&lt;strong&gt;æŸ¥è¯¢æ¡ä»¶è¦†ç›–çš„èŒƒå›´åŠå…¶åç»­é—´éš™&lt;/strong&gt;ã€‚å®ƒå¹¶æ²¡æœ‰é”ä½å…¨è¡¨ï¼Œä¸ç›¸å…³çš„åŒºé—´ï¼ˆæ¯”å¦‚ id=1ï¼‰ä¾ç„¶å¯ä»¥è‡ªç”±æ’å…¥ï¼Œæ—¢é˜²æ­¢äº†å¹»è¯»ï¼Œåˆä¿ç•™äº†ä¸€å®šçš„å¹¶å‘æ€§èƒ½ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;3-ç‰¹æ®Šåœºæ™¯å¹»è¯»åœ¨å“ªé‡Œéœ²é¦…äº†&#34;&gt;3. ç‰¹æ®Šåœºæ™¯ï¼šå¹»è¯»åœ¨å“ªé‡Œâ€œéœ²é¦…â€äº†ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ MVCC å’Œ Next-Key Lock å®ˆå«æ£®ä¸¥ï¼Œä½†åœ¨ä¸€ç§æå…¶åˆé’»çš„â€œå…ˆæŸ¥åæ”¹â€åœºæ™¯ä¸‹ï¼Œå¹»è¯»ä¾ç„¶ä¼šå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¬ºéª—åœºæ™¯å¤ç°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;ï¼šè¡¨ä¸­æ—  &lt;code&gt;id=3&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ A&lt;/strong&gt;ï¼š&lt;code&gt;SELECT * FROM table WHERE id=3;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;ç»“æœ&lt;/em&gt;ï¼šç©ºé›†ï¼ˆMVCC å¿«ç…§è¯»ï¼Œæ­£å¸¸ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;çŠ¶æ€&lt;/em&gt;ï¼šç”Ÿæˆäº† Read Viewï¼Œæ­¤æ—¶çœ‹ä¸åˆ° id=3ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ B&lt;/strong&gt;ï¼š&lt;code&gt;INSERT INTO table VALUES (3); COMMIT;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;åŠ¨ä½œ&lt;/em&gt;ï¼šæ’å…¥å¹¶æäº¤ã€‚å› ä¸ºäº‹åŠ¡ A æ²¡åŠ é”ï¼ˆåªæ˜¯å¿«ç…§è¯»ï¼‰ï¼Œæ‰€ä»¥äº‹åŠ¡ B æˆåŠŸæ’å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;çŠ¶æ€&lt;/em&gt;ï¼šæ•°æ®åº“ç‰©ç†æ–‡ä»¶é‡Œæœ‰äº† id=3ï¼Œå…¶ &lt;code&gt;DB_TRX_ID&lt;/code&gt; = äº‹åŠ¡ Bã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ A&lt;/strong&gt;ï¼š&lt;code&gt;UPDATE table SET name=&#39;Hack&#39; WHERE id=3;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;åŠ¨ä½œ&lt;/em&gt;ï¼š&lt;strong&gt;UPDATE æ˜¯å½“å‰è¯»ï¼&lt;/strong&gt; å®ƒå¿…é¡»è¯»å–ç‰©ç†ä¸Šæœ€æ–°çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç»“æœ&lt;/em&gt;ï¼šæ›´æ–°æˆåŠŸï¼&lt;/li&gt;
&lt;li&gt;&lt;em&gt;å…³é”®å˜åŒ–&lt;/em&gt;ï¼š&lt;strong&gt;è¿™è¡Œæ•°æ®çš„ &lt;code&gt;DB_TRX_ID&lt;/code&gt; è¢«ä¿®æ”¹æˆäº†äº‹åŠ¡ A è‡ªå·±çš„ IDï¼&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ A&lt;/strong&gt;ï¼š&lt;code&gt;SELECT * FROM table WHERE id=3;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;çµå¼‚äº‹ä»¶&lt;/em&gt;ï¼šæŸ¥åˆ°äº†ï¼&lt;/li&gt;
&lt;li&gt;&lt;em&gt;åŸå› &lt;/em&gt;ï¼šå†æ¬¡å¤ç”¨ Read View è¿›è¡Œæ£€æŸ¥æ—¶ï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®çš„ &lt;code&gt;DB_TRX_ID&lt;/code&gt; æ˜¯äº‹åŠ¡ A è‡ªå·±ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¦åˆ MVCC è§„åˆ™ä¸€ï¼š&lt;strong&gt;â€œæˆ‘è‡ªå·±ä¿®æ”¹çš„æ•°æ®å¯è§â€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ï¼Œå¹»è¯»å‘ç”Ÿäº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼š
è¿™å¹¶ä¸æ˜¯ Bugï¼Œè€Œæ˜¯ MVCC çš„è§„åˆ™é€»è¾‘è‡ªæ´½çš„ç»“æœã€‚è¿™ä¹Ÿæé†’æˆ‘ä»¬ï¼š&lt;strong&gt;ä¸è¦åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œæ··ç”¨å¿«ç…§è¯»å’Œå½“å‰è¯»æ¥å¤„ç†åŒä¸€æ‰¹æ•°æ®&lt;/strong&gt;ã€‚å¦‚æœä¸šåŠ¡é€»è¾‘éœ€è¦â€œå…ˆæŸ¥åæ”¹â€ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢å°±å¿…é¡»ä½¿ç”¨ &lt;code&gt;FOR UPDATE&lt;/code&gt; åŠ é”ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-æœ€ç»ˆç»“è®º&#34;&gt;4. æœ€ç»ˆç»“è®º
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;â€œMySQL çš„ RR çº§åˆ«æœ‰æ²¡æœ‰è§£å†³å¹»è¯»ï¼Ÿâ€&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºæ™®é€šæŸ¥è¯¢ (å¿«ç…§è¯»)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é  &lt;strong&gt;MVCC&lt;/strong&gt; è§£å†³ã€‚é€šè¿‡å¤ç”¨ Read Viewï¼Œåƒçœ‹è€ç…§ç‰‡ä¸€æ ·å±è”½äº†å¤–ç•Œçš„æ’å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºåŠ é”æŸ¥è¯¢/ä¿®æ”¹ (å½“å‰è¯»)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é  &lt;strong&gt;Next-Key Lock&lt;/strong&gt; è§£å†³ã€‚é€šè¿‡é”ä½è¡Œå’Œé—´éš™ï¼Œç‰©ç†ä¸Šé˜»æ­¢äº†æ–°æ•°æ®çš„æ’å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¾‹å¤–æƒ…å†µ&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªäº‹åŠ¡å…ˆè¿›è¡Œå¿«ç…§è¯»ï¼Œç„¶åè¿›è¡Œå½“å‰è¯»ï¼ˆUPDATE/DELETEï¼‰ï¼Œå†è¿›è¡Œå¿«ç…§è¯»ï¼Œå¯èƒ½ä¼šå› ä¸ºè‡ªå·±æ›´æ–°äº†åˆ«äº‹åŠ¡æ’å…¥çš„æ•°æ®ï¼Œå¯¼è‡´å¹»è¯»æ˜¾å½¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>MySQL InnoDB äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ MVCC æœºåˆ¶è¯¦è§£</title>
        <link>https://skylm808.github.io/p/mysql-innodb-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E-mvcc-%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Thu, 29 Jan 2026 22:31:48 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/mysql-innodb-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E-mvcc-%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h1 id=&#34;mysql-innodb-äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸-mvcc-æœºåˆ¶è¯¦è§£&#34;&gt;MySQL InnoDB äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ MVCC æœºåˆ¶è¯¦è§£
&lt;/h1&gt;&lt;p&gt;åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œ&lt;strong&gt;äº‹åŠ¡ï¼ˆTransactionï¼‰&lt;/strong&gt; æ˜¯ä¸€ç»„åŸå­æ€§çš„ SQL æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚å½“å¤šä¸ªäº‹åŠ¡åŒæ—¶æ‰§è¡Œæ—¶ï¼ˆå¹¶å‘ï¼‰ï¼Œå¯èƒ½ä¼šå‡ºç°å„ç§æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;MySQL çš„ InnoDB å­˜å‚¨å¼•æ“æä¾›äº†å››ç§&lt;strong&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ˆIsolation Levelï¼‰&lt;/strong&gt;ï¼Œç”¨æ¥å¹³è¡¡&lt;strong&gt;æ•°æ®å®‰å…¨æ€§&lt;/strong&gt;ï¼ˆä¸€è‡´æ€§ï¼‰å’Œ&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼ˆå¹¶å‘æ€§ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-å¹¶å‘äº‹åŠ¡å¯èƒ½å¸¦æ¥çš„é—®é¢˜&#34;&gt;1. å¹¶å‘äº‹åŠ¡å¯èƒ½å¸¦æ¥çš„é—®é¢˜
&lt;/h2&gt;&lt;p&gt;åœ¨äº†è§£éš”ç¦»çº§åˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å¦‚æœä¸éš”ç¦»ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è„è¯» (Dirty Read)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡ A è¯»åˆ°äº†äº‹åŠ¡ B &lt;strong&gt;è¿˜æ²¡æœ‰æäº¤&lt;/strong&gt;çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;é£é™©&lt;/em&gt;ï¼šå¦‚æœäº‹åŠ¡ B å›æ»šäº†ï¼Œäº‹åŠ¡ A è¯»åˆ°çš„å°±æ˜¯â€œè„æ•°æ®â€ï¼ˆå®é™…ä¸Šä»æœªå­˜åœ¨è¿‡çš„æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯é‡å¤è¯» (Non-repeatable Read)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡ A åœ¨è‡ªå·±çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆåä¸¤æ¬¡è¯»å–åŒä¸€æ¡è®°å½•ã€‚åœ¨ä¸¤æ¬¡è¯»å–ä¹‹é—´ï¼Œäº‹åŠ¡ B &lt;strong&gt;ä¿®æ”¹&lt;/strong&gt;äº†è¿™æ¡è®°å½•å¹¶æäº¤äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç»“æœ&lt;/em&gt;ï¼šäº‹åŠ¡ A å‘ç°ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®ä¸ä¸€æ ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;å¹»è¯» (Phantom Read)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡ A æŒ‰æŸä¸ªæ¡ä»¶æŸ¥è¯¢ï¼ˆä¾‹å¦‚â€œæ‰€æœ‰åˆ†æ•°ä¸º 100 åˆ†çš„å­¦ç”Ÿâ€ï¼‰ï¼Œç¬¬ä¸€æ¬¡æŸ¥åˆ°äº† 5 ä¸ªäººã€‚æ­¤æ—¶ï¼Œäº‹åŠ¡ B &lt;strong&gt;æ’å…¥&lt;/strong&gt;äº†ä¸€ä¸ªæ–°çš„ 100 åˆ†å­¦ç”Ÿå¹¶æäº¤ã€‚äº‹åŠ¡ A å†æ¬¡æŒ‰ç›¸åŒæ¡ä»¶æŸ¥è¯¢ï¼Œå‘ç°å˜æˆäº† 6 ä¸ªäººã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç»“æœ&lt;/em&gt;ï¼šå°±åƒäº§ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œå¤šï¼ˆæˆ–å°‘ï¼‰äº†ä¸€äº›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ’¡ æ ¸å¿ƒåŒºåˆ«è¾¨æï¼šä¸å¯é‡å¤è¯» vs å¹»è¯»&lt;/strong&gt;
å¾ˆå¤šäººå®¹æ˜“æ··æ·†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå…³é”®åŒºåˆ«åœ¨äº &lt;strong&gt;â€œå˜çš„æ˜¯ä»€ä¹ˆâ€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯é‡å¤è¯»&lt;/strong&gt; å…³æ³¨çš„æ˜¯ &lt;strong&gt;ä¿®æ”¹ (UPDATE)&lt;/strong&gt;ã€‚å³ï¼š&lt;strong&gt;ä»¥å‰è¯»åˆ°çš„æ•°æ®å˜äº†&lt;/strong&gt;ã€‚è§£å†³å®ƒé€šå¸¸åªéœ€è¦é”ä½è¡Œï¼ˆè¡Œé”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹»è¯»&lt;/strong&gt; å…³æ³¨çš„æ˜¯ &lt;strong&gt;æ’å…¥ (INSERT)&lt;/strong&gt;ã€‚å³ï¼š&lt;strong&gt;ä»¥å‰æ²¡è¯»åˆ°çš„æ•°æ®çªç„¶å†’å‡ºæ¥äº†&lt;/strong&gt;ï¼ˆæˆ–è€…åŸæœ¬æœ‰çš„æ¶ˆå¤±äº†ï¼‰ã€‚è§£å†³å®ƒéœ€è¦é”ä½è¡Œä¹‹é—´çš„ç©ºéš™ï¼ˆé—´éš™é”ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-å››ç§éš”ç¦»çº§åˆ«è¯¦è§£&#34;&gt;2. å››ç§éš”ç¦»çº§åˆ«è¯¦è§£
&lt;/h2&gt;&lt;p&gt;MySQL æŒ‰ç…§ SQL æ ‡å‡†å®šä¹‰äº†å››ç§éš”ç¦»çº§åˆ«ï¼Œä¸¥æ ¼ç¨‹åº¦ä»ä½åˆ°é«˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;21-read-uncommitted-è¯»æœªæäº¤&#34;&gt;2.1 READ UNCOMMITTED (è¯»æœªæäº¤)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ä½çš„éš”ç¦»çº§åˆ«ã€‚ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–å¦ä¸€ä¸ª&lt;strong&gt;æœªæäº¤&lt;/strong&gt;äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿—è§£é‡Š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°±åƒä½ åœ¨å†™ä½œä¸šï¼ˆäº‹åŠ¡ Bï¼‰ï¼Œè¿˜æ²¡äº¤ç»™è€å¸ˆï¼ˆæœªæäº¤ï¼‰ï¼ŒåŒæ¡Œï¼ˆäº‹åŠ¡ Aï¼‰å°±å·çœ‹äº†ä½ çš„ç­”æ¡ˆã€‚å¦‚æœä½ å‘ç°å†™é”™äº†æ“¦æ‰é‡å†™ï¼ˆå›æ»šï¼‰ï¼ŒåŒæ¡ŒæŠ„çš„å°±æ˜¯é”™çš„ï¼ˆè„è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜åœ¨é—®é¢˜&lt;/strong&gt;ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæå°‘ä½¿ç”¨ï¼Œæ€§èƒ½è™½é«˜ä½†æä¸å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;22-read-committed-è¯»å·²æäº¤--rc&#34;&gt;2.2 READ COMMITTED (è¯»å·²æäº¤ / RC)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–å·²ç»&lt;strong&gt;æäº¤&lt;/strong&gt;çš„æ•°æ®ã€‚è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ï¼ˆå¦‚ Oracle, PostgreSQLï¼‰çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿—è§£é‡Š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ ï¼ˆäº‹åŠ¡ Aï¼‰åœ¨æŸ¥è´¦ï¼Œçœ‹åˆ°ä½™é¢æ˜¯ 100 å…ƒã€‚æ­¤æ—¶ä½ è€å©†ï¼ˆäº‹åŠ¡ Bï¼‰èŠ±äº† 50 å…ƒå¹¶ç¡®è®¤æ”¯ä»˜ï¼ˆæäº¤ï¼‰ã€‚ä½ å†æ¬¡æŸ¥è´¦ï¼Œå‘ç°ä½™é¢å˜æˆäº† 50 å…ƒã€‚&lt;/li&gt;
&lt;li&gt;è™½ç„¶é¿å…äº†è¯»è‰ç¨¿ï¼ˆè„è¯»ï¼‰ï¼Œä½†åŒä¸€ä¸ªäº‹åŠ¡é‡Œæ•°æ®å˜äº†ï¼Œè®©ä½ å¾ˆå›°æƒ‘ï¼ˆä¸å¯é‡å¤è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜åœ¨é—®é¢˜&lt;/strong&gt;ï¼šä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³äº†&lt;/strong&gt;ï¼šè„è¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;23-repeatable-read-å¯é‡å¤è¯»--rr--mysql-é»˜è®¤çº§åˆ«&#34;&gt;2.3 REPEATABLE READ (å¯é‡å¤è¯» / RR) â€”â€” &lt;strong&gt;MySQL é»˜è®¤çº§åˆ«&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šç¡®ä¿åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒæ ·çš„æ•°æ®ç»“æœæ˜¯ä¸€æ ·çš„ã€‚å³ä½¿å…¶ä»–äº‹åŠ¡æäº¤äº†ä¿®æ”¹ï¼Œæœ¬äº‹åŠ¡çœ‹åˆ°çš„ä¾ç„¶æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„çŠ¶æ€ï¼ˆå¿«ç…§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿—è§£é‡Š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ ï¼ˆäº‹åŠ¡ Aï¼‰æ‰“å¼€è´¦æœ¬å¼€å§‹æŸ¥è´¦ï¼ˆå¼€å¯äº‹åŠ¡ï¼‰ï¼Œæ­¤æ—¶ä½™é¢ 100 å…ƒã€‚è¿™å°±å¥½æ¯”ä½ å¯¹è´¦æœ¬æ‹äº†ä¸€å¼ &lt;strong&gt;ç…§ç‰‡&lt;/strong&gt;ã€‚æ— è®ºä½ è€å©†ï¼ˆäº‹åŠ¡ Bï¼‰æ€ä¹ˆèŠ±é’±ã€æ€ä¹ˆæäº¤ï¼Œä½ ç›¯ç€ç…§ç‰‡çœ‹ï¼Œä½™é¢æ°¸è¿œæ˜¯ 100 å…ƒã€‚ç›´åˆ°ä½ è‡ªå·±ç»“æŸæŸ¥è´¦ï¼ˆæäº¤/å›æ»šï¼‰ï¼Œæ”¾ä¸‹ç…§ç‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚æœºåˆ¶&lt;/strong&gt;ï¼šInnoDB ä¸»è¦é€šè¿‡ &lt;strong&gt;MVCC (å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)&lt;/strong&gt; æ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³äºå¹»è¯»&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;SQL æ ‡å‡†è§„å®š RR çº§åˆ«æ— æ³•è§£å†³å¹»è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½†æ˜¯&lt;/strong&gt;ï¼ŒMySQL çš„ InnoDB å¼•æ“éå¸¸å¼ºå¤§ï¼Œå®ƒåœ¨ RR çº§åˆ«ä¸‹é€šè¿‡ &lt;strong&gt;Next-Key Lock (é—´éš™é”)&lt;/strong&gt; æœºåˆ¶ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…äº†å¹»è¯»çš„å‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³äº†&lt;/strong&gt;ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;24-serializable-ä¸²è¡ŒåŒ–&#34;&gt;2.4 SERIALIZABLE (ä¸²è¡ŒåŒ–)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šæœ€é«˜çš„éš”ç¦»çº§åˆ«ã€‚å®ƒå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼ˆæ’é˜Ÿï¼‰ï¼Œé€šè¿‡å¼ºåˆ¶å¯¹è¯»å–çš„æ•°æ®åŠ é”ï¼Œé¿å…ä¸€åˆ‡å†²çªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šä¿—è§£é‡Š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ ï¼ˆäº‹åŠ¡ Aï¼‰è¦æŸ¥è´¦ï¼Œç³»ç»Ÿç›´æ¥æŠŠè´¦æœ¬é”è¿›ä¿é™©æŸœï¼Œé’¥åŒ™ç»™ä½ ã€‚ä½ è€å©†ï¼ˆäº‹åŠ¡ Bï¼‰æƒ³èŠ±é’±ï¼Ÿå¯¹ä¸èµ·ï¼Œæ’é˜Ÿç­‰ç€ï¼Œç›´åˆ°ä½ æŸ¥å®ŒæŠŠé’¥åŒ™è¿˜å›å»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜åœ¨é—®é¢˜&lt;/strong&gt;ï¼šæ€§èƒ½æå·®ï¼Œå¹¶å‘åº¦æä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³äº†&lt;/strong&gt;ï¼šæ‰€æœ‰å¹¶å‘é—®é¢˜ï¼ˆè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-æ€»ç»“ä¸å¯¹æ¯”&#34;&gt;3. æ€»ç»“ä¸å¯¹æ¯”
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;éš”ç¦»çº§åˆ«&lt;/th&gt;
          &lt;th&gt;è„è¯» (Dirty Read)&lt;/th&gt;
          &lt;th&gt;ä¸å¯é‡å¤è¯» (Non-Repeatable)&lt;/th&gt;
          &lt;th&gt;å¹»è¯» (Phantom Read)&lt;/th&gt;
          &lt;th&gt;æ€§èƒ½&lt;/th&gt;
          &lt;th&gt;å¤‡æ³¨&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Read Uncommitted&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¯èƒ½&lt;/td&gt;
          &lt;td&gt;å¯èƒ½&lt;/td&gt;
          &lt;td&gt;å¯èƒ½&lt;/td&gt;
          &lt;td&gt;æé«˜&lt;/td&gt;
          &lt;td&gt;åŸºæœ¬ä¸ç”¨ï¼Œæ•°æ®ä¸å¯é &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Read Committed&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;å¯èƒ½&lt;/td&gt;
          &lt;td&gt;å¯èƒ½&lt;/td&gt;
          &lt;td&gt;é«˜&lt;/td&gt;
          &lt;td&gt;Oracle/PG é»˜è®¤ï¼Œäº’è”ç½‘å¤§å‚å¸¸ç”¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Repeatable Read&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;å¯èƒ½ (InnoDB å¤§éƒ¨åˆ†é¿å…)&lt;/td&gt;
          &lt;td&gt;ä¸­&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;MySQL é»˜è®¤&lt;/strong&gt;ï¼Œå¤Ÿç”¨ä¸”å®‰å…¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Serializable&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;âŒ é¿å…&lt;/td&gt;
          &lt;td&gt;ä½&lt;/td&gt;
          &lt;td&gt;åªæœ‰æé«˜ä¸€è‡´æ€§è¦æ±‚æ—¶æ‰ç”¨&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-æç®€é€šä¿—æ¡ˆä¾‹ä¹°é™é‡æ‰‹åŠ&#34;&gt;4. æç®€é€šä¿—æ¡ˆä¾‹ï¼šä¹°é™é‡æ‰‹åŠ
&lt;/h2&gt;&lt;p&gt;å‡è®¾å•†åº—é‡Œè¿˜å‰© &lt;strong&gt;1 ä¸ª&lt;/strong&gt; é™é‡ç‰ˆæ‰‹åŠï¼Œåº“å­˜æ˜¾ç¤ºä¸º 1ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¯»æœªæäº¤&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¹°å®¶ A ä¸‹å•äº†ï¼ˆåº“å­˜-1ï¼Œå‰©0ï¼‰ï¼Œè¿˜æ²¡ä»˜æ¬¾ï¼ˆæœªæäº¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¹°å®¶ B ä¸€çœ‹ï¼Œåº“å­˜æ˜¯ 0ï¼Œå¤±æœ›ç¦»å¼€ã€‚&lt;/li&gt;
&lt;li&gt;ç»“æœä¹°å®¶ A æ²¡é’±ä»˜æ¬¾å–æ¶ˆäº†ï¼ˆå›æ»šï¼Œåº“å­˜+1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¹°å®¶ B è¢«å‘äº†&lt;/strong&gt;ï¼ˆè„è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;è¯»å·²æäº¤&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¹°å®¶ A ä¸‹å•å¹¶ä»˜æ¬¾æˆåŠŸï¼ˆæäº¤ï¼Œåº“å­˜å˜ 0ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¹°å®¶ B ç¬¬ä¸€æ¬¡çœ‹åº“å­˜æ˜¯ 1ï¼Œæ­£é«˜å…´å‘¢ï¼Œåˆ·æ–°ç½‘é¡µï¼ˆç¬¬äºŒæ¬¡è¯»ï¼‰ï¼Œåº“å­˜å˜æˆ 0 äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¹°å®¶ B å¿ƒæƒ…å¤§èµ·å¤§è½&lt;/strong&gt;ï¼ˆä¸å¯é‡å¤è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡å¤è¯» (MySQL é»˜è®¤)&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¹°å®¶ B è¿›å…¥è´­ä¹°é¡µé¢ï¼ˆå¼€å¯äº‹åŠ¡ï¼‰ï¼Œçœ‹åˆ°åº“å­˜æ˜¯ 1ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ä¹°å®¶ A æŠ¢å…ˆä¹°èµ°å¹¶ä»˜æ¬¾ï¼ˆåº“å­˜å˜ 0ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¹°å®¶ B åªè¦ä¸åˆ·æ–°é€€å‡ºï¼Œæ€ä¹ˆçœ‹åº“å­˜éƒ½æ˜¯ 1ï¼ˆçœ‹çš„æ˜¯å¿«ç…§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;æ³¨ï¼šè™½ç„¶çœ‹åˆ°çš„è¿˜æ˜¯ 1ï¼Œä½†å¦‚æœä¹°å®¶ B å°è¯•ä¸‹å•ï¼Œæ•°æ®åº“é”æœºåˆ¶ä¼šå‘Šè¯‰ä»–å…¶å®æ²¡è´§äº†ã€‚&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸²è¡ŒåŒ–&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¹°å®¶ B æ­£åœ¨çœ‹æ‰‹åŠè¯¦æƒ…é¡µã€‚&lt;/li&gt;
&lt;li&gt;ä¹°å®¶ A æƒ³ä¸‹å•ï¼Ÿ&lt;strong&gt;å¡ä½ä¸åŠ¨&lt;/strong&gt;ï¼Œç›´åˆ°ä¹°å®¶ B å…³æ‰ç½‘é¡µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å®¶éƒ½è¦ç–¯äº†&lt;/strong&gt;ï¼ˆæ€§èƒ½å¤ªå·®ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;5-æ·±å…¥ç†è§£-mvcc-å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶&#34;&gt;5. æ·±å…¥ç†è§£ MVCC (å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)
&lt;/h2&gt;&lt;p&gt;MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ« &lt;strong&gt;Repeatable Read (RR)&lt;/strong&gt; æ˜¯å¦‚ä½•åšåˆ°â€œå¯é‡å¤è¯»â€ä¸”ä¸åŠ é”å½±å“æ€§èƒ½çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ &lt;strong&gt;MVCC (Multi-Version Concurrency Control)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;51-ä»€ä¹ˆæ˜¯-mvcc&#34;&gt;5.1 ä»€ä¹ˆæ˜¯ MVCCï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒMVCC å°±æ˜¯è®©æ¯è¡Œæ•°æ®éƒ½æ‹¥æœ‰&lt;strong&gt;å¤šä¸ªç‰ˆæœ¬&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»ä¸åŠ é”&lt;/strong&gt;ï¼šè¯»å–æ•°æ®æ—¶ï¼Œä¸åŠ é”ï¼Œè€Œæ˜¯å»è¯»ç¬¦åˆå½“å‰äº‹åŠ¡æ—¶é—´ç‚¹çš„é‚£ä¸ªâ€œæ—§ç‰ˆæœ¬â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™åŠ é”&lt;/strong&gt;ï¼šå†™å…¥æ•°æ®æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;ï¼šæœ€å¤§ç¨‹åº¦æé«˜æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½ï¼Œå®ç°â€œè¯»å†™ä¸å†²çªâ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ“¸ &lt;strong&gt;æ¯”å–»&lt;/strong&gt;ï¼šå°±åƒç»™æ–‡æ¡£åšâ€œç‰ˆæœ¬æ§åˆ¶â€ï¼ˆå¦‚ Gitï¼‰ã€‚ä½ æ­£åœ¨ç¼–è¾‘ v2 ç‰ˆï¼Œåˆ«äººå¯ä»¥æ”¾å¿ƒè¯» v1 ç‰ˆï¼Œäº’ä¸å¹²æ‰°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;52-mvcc-çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶&#34;&gt;5.2 MVCC çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶
&lt;/h3&gt;&lt;p&gt;InnoDB å®ç° MVCC ä¾èµ–ä¸‰ä¸ªä¸œè¥¿ï¼š&lt;strong&gt;éšå¼å­—æ®µ&lt;/strong&gt;ã€&lt;strong&gt;Undo Log&lt;/strong&gt; å’Œ &lt;strong&gt;Read View&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-éšå¼å­—æ®µ&#34;&gt;1. éšå¼å­—æ®µ
&lt;/h4&gt;&lt;p&gt;æ¯è¡Œè®°å½•é™¤äº†ä½ å®šä¹‰çš„åˆ—ä¹‹å¤–ï¼ŒInnoDB ä¼šæ‚„æ‚„åŠ å‡ ä¸ªéšè—åˆ—ï¼Œæœ€é‡è¦çš„ä¸¤ä¸ªæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DB_TRX_ID&lt;/code&gt; (äº‹åŠ¡ ID) â€”â€” â€œæœ€æ–°ä¿®æ”¹è€…çš„èº«ä»½è¯â€&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒè®°å½•äº†&lt;strong&gt;æœ€åä¸€æ¬¡&lt;/strong&gt;ä¿®æ”¹ï¼ˆæˆ–æ’å…¥ï¼‰è¿™è¡Œè®°å½•çš„äº‹åŠ¡ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå®ƒæ ‡è¯†çš„æ˜¯&lt;strong&gt;å½“å‰è¿™è¡Œæ•°æ®å†…å®¹&lt;/strong&gt;æ˜¯ç”±å“ªä¸ªäº‹åŠ¡ç”Ÿæˆçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ã€åœºæ™¯ä¸¾ä¾‹ã€‘&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;äº‹åŠ¡ A (ID=10) æ’å…¥äº†ä¸€è¡Œæ•°æ® &amp;ldquo;Name: Jack&amp;rdquo;ã€‚æ­¤æ—¶è¿™è¡Œæ•°æ®çš„ &lt;code&gt;DB_TRX_ID&lt;/code&gt; å°±æ˜¯ &lt;strong&gt;10&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åæ¥ï¼Œäº‹åŠ¡ B (ID=20) æŠŠ &amp;ldquo;Jack&amp;rdquo; æ”¹æˆäº† &amp;ldquo;Rose&amp;rdquo;ã€‚æ­¤æ—¶è¿™è¡Œæ•°æ®çš„ &lt;code&gt;DB_TRX_ID&lt;/code&gt; å°±å˜æˆäº† &lt;strong&gt;20&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šå®ƒå°±åƒå•†å“çš„â€œç”Ÿäº§æ‰¹å·â€ï¼Œæ ‡è®°äº†&lt;strong&gt;å½“å‰æœ€æ–°ç‰ˆæ•°æ®&lt;/strong&gt;æ˜¯ç”±å“ªä¸ªäº‹åŠ¡äº§ç”Ÿçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DB_ROLL_PTR&lt;/code&gt; (å›æ»šæŒ‡é’ˆ) â€”â€” â€œç©¿è¶Šå›æ—§ç‰ˆçš„æ—¶å…‰éš§é“â€&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ Undo Log ä¸­è¿™è¡Œæ•°æ®çš„&lt;strong&gt;ä¸Šä¸€ä¸ªç‰ˆæœ¬&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å®ƒï¼Œæ•°æ®åº“å¯ä»¥åƒâ€œç©¿ç³–è‘«èŠ¦â€ä¸€æ ·ï¼Œé¡ºè—¤æ‘¸ç“œæ‰¾åˆ°è¿™è¡Œæ•°æ®ä¹‹å‰çš„æ‰€æœ‰å†å²çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ã€åœºæ™¯ä¸¾ä¾‹ã€‘&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;å½“äº‹åŠ¡ B æŠŠ &amp;ldquo;Jack&amp;rdquo; æ”¹æˆ &amp;ldquo;Rose&amp;rdquo; æ—¶ï¼ŒMySQL ä¸ä¼šç›´æ¥æŠŠ &amp;ldquo;Jack&amp;rdquo; åˆ äº†ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä¼šå…ˆæŠŠ &amp;ldquo;Jack&amp;rdquo; è¿™ä¸ªæ—§ç‰ˆæœ¬æ‹·è´ä¸€ä»½æ‰”è¿› &lt;strong&gt;Undo Log&lt;/strong&gt; é‡Œã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œç”± &amp;ldquo;Rose&amp;rdquo; è¿™è¡Œæ–°æ•°æ®èº«ä¸Šçš„ &lt;code&gt;DB_ROLL_PTR&lt;/code&gt; æŒ‡å‘ Undo Log é‡Œçš„ &amp;ldquo;Jack&amp;rdquo;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆæœ&lt;/strong&gt;ï¼šæ–°æ•°æ® (Rose) -&amp;gt; æ‹¿ç€ç»³å­ (æŒ‡é’ˆ) -&amp;gt; æ‹´ç€æ—§æ•°æ® (Jack)ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DB_ROW_ID&lt;/code&gt; (è¡Œ ID)&lt;/strong&gt;ï¼šå¦‚æœä½ æ²¡è®¾ä¸»é”®ï¼ŒInnoDB å°±ç”¨å®ƒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-undo-log-å›æ»šæ—¥å¿—--æ•°æ®çš„ç‰ˆæœ¬é“¾&#34;&gt;2. Undo Log (å›æ»šæ—¥å¿—) â€”â€” æ•°æ®çš„â€œç‰ˆæœ¬é“¾â€
&lt;/h4&gt;&lt;p&gt;å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ—§æ•°æ®ä¸ä¼šç«‹åˆ»æ¶ˆå¤±ï¼Œè€Œæ˜¯è¢«æ”¾è¿›äº† &lt;strong&gt;Undo Log&lt;/strong&gt;ã€‚
é€šè¿‡ &lt;code&gt;DB_ROLL_PTR&lt;/code&gt; æŒ‡é’ˆï¼Œæ–°è€æ•°æ®è¿æˆäº†ä¸€ä¸ª&lt;strong&gt;ç‰ˆæœ¬é“¾&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ã€å›¾è§£ï¼šç‰ˆæœ¬é“¾æ˜¯å¦‚ä½•å½¢æˆçš„ã€‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€è¡Œæ•°æ® &lt;code&gt;id=1, name=A&lt;/code&gt;ï¼Œéšæ—¶é—´å‘ç”Ÿäº†ä¸‰æ¬¡å˜åŒ–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;ï¼šäº‹åŠ¡ 100 æ’å…¥æ•°æ® &amp;ldquo;A&amp;rdquo;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ¬¡ä¿®æ”¹&lt;/strong&gt;ï¼šäº‹åŠ¡ 200 æŠŠ &amp;ldquo;A&amp;rdquo; æ”¹ä¸º &amp;ldquo;B&amp;rdquo;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ¬¡ä¿®æ”¹&lt;/strong&gt;ï¼šäº‹åŠ¡ 300 æŠŠ &amp;ldquo;B&amp;rdquo; æ”¹ä¸º &amp;ldquo;C&amp;rdquo;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å†…å­˜ä¸­çš„è®°å½•ï¼ˆæœ€æ–°ç‰ˆï¼‰ä¸ Undo Logï¼ˆå†å²ç‰ˆï¼‰çš„è¿æ¥å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€å†…å­˜ä¸­çš„æœ€æ–°è®°å½•ã€‘
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| Name: C                | &amp;lt;--- å½“å‰æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_TRX_ID: 300         | &amp;lt;--- æœ€è¿‘æ˜¯è¢«äº‹åŠ¡ 300 æ”¹çš„
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_ROLL_PTR: 0x3333    | ---+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------    | æŒ‡å‘ä¸Šä¸€ç‰ˆ
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                              |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       +----------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ã€Undo Log ä¸­çš„å†å²è®°å½•ã€‘
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| Name: B                | &amp;lt;--- å†å²ç‰ˆæœ¬ 1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_TRX_ID: 200         | &amp;lt;--- å½“æ—¶æ˜¯è¢«äº‹åŠ¡ 200 æ”¹çš„
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_ROLL_PTR: 0x2222    | ---+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------    | æŒ‡å‘æ›´æ—©çš„ä¸€ç‰ˆ
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                              |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       +----------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       |
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       v
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| Name: A                | &amp;lt;--- å†å²ç‰ˆæœ¬ 2 (æœ€æ—©)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_TRX_ID: 100         | &amp;lt;--- å½“æ—¶æ˜¯è¢«äº‹åŠ¡ 100 æ’å…¥çš„
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;| DB_ROLL_PTR: null      | &amp;lt;--- æ²¡æœ‰æ›´æ—©çš„äº†
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;--------------------------
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è§£è¯»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MVCC å°±æ˜¯é ç€è¿™ä¸ªé“¾æ¡ï¼Œæ ¹æ® Read View è§„åˆ™ï¼Œåˆ¤æ–­è‡ªå·±è¯¥è¯»å“ªä¸€ä¸ªæ–¹å—é‡Œçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœäº‹åŠ¡ 300 è¿˜æ²¡æäº¤ï¼Œåˆ«çš„äº‹åŠ¡æ¥çœ‹ï¼Œå‘ç° ID=300 è¿˜æ˜¯æ´»è·ƒçš„ï¼ˆä¸å¯è§ï¼‰ï¼Œå°±ä¼šé¡ºç€ &lt;code&gt;0x3333&lt;/code&gt; æ‰¾ä¸‹å»ï¼Œè¯»åˆ° &amp;ldquo;Name: B&amp;rdquo;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-read-view-è¯»è§†å›¾--æ•°æ®çš„è£åˆ¤&#34;&gt;3. Read View (è¯»è§†å›¾) â€”â€” æ•°æ®çš„â€œè£åˆ¤â€
&lt;/h4&gt;&lt;p&gt;å½“äº‹åŠ¡è¿›è¡Œ&lt;strong&gt;å¿«ç…§è¯»&lt;/strong&gt;ï¼ˆæ™®é€šçš„ &lt;code&gt;SELECT&lt;/code&gt;ï¼‰æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª &lt;strong&gt;Read View&lt;/strong&gt;ã€‚å®ƒå†³å®šäº†ä½ èƒ½çœ‹åˆ°ç‰ˆæœ¬é“¾ä¸Šçš„å“ªä¸€ä¸ªç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;Read View åŒ…å«æ ¸å¿ƒä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;m_ids&lt;/code&gt;&lt;/strong&gt;ï¼šç”Ÿæˆ Read View æ—¶ï¼Œç³»ç»Ÿé‡Œæ‰€æœ‰**æ´»è·ƒï¼ˆæ²¡æäº¤ï¼‰**çš„äº‹åŠ¡ ID åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;min_trx_id&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;m_ids&lt;/code&gt; é‡Œæœ€å°çš„ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max_trx_id&lt;/code&gt;&lt;/strong&gt;ï¼šç”Ÿæˆ Read View æ—¶ï¼Œç³»ç»Ÿå°†åˆ†é…ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;creator_trx_id&lt;/code&gt;&lt;/strong&gt;ï¼šå‘èµ·è¿™ä¸ªæŸ¥è¯¢çš„äº‹åŠ¡ IDã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;53-æ ¸å¿ƒé€»è¾‘ç‰ˆæœ¬å¯è§æ€§ç®—æ³•&#34;&gt;5.3 æ ¸å¿ƒé€»è¾‘ï¼šç‰ˆæœ¬å¯è§æ€§ç®—æ³•
&lt;/h3&gt;&lt;p&gt;äº‹åŠ¡å»è¯»ä¸€è¡Œæ•°æ®æ—¶ï¼Œæ€ä¹ˆåˆ¤æ–­èƒ½ä¸èƒ½çœ‹åˆ°ï¼Ÿè¿™éœ€è¦æ‹¿è¿™è¡Œæ•°æ®çš„ &lt;strong&gt;äº‹åŠ¡ID&lt;/strong&gt; (&lt;code&gt;DB_TRX_ID&lt;/code&gt;) å»è·Ÿæˆ‘çš„ &lt;strong&gt;Read View&lt;/strong&gt; å¯¹ç…§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å½»åº•æ˜ç™½ï¼Œæˆ‘ä»¬æ¥è®¾å®šä¸€ä¸ªå…·ä½“çš„**ã€å®æˆ˜åœºæ™¯ã€‘**ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘æ˜¯è°&lt;/strong&gt;ï¼šäº‹åŠ¡ ID = &lt;strong&gt;300&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å½“æ—¶çš„å±€åŠ¿ (Read View)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;m_ids&lt;/code&gt; (æ´»è·ƒåˆ—è¡¨)&lt;/strong&gt;ï¼š&lt;strong&gt;[100, 200]&lt;/strong&gt;ã€‚æ„æ€æ˜¯ï¼šå½“æˆ‘ç”Ÿæˆ Read View è¿™ä¸€åˆ»ï¼Œäº‹åŠ¡ 100 å’Œ 200 è¿˜åœ¨è·‘ï¼Œè¿˜æ²¡æäº¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;min_trx_id&lt;/code&gt; (æœ€å°æ´»è·ƒ)&lt;/strong&gt;ï¼š&lt;strong&gt;100&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;max_trx_id&lt;/code&gt; (ä¸‹ä¸ªID)&lt;/strong&gt;ï¼š&lt;strong&gt;301&lt;/strong&gt;ã€‚æ„æ€æ˜¯ï¼šç³»ç»Ÿä¸‹ä¸€ä¸ªè¦åˆ†é…çš„äº‹åŠ¡ ID æ˜¯ 301ï¼ˆå³æ‰€æœ‰ &amp;gt; 300 çš„éƒ½æ˜¯æœªæ¥æ‰å‘ç”Ÿçš„ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘å»è¯»ä¸€è¡Œæ•°æ®ï¼Œæ ¹æ®è¿™è¡Œæ•°æ® &lt;code&gt;DB_TRX_ID&lt;/code&gt; çš„ä¸åŒï¼Œä¼šæœ‰ 4 ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;h4 id=&#34;1-è§„åˆ™ä¸€è¿™æ˜¯æˆ‘è‡ªå·±æ”¹çš„å—&#34;&gt;1. è§„åˆ™ä¸€ï¼šè¿™æ˜¯æˆ‘è‡ªå·±æ”¹çš„å—ï¼Ÿ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­&lt;/strong&gt;ï¼š&lt;code&gt;DB_TRX_ID&lt;/code&gt; == &lt;strong&gt;300 (æˆ‘)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šâœ… &lt;strong&gt;å¯è§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£é‡Š&lt;/strong&gt;ï¼šæˆ‘å½“ç„¶èƒ½çœ‹åˆ°æˆ‘è‡ªå·±ä¿®æ”¹çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-è§„åˆ™äºŒè¿™æ˜¯è€å‰è¾ˆæ”¹çš„å—&#34;&gt;2. è§„åˆ™äºŒï¼šè¿™æ˜¯â€œè€å‰è¾ˆâ€æ”¹çš„å—ï¼Ÿ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­&lt;/strong&gt;ï¼š&lt;code&gt;DB_TRX_ID&lt;/code&gt; &amp;lt; &lt;strong&gt;100 (æœ€å°æ´»è·ƒ)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šâœ… &lt;strong&gt;å¯è§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£é‡Š&lt;/strong&gt;ï¼šæ¯”å¦‚ ID=50ã€‚è¯´æ˜åœ¨æˆ‘ç”Ÿæˆ Read View ä¹‹å‰ï¼Œè¿™ä¸ªäº‹åŠ¡æ—©å°±æäº¤å®Œäº‹äº†ï¼Œæ•°æ®å·²ç»ç¨³å®šäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-è§„åˆ™ä¸‰è¿™æ˜¯æœªæ¥äººæ”¹çš„å—&#34;&gt;3. è§„åˆ™ä¸‰ï¼šè¿™æ˜¯â€œæœªæ¥äººâ€æ”¹çš„å—ï¼Ÿ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­&lt;/strong&gt;ï¼š&lt;code&gt;DB_TRX_ID&lt;/code&gt; &amp;gt;= &lt;strong&gt;301 (æœ€å¤§ID)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šâŒ &lt;strong&gt;ä¸å¯è§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£é‡Š&lt;/strong&gt;ï¼šæ¯”å¦‚ ID=400ã€‚è¿™æ˜¯åœ¨æˆ‘å¯åŠ¨ï¼ˆæˆ–æ‹ç…§ï¼‰ä¹‹åï¼Œæ‰æ–°æ¥çš„äº‹åŠ¡ä¿®æ”¹çš„ã€‚ä¸ç®¡å®ƒææ²¡æäº¤ï¼Œå¯¹äºâ€œè¿‡å»â€çš„æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯æœªæ¥çš„äº‹ï¼Œæˆ‘ä¸èƒ½ç©¿è¶Šæ—¶ç©ºå»çœ‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-è§„åˆ™å››è¿™æ˜¯è¿˜æ²¡äº¤å·çš„åŒç­åŒå­¦æ”¹çš„å—&#34;&gt;4. è§„åˆ™å››ï¼šè¿™æ˜¯â€œè¿˜æ²¡äº¤å·çš„åŒç­åŒå­¦â€æ”¹çš„å—ï¼Ÿ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­&lt;/strong&gt;ï¼š&lt;code&gt;DB_TRX_ID&lt;/code&gt; è½åœ¨ [100, 301) ä¹‹é—´ï¼Œä¸” &lt;strong&gt;åœ¨ &lt;code&gt;m_ids&lt;/code&gt; åˆ—è¡¨ [100, 200] é‡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šâŒ &lt;strong&gt;ä¸å¯è§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£é‡Š&lt;/strong&gt;ï¼šæ¯”å¦‚ ID=100 æˆ– 200ã€‚è™½ç„¶ä»–ä»¬ ID æ¯”æˆ‘å°ï¼ˆå¼€å§‹å¾—æ—©ï¼‰ï¼Œä½†æˆ‘ç”Ÿæˆå¿«ç…§çš„é‚£ä¸€åˆ»ï¼Œä»–ä»¬&lt;strong&gt;è¿˜æ²¡æäº¤&lt;/strong&gt;ã€‚ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ˆé¿å…è„è¯»ï¼‰ï¼Œæˆ‘ä¸èƒ½çœ‹ä»–ä»¬ä¿®æ”¹çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;ç‰¹ä¾‹&lt;/em&gt;ï¼šå¦‚æœ ID=250ï¼ˆä¸åœ¨æ´»è·ƒåˆ—è¡¨é‡Œï¼‰ï¼Œè¯´æ˜ä»–åœ¨æˆ‘ç”Ÿæˆå¿«ç…§å‰å·²ç»è¿…é€Ÿæäº¤äº†ï¼Œé‚£å°±&lt;strong&gt;å¯è§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ”„ &lt;strong&gt;å¦‚æœä¸å¯è§æ€ä¹ˆåŠï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;é¡ºç€ç‰ˆæœ¬é“¾ (&lt;code&gt;DB_ROLL_PTR&lt;/code&gt;) å¾€å›æ‰¾ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç»§ç»­å¥—ç”¨ä¸Šè¿°è§„åˆ™ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¯è§çš„ç‰ˆæœ¬ä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;54-å…³é”®åŒºåˆ«rc-å’Œ-rr-ä¸­çš„-mvcc&#34;&gt;5.4 å…³é”®åŒºåˆ«ï¼šRC å’Œ RR ä¸­çš„ MVCC
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šä¸Šé¢ &lt;strong&gt;5.3 èŠ‚çš„å¯è§æ€§ç®—æ³•è§„åˆ™æ˜¯é€šç”¨çš„&lt;/strong&gt;ï¼æ— è®ºæ˜¯ RC è¿˜æ˜¯ RR çº§åˆ«ï¼ŒInnoDB åœ¨åˆ¤æ–­â€œèƒ½ä¸èƒ½çœ‹â€æ—¶ï¼Œç”¨çš„éƒ½æ˜¯åŒä¸€å¥—è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä»¬çš„å”¯ä¸€åŒºåˆ«åœ¨äºï¼š&lt;strong&gt;Read View (é‚£å¼ ç…§ç‰‡) ç”Ÿæˆçš„æ—¶æœºä¸åŒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-åœ¨-rc-è¯»å·²æäº¤-çº§åˆ«ä¸‹&#34;&gt;1. åœ¨ RC (è¯»å·²æäº¤) çº§åˆ«ä¸‹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶æœº&lt;/strong&gt;ï¼š&lt;strong&gt;æ¯æ¬¡æ‰§è¡Œ &lt;code&gt;SELECT&lt;/code&gt; è¯­å¥æ—¶ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ Read View&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä½ æ‰§è¡Œäº†ä¸¤æ¬¡æŸ¥è¯¢ï¼Œä¸­é—´æœ‰åˆ«çš„äº‹åŠ¡æäº¤äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ï¼Œç”Ÿæˆçš„&lt;strong&gt;æ–° Read View&lt;/strong&gt; ä¼šå‘ç°é‚£ä¸ªäº‹åŠ¡å·²ç»ä¸åœ¨æ´»è·ƒåˆ—è¡¨ (&lt;code&gt;m_ids&lt;/code&gt;) é‡Œäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹æ®è§„åˆ™ï¼Œæ•°æ®å°±å˜å¾—&lt;strong&gt;å¯è§&lt;/strong&gt;äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ RC ä¼šå‘ç”Ÿ&lt;strong&gt;ä¸å¯é‡å¤è¯»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-åœ¨-rr-å¯é‡å¤è¯»--mysql-é»˜è®¤çº§åˆ«ä¸‹&#34;&gt;2. åœ¨ RR (å¯é‡å¤è¯») â€”â€” MySQL é»˜è®¤çº§åˆ«ä¸‹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶æœº&lt;/strong&gt;ï¼š&lt;strong&gt;åªåœ¨äº‹åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡Œ &lt;code&gt;SELECT&lt;/code&gt; æ—¶ç”Ÿæˆä¸€ä¸ª Read View&lt;/strong&gt;ï¼Œåç»­æ‰€æœ‰çš„æŸ¥è¯¢éƒ½&lt;strong&gt;å¤ç”¨&lt;/strong&gt;è¿™åŒä¸€ä¸ª Read Viewã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸ç®¡å¤–éƒ¨ä¸–ç•Œæ€ä¹ˆå˜ï¼Œä½ æ‰‹é‡Œæ‹¿çš„æ°¸è¿œæ˜¯äº‹åŠ¡åˆšå¼€å§‹æ—¶çš„é‚£å¼ â€œæ—§ç…§ç‰‡â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ç…§ç‰‡é‡Œï¼Œé‚£äº›å½“æ—¶æ²¡æäº¤çš„äº‹åŠ¡ï¼Œæ°¸è¿œéƒ½æ˜¯â€œæ²¡æäº¤â€çš„çŠ¶æ€ï¼ˆä¾ç„¶åœ¨ &lt;code&gt;m_ids&lt;/code&gt; é‡Œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¹æ®è§„åˆ™ï¼Œä»–ä»¬ä¿®æ”¹çš„æ•°æ®æ°¸è¿œ&lt;strong&gt;ä¸å¯è§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ RR èƒ½å®ç°&lt;strong&gt;å¯é‡å¤è¯»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸ” ä¸€å¥è¯æ€»ç»“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RC&lt;/strong&gt;ï¼šæ¯æ¬¡è¯»éƒ½æ›´æ–°è§†å›¾ï¼ˆå®æ—¶ç›´æ’­ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RR&lt;/strong&gt;ï¼šåªåœ¨å¼€å§‹æ—¶ç”Ÿæˆè§†å›¾ï¼ˆå½•åƒå›æ”¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•&lt;/strong&gt;ï¼šæ‹¿ç€è§†å›¾æ‰¾æ•°æ®çš„é€»è¾‘ï¼Œä¸¤è€…å®Œå…¨ä¸€æ ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;55-æ€»ç»“&#34;&gt;5.5 æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;MVCC = éšè—å­—æ®µ + Undo Log (ç‰ˆæœ¬é“¾) + Read View (å¯è§æ€§åˆ¤æ–­)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒè®© MySQL åœ¨ RR çº§åˆ«ä¸‹ï¼Œè¯»æ“ä½œä¸éœ€è¦åŠ é”ï¼Œæå¤§æå‡äº†å¹¶å‘æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒåƒä¸€ä¸ªæ—¶å…‰æœºï¼Œè®©äº‹åŠ¡åªèƒ½çœ‹åˆ°å±äºå®ƒé‚£ä¸ªæ—¶åˆ»çš„æ•°æ®å¿«ç…§ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Go å†…å­˜åˆ†é…ç­–ç•¥ã€å†…å­˜é€ƒé€¸ã€ä¸ GC æœºåˆ¶</title>
        <link>https://skylm808.github.io/p/go-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8%E4%B8%8E-gc-%E6%9C%BA%E5%88%B6/</link>
        <pubDate>Tue, 27 Jan 2026 22:32:05 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/go-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8%E4%B8%8E-gc-%E6%9C%BA%E5%88%B6/</guid>
        <description>&lt;h1 id=&#34;go-å†…å­˜åˆ†é…ç­–ç•¥å†…å­˜é€ƒé€¸ä¸-gc-æœºåˆ¶&#34;&gt;Go å†…å­˜åˆ†é…ç­–ç•¥ã€å†…å­˜é€ƒé€¸ã€ä¸ GC æœºåˆ¶
&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡å°†è¯¦ç»†è§£æ Go è¯­è¨€ä¸­çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼ˆæ ˆä¸å †ï¼‰ã€é€ƒé€¸åˆ†ææœºåˆ¶ï¼Œä»¥åŠåƒåœ¾å›æ”¶ï¼ˆGCï¼‰å¦‚ä½•ä¸è¿™ä¸¤éƒ¨åˆ†å†…å­˜äº¤äº’ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-å†…å­˜åˆ†é…åŸºç¡€æ ˆ-stack-vs-å †-heap&#34;&gt;1. å†…å­˜åˆ†é…åŸºç¡€ï¼šæ ˆ (Stack) vs å † (Heap)
&lt;/h2&gt;&lt;p&gt;åœ¨ Go è¯­è¨€ä¸­ï¼Œå†…å­˜ä¸»è¦åˆ†ä¸ºä¸¤ç±»åŒºåŸŸï¼š&lt;/p&gt;
&lt;h3 id=&#34;æ ˆ-stack&#34;&gt;æ ˆ (Stack)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;: ç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å‡½æ•°çš„å‚æ•°ã€å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…ä¸é‡Šæ”¾æå¿«&lt;/strong&gt;: ä¼´éšå‡½æ•°è°ƒç”¨ï¼ˆå…¥æ ˆï¼‰åˆ†é…ï¼Œå‡½æ•°è¿”å›ï¼ˆå‡ºæ ˆï¼‰é‡Šæ”¾ã€‚ç”± CPU çš„æ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ˆSPï¼‰ç§»åŠ¨æ¥å®Œæˆï¼Œå‡ ä¹æ²¡æœ‰é¢å¤–å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨ç®¡ç†&lt;/strong&gt;: ä¸éœ€è¦åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ä»‹å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿ç»­å†…å­˜&lt;/strong&gt;: å…·æœ‰è‰¯å¥½çš„å±€éƒ¨æ€§ï¼Œå¯¹ CPU ç¼“å­˜å‹å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å°é™åˆ¶&lt;/strong&gt;: æ¯ä¸ª Goroutine åˆå§‹æ ˆå¾ˆå°ï¼ˆé€šå¸¸ 2KBï¼‰ï¼Œä½†å¯ä»¥åŠ¨æ€æ‰©å®¹ï¼ˆæœ€å¤§å¯è¾¾ 1GBï¼Œè§†æ¶æ„è€Œå®šï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å †-heap&#34;&gt;å † (Heap)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;: ç”¨äºå­˜å‚¨ç”Ÿå‘½å‘¨æœŸé•¿äºå‡½æ•°è°ƒç”¨ã€æˆ–è€…å¤§å°æœªçŸ¥ã€æˆ–è€…ä½“ç§¯å·¨å¤§çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…è¾ƒæ…¢&lt;/strong&gt;: éœ€è¦åœ¨ç©ºé—²å†…å­˜åˆ—è¡¨ä¸­å¯»æ‰¾åˆé€‚çš„å—ï¼Œå¯èƒ½æ¶‰åŠé”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨/GC ç®¡ç†&lt;/strong&gt;: åœ¨ Go ä¸­ï¼Œç”±åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰è´Ÿè´£æ‰«æå’Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº§ç”Ÿç¢ç‰‡&lt;/strong&gt;: é¢‘ç¹åˆ†é…é‡Šæ”¾å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-å†…å­˜é€ƒé€¸åˆ†æ-escape-analysis&#34;&gt;2. å†…å­˜é€ƒé€¸åˆ†æ (Escape Analysis)
&lt;/h2&gt;&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯å†…å­˜é€ƒé€¸&#34;&gt;ä»€ä¹ˆæ˜¯å†…å­˜é€ƒé€¸ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å†…å­˜é€ƒé€¸&lt;/strong&gt;æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œçš„ä¸€é¡¹åˆ†æï¼Œå®ƒå†³å®šä¸€ä¸ªå˜é‡æ˜¯åº”è¯¥åˆ†é…åœ¨&lt;strong&gt;æ ˆ&lt;/strong&gt;ä¸Šè¿˜æ˜¯&lt;strong&gt;å †&lt;/strong&gt;ä¸Šã€‚
å¦‚æœç¼–è¯‘å™¨å‘ç°ä¸€ä¸ªå˜é‡åœ¨å‡½æ•°è¿”å›åä»ç„¶è¢«å¤–éƒ¨å¼•ç”¨ï¼ˆç”Ÿå‘½å‘¨æœŸè¶…å‡ºäº†å½“å‰å‡½æ•°æ ˆå¸§ï¼‰ï¼Œæˆ–è€…ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…¶å¤§å°ï¼Œè¯¥å˜é‡å°±ä¼šâ€œé€ƒé€¸â€åˆ°å †ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆéœ€è¦é€ƒé€¸åˆ†æ&#34;&gt;ä¸ºä»€ä¹ˆéœ€è¦é€ƒé€¸åˆ†æï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ€§èƒ½&lt;/strong&gt;: å°½å¯èƒ½å°†å˜é‡åˆ†é…åœ¨æ ˆä¸Šï¼Œå‡è½» GC çš„å‹åŠ›ã€‚æ ˆä¸Šåˆ†é…çš„å¼€é”€è¿œå°äºå †ï¼Œä¸”ä¸éœ€è¦ GC æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯å®‰å…¨&lt;/strong&gt;: ç¡®ä¿å‡½æ•°è¿”å›åï¼Œè¢«å¼•ç”¨çš„æ•°æ®ä¾ç„¶æœ‰æ•ˆï¼ˆé˜²æ­¢æ‚¬å‚æŒ‡é’ˆï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ—¶å€™å˜é‡åœ¨æ ˆä»€ä¹ˆæ—¶å€™åœ¨å †&#34;&gt;ä»€ä¹ˆæ—¶å€™å˜é‡åœ¨æ ˆï¼Œä»€ä¹ˆæ—¶å€™åœ¨å †ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;Go ç¼–è¯‘å™¨çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼š&lt;strong&gt;å¦‚æœå˜é‡åœ¨å‡½æ•°è¿”å›åä¸å†è¢«å¼•ç”¨ï¼Œä¼˜å…ˆåˆ†é…åœ¨æ ˆä¸Šï¼›å¦åˆ™åˆ†é…åœ¨å †ä¸Šã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&#34;å¸¸è§çš„é€ƒé€¸åœºæ™¯&#34;&gt;å¸¸è§çš„é€ƒé€¸åœºæ™¯
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å±€éƒ¨å˜é‡çš„æŒ‡é’ˆ&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;NewUser&lt;/span&gt;() &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;User {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    u &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; User{Name: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Bob&amp;#34;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;u &lt;span style=&#34;color:#6272a4&#34;&gt;// u é€ƒé€¸åˆ°å †ï¼Œå› ä¸ºå‡½æ•°è¿”å›å u ä»éœ€è¢«å¤–éƒ¨è®¿é—®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;å‘ &lt;code&gt;interface{}&lt;/code&gt; èµ‹å€¼ (åŠ¨æ€ç±»å‹)&lt;/strong&gt;:
å¾ˆå¤šæ ‡å‡†åº“å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;fmt.Println&lt;/code&gt;ï¼‰æ¥æ”¶ &lt;code&gt;interface{}&lt;/code&gt; å‚æ•°ã€‚ç¼–è¯‘å™¨éš¾ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šå…·ä½“çš„ç±»å‹å’Œå¤§å°ï¼Œé€šå¸¸ä¼šé€ƒé€¸ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;name &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fmt.&lt;span style=&#34;color:#50fa7b&#34;&gt;Println&lt;/span&gt;(name) &lt;span style=&#34;color:#6272a4&#34;&gt;// name å¯èƒ½ä¼šé€ƒé€¸ï¼Œå› ä¸º fmt.Println å†…éƒ¨ä½¿ç”¨åå°„ä¸”æ¥æ”¶ interface{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;é—­åŒ…å¼•ç”¨å¤–éƒ¨å˜é‡&lt;/strong&gt;:
å¦‚æœé—­åŒ…ä¿®æ”¹äº†å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œæˆ–è€…å¤–éƒ¨å˜é‡è¢«é—­åŒ…æŒæœ‰å¹¶åœ¨å¤–éƒ¨å‡½æ•°è¿”å›åç»§ç»­å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;ClosureEscape&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    x &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        x&lt;span style=&#34;color:#ff79c6&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#6272a4&#34;&gt;// x è¢«é—­åŒ…å¼•ç”¨ï¼Œå¿…é¡»åˆ†é…åœ¨å †ä¸Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; x
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;æ ˆç©ºé—´ä¸è¶³ (Stack Overflow)&lt;/strong&gt;:
è™½ç„¶ Goroutine æ ˆå¯æ‰©å®¹ï¼Œä½†å¦‚æœä½ åˆ†é…ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„ï¼ˆä¾‹å¦‚ &lt;code&gt;[1000000]int&lt;/code&gt;ï¼‰ï¼Œå¯èƒ½ä¼šç›´æ¥åˆ†é…åˆ°å †ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;BigStack&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// æ•°ç»„è¿‡å¤§ï¼Œè¶…è¿‡æ ˆå¸§é™åˆ¶ï¼Œé€ƒé€¸åˆ°å †&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; big [&lt;span style=&#34;color:#bd93f9&#34;&gt;10000000&lt;/span&gt;]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _ = big
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡ç‰‡é•¿åº¦åŠ¨æ€å˜åŒ–æˆ–è¿‡å¤§&lt;/strong&gt;:
å½“åˆ‡ç‰‡åº•å±‚æ•°ç»„éœ€è¦åœ¨è¿è¡Œæ—¶æ‰©å®¹ä¸”å¤§å°ä¸å¯é¢„æµ‹æ—¶ï¼Œå¾€å¾€åˆ†é…åœ¨å †ä¸Šã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;DynamicSlice&lt;/span&gt;(n &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// ç¼–è¯‘æœŸæ— æ³•ç¡®å®š n çš„å¤§å°ï¼Œä¸ºäº†å®‰å…¨åˆ†é…åœ¨å †ä¸Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    s &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;, n)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _ = s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;go build -gcflags=&amp;quot;-m&amp;quot;&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ç¼–è¯‘å™¨çš„é€ƒé€¸åˆ†æç»“æœã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-go-çš„-gc-garbage-collection-æ·±åº¦è§£æ&#34;&gt;3. Go çš„ GC (Garbage Collection) æ·±åº¦è§£æ
&lt;/h2&gt;&lt;p&gt;Go çš„ GC æœºåˆ¶æ˜¯ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç‰¹å¾&lt;strong&gt;å…±åŒå®šä¹‰&lt;/strong&gt;çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éåˆ†ä»£ (Non-generational)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä¸åƒ Java/JVM é‚£æ ·å°†å†…å­˜åˆ†ä¸ºâ€œæ–°ç”Ÿä»£â€å’Œâ€œè€å¹´ä»£â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;åŸå› &lt;/em&gt;: Go çš„ç¼–è¯‘å™¨é€ƒé€¸åˆ†æå·²ç»éå¸¸å¼ºå¤§ï¼Œå¾ˆå¤šçŸ­ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ç›´æ¥åˆ†é…åœ¨æ ˆä¸Šå¹¶è‡ªåŠ¨é”€æ¯äº†ï¼Œè¿™å¤§å¤§é™ä½äº†åˆ†ä»£ GC åœ¨ Go ä¸­çš„ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘ (Concurrent)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;GC çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹ï¼ˆMutatorï¼‰æ˜¯&lt;strong&gt;å¹¶è¡Œè¿è¡Œ&lt;/strong&gt;çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¤§éƒ¨åˆ†æ—¶é—´ä¸éœ€è¦æš‚åœç¨‹åº (Stop The World)ï¼Œæå¤§åœ°é™ä½äº†å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰è‰²æ ‡è®°æ¸…é™¤ (Tri-color Mark and Sweep)&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯å…·ä½“çš„&lt;strong&gt;å®ç°ç®—æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†åœ¨â€œå¹¶å‘â€è¿è¡Œçš„çŠ¶æ€ä¸‹å‡†ç¡®è¿½è¸ªå†…å­˜ï¼ŒGo ä½¿ç”¨äº†ä¸‰è‰²ï¼ˆé»‘ã€ç°ã€ç™½ï¼‰æ¨¡å‹æ¥æ ‡è®°å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šè¿™ä¸‰è€…åˆèµ·æ¥æ„æˆäº† Go çš„ GCã€‚å…¶ä¸­ï¼Œâ€œä¸‰è‰²æ ‡è®°æ³•â€æ˜¯å…¶æ ¸å¿ƒç®—æ³•é€»è¾‘ï¼Œä¸‹é¢é‡ç‚¹å±•å¼€è®²è§£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-ä¸‰è‰²æ ‡è®°æ³•åŸç†-tri-color-marking&#34;&gt;3.1 ä¸‰è‰²æ ‡è®°æ³•åŸç† (Tri-color Marking)
&lt;/h3&gt;&lt;p&gt;GC çš„æ ¸å¿ƒä»»åŠ¡æ˜¯æ‰¾åˆ°æ‰€æœ‰â€œå¯è¾¾â€çš„å¯¹è±¡ã€‚ä¸ºäº†åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼ˆç”¨æˆ·ä»£ç å’Œ GC åŒæ—¶è¿è¡Œï¼‰é«˜æ•ˆåœ°å®Œæˆè¿™ä¸€ä»»åŠ¡ï¼ŒGo å°†å¯¹è±¡åˆ†ä¸ºä¸‰ç§é¢œè‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;âšª ç™½è‰² (White)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ½œåœ¨çš„åƒåœ¾ã€‚è¡¨ç¤ºè¯¥å¯¹è±¡å°šæœªè¢« GC è®¿é—®åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;: GC å¼€å§‹å‰ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç™½è‰²çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æŸçŠ¶æ€&lt;/strong&gt;: æ ‡è®°ç»“æŸåï¼Œä»ç„¶æ˜¯ç™½è‰²çš„å¯¹è±¡å°†è¢«æ¸…é™¤ï¼ˆå›æ”¶ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ğŸ”˜ ç°è‰² (Grey)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ´»è·ƒå¯¹è±¡ï¼Œä½†å…¶å­å¯¹è±¡ï¼ˆå¼•ç”¨çš„å¯¹è±¡ï¼‰å°šæœªè¢«å®Œå…¨æ‰«æã€‚å®ƒæ˜¯ç™½è‰²å’Œé»‘è‰²çš„ä¸­é—´çŠ¶æ€ï¼Œç±»ä¼¼äºâ€œå¾…å¤„ç†é˜Ÿåˆ—â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âš« é»‘è‰² (Black)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;: æ´»è·ƒå¯¹è±¡ï¼Œä¸”å…¶å¼•ç”¨çš„æ‰€æœ‰å­å¯¹è±¡éƒ½å·²ç»è¢«æ‰«æè¿‡äº†ã€‚GC ä¸ä¼šå†æ¬¡æ‰«æé»‘è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ ‡è®°è¿‡ç¨‹æµè½¬&#34;&gt;æ ‡è®°è¿‡ç¨‹æµè½¬ï¼š
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;: æ‰€æœ‰å¯¹è±¡å‡ä¸ºç™½è‰²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹èŠ‚ç‚¹æ‰«æ&lt;/strong&gt;: GC ä» &lt;strong&gt;æ ¹èŠ‚ç‚¹ (GC Roots)&lt;/strong&gt;ï¼ˆåŒ…æ‹¬&lt;strong&gt;æ ˆä¸Šçš„å˜é‡&lt;/strong&gt;ã€å…¨å±€å˜é‡ã€å¯„å­˜å™¨ç­‰ï¼‰å‡ºå‘ï¼Œå°†å®ƒä»¬å¼•ç”¨çš„å¯¹è±¡æ ‡è®°ä¸º &lt;strong&gt;ç°è‰²&lt;/strong&gt;ï¼Œå¹¶æ”¾å…¥ç°è‰²é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯æ‰«æ&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä»ç°è‰²é›†åˆä¸­å–å‡ºä¸€ä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;å°†å…¶å¼•ç”¨çš„æ‰€æœ‰ç™½è‰²å­å¯¹è±¡æ ‡è®°ä¸º &lt;strong&gt;ç°è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°†è¯¥å¯¹è±¡è‡ªèº«æ ‡è®°ä¸º &lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;&lt;strong&gt;å®Œæˆæ ‡è®°&lt;/strong&gt;: é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°ç°è‰²é›†åˆä¸ºç©ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…é™¤&lt;/strong&gt;: æ­¤æ—¶ï¼Œå †ä¸Šåªå‰©ä¸‹é»‘è‰²ï¼ˆå­˜æ´»ï¼‰å’Œç™½è‰²ï¼ˆåƒåœ¾ï¼‰å¯¹è±¡ã€‚GC æ¸…é™¤æ‰€æœ‰ç™½è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;311-æ ¸å¿ƒç–‘é—®ä¸ºä»€ä¹ˆ-gc-è¦æ‰«ææ ˆ&#34;&gt;3.1.1 æ ¸å¿ƒç–‘é—®ï¼šä¸ºä»€ä¹ˆ GC è¦æ‰«ææ ˆï¼Ÿ
&lt;/h4&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šé—®ï¼š&lt;em&gt;â€œæ ˆä¸Šçš„å†…å­˜ä¸æ˜¯è‡ªåŠ¨é‡Šæ”¾å—ï¼Ÿä¸ºä»€ä¹ˆ GC è¿˜è¦è´¹åŠ²å»æ‰«æå®ƒï¼Ÿâ€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„&lt;strong&gt;æ‰«æ&lt;/strong&gt;å¹¶ä¸æ˜¯ä¸ºäº†å›æ”¶æ ˆï¼Œè€Œæ˜¯ä¸ºäº†&lt;strong&gt;ä¿æŠ¤å †&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;â€œæ‰«æâ€ç©¶ç«Ÿåœ¨åšä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;GC ä¼šéå†å½“å‰æ‰€æœ‰ Goroutine çš„æ ˆå¸§ï¼ŒæŸ¥çœ‹æ ˆä¸Šçš„&lt;strong&gt;å±€éƒ¨å˜é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒåœ¨å¯»æ‰¾&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ï¼šçœ‹çœ‹è¿™äº›å±€éƒ¨å˜é‡æ˜¯ä¸æ˜¯æŒ‡å‘äº†&lt;strong&gt;å †&lt;/strong&gt;ä¸Šçš„æŸä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦æ ‡è®°ä¸ºç°è‰²ï¼Ÿï¼ˆå¦‚æœä¸æ ‡ä¼šæ€æ ·ï¼Ÿï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å‡è®¾ä½ çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;HandleRequest&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// &amp;#39;u&amp;#39; æ˜¯æ ˆä¸Šçš„å±€éƒ¨å˜é‡ï¼Œä½†å®ƒæŒ‡å‘äº†å †ä¸Šçš„ User å¯¹è±¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    u &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;User{Name: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Admin&amp;#34;&lt;/span&gt;} 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// --- æ­¤æ—¶ GC å¼€å§‹ ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    fmt.&lt;span style=&#34;color:#50fa7b&#34;&gt;Println&lt;/span&gt;(u.Name) &lt;span style=&#34;color:#6272a4&#34;&gt;// åç»­è¿˜éœ€è¦ç”¨ u&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœ GC ä¸æ‰«ææ ˆ&lt;/strong&gt;ï¼šGC ä¼šå‘ç°å †ä¸Šçš„è¿™ä¸ª &lt;code&gt;User&lt;/code&gt; å¯¹è±¡æ²¡æœ‰ä»»ä½•&lt;em&gt;å †ä¸Š&lt;/em&gt;çš„å…¶ä»–å¯¹è±¡å¼•ç”¨å®ƒã€‚GC ä¼šè¯¯åˆ¤å®ƒæ˜¯åƒåœ¾ï¼ˆç™½è‰²ï¼‰ï¼Œç›´æ¥å›æ”¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šå½“ä»£ç æ‰§è¡Œåˆ° &lt;code&gt;fmt.Println(u.Name)&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;u&lt;/code&gt; æŒ‡å‘çš„å†…å­˜å·²ç»è¢«æ¸…ç©ºï¼Œç¨‹åºç›´æ¥å´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šæ ˆæ˜¯ç¨‹åºè¿è¡Œçš„â€œæœ€å‰çº¿â€ã€‚&lt;strong&gt;åªè¦æ ˆä¸Šè¿˜èƒ½å¼•ç”¨åˆ°çš„å¯¹è±¡ï¼Œå°±ç»å¯¹ä¸èƒ½å›æ”¶&lt;/strong&gt;ã€‚æ ‡è®°ä¸ºç°è‰²ï¼Œå°±æ˜¯ç»™è¿™ä¸ªå¯¹è±¡æŒ‚ä¸Šâ€œå…æ­»é‡‘ç‰Œâ€ï¼Œå‘Šè¯‰ GCï¼šâ€œè¿™ä¸ªå¯¹è±¡æˆ‘æ ˆä¸Šæ­£å¼•ç”¨ç€å‘¢ï¼Œåˆ«åŠ¨å®ƒï¼â€&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;32-ä¸ºä»€ä¹ˆéœ€è¦å†™å±éšœ-write-barrier&#34;&gt;3.2 ä¸ºä»€ä¹ˆéœ€è¦å†™å±éšœ (Write Barrier)ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ 3.1 èŠ‚çš„ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ GC æ‰«ææœŸé—´å†…å­˜å¼•ç”¨å…³ç³»æ˜¯ä¸å˜çš„ã€‚ä½†åœ¨ Go çš„&lt;strong&gt;å¹¶å‘ GC&lt;/strong&gt; ä¸­ï¼Œ&lt;strong&gt;GC æ­£åœ¨æ ‡è®°çš„åŒæ—¶ï¼Œä½ çš„ç¨‹åºä»£ç ï¼ˆç”¨æˆ·çº¿ç¨‹/Mutatorï¼‰ä¹Ÿåœ¨è¿è¡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å†™å±éšœç”¨åœ¨å“ªé‡Œ&#34;&gt;å†™å±éšœç”¨åœ¨å“ªé‡Œï¼Ÿ
&lt;/h4&gt;&lt;p&gt;å†™å±éšœï¼ˆWrite Barrierï¼‰ä¸æ˜¯ GC çš„ä¸€ä¸ªç‹¬ç«‹æ­¥éª¤ï¼Œè€Œæ˜¯&lt;strong&gt;ç¼–è¯‘å™¨åœ¨ä½ çš„ä»£ç ä¸­è‡ªåŠ¨æ’å…¥çš„â€œé’©å­â€ä»£ç &lt;/strong&gt;ã€‚ï¼ˆâ€œé’©å­â€è¿™ä¸ªè¯åœ¨ç¼–ç¨‹é‡Œé€šå¸¸æŒ‡&lt;strong&gt;æ‹¦æˆª&lt;/strong&gt;ï¼‰
æ¯å½“ä½ æ‰§è¡Œç±»ä¼¼ &lt;code&gt;obj.next = newNode&lt;/code&gt; è¿™æ ·çš„&lt;strong&gt;æŒ‡é’ˆèµ‹å€¼è¯­å¥&lt;/strong&gt;æ—¶ï¼Œä¸ä»…ä¼šä¿®æ”¹å†…å­˜ï¼Œè¿˜ä¼š&lt;strong&gt;è§¦å‘å†™å±éšœä»£ç &lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä¸ºä»€ä¹ˆè¦è§¦å‘å®ƒ&#34;&gt;ä¸ºä»€ä¹ˆè¦è§¦å‘å®ƒï¼Ÿ
&lt;/h4&gt;&lt;p&gt;å¦‚æœç”¨æˆ·ä»£ç å¹¶å‘åœ°ä¿®æ”¹äº†å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šæ¬ºéª— GCï¼Œå¯¼è‡´&lt;strong&gt;åˆæ³•å¯¹è±¡è¢«å›æ”¶ï¼ˆä¸¢å¯¹è±¡ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‚¬æŒ‚æŒ‡é’ˆé—®é¢˜ï¼ˆä¸¢å¯¹è±¡ï¼‰æ¼”ç¤º&lt;/strong&gt;:
å‡è®¾ GC æ­£åœ¨æ‰«æï¼ŒA(é»‘) å·²ç»æ‰«æå®Œï¼ŒB(ç°) æ­£åœ¨é˜Ÿåˆ—ä¸­ï¼ŒC(ç™½) æ˜¯ B çš„å­èŠ‚ç‚¹ã€‚
æ­¤æ—¶ç”¨æˆ·ä»£ç å¹¶å‘æ‰§è¡Œäº†ï¼š &lt;code&gt;A.ptr = C; B.ptr = nil;&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ“ä½œ&lt;/strong&gt;: å°† C æŒ‚åˆ°äº† A ä¸‹é¢ï¼ˆé»‘è‰²æŒ‡å‘ç™½è‰²ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·æ“ä½œ&lt;/strong&gt;: æ–­å¼€äº† B å¯¹ C çš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GC æ¥ç€è·‘ï¼šå› ä¸º A å·²ç»æ˜¯é»‘è‰²ï¼ˆè¡¨ç¤ºå·²æ‰«æå®Œï¼‰ï¼ŒGC &lt;strong&gt;ä¸ä¼šå›å¤´&lt;/strong&gt;å†å»æ£€æŸ¥ Aï¼Œæ‰€ä»¥ GC æ ¹æœ¬ä¸çŸ¥é“ A ç°åœ¨å¼•ç”¨äº† Cã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ B ä¹Ÿä¸å¼•ç”¨ C äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆ&lt;/strong&gt;: C æ°¸è¿œä¿æŒç™½è‰²ã€‚GC è®¤ä¸º C æ˜¯åƒåœ¾å¹¶å›æ”¶å®ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å´©&lt;/strong&gt;: ç¨‹åºç¨åè¯•å›¾è®¿é—® &lt;code&gt;A.ptr&lt;/code&gt; (å³ C)ï¼Œå‘ç°å†…å­˜å·²æ— æ•ˆï¼Œç›´æ¥å´©æºƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;: å¿…é¡»æœ‰æœºåˆ¶ï¼ˆå†™å±éšœï¼‰åœ¨ç”¨æˆ·&lt;strong&gt;ä¿®æ”¹æŒ‡é’ˆ&lt;/strong&gt;æ—¶å‘Šè¯‰ GCï¼Œé˜²æ­¢è¿™ç§â€œé»‘è‰²æŒ‡å‘ç™½è‰²â€ä¸”â€œç™½è‰²å¤±å»ä¿æŠ¤â€çš„æƒ…å†µå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå¿…é¡»æ»¡è¶³ &lt;strong&gt;ä¸‰è‰²ä¸å˜é‡&lt;/strong&gt; çš„å…¶ä¸­ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸‰è‰²ä¸å˜é‡&lt;/strong&gt;: é»‘è‰²å¯¹è±¡ä¸å…è®¸å¼•ç”¨ç™½è‰²å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼±ä¸‰è‰²ä¸å˜é‡&lt;/strong&gt;: é»‘è‰²å¯¹è±¡å¯ä»¥å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œä½†è¯¥ç™½è‰²å¯¹è±¡å¿…é¡»å­˜åœ¨å…¶ä»–ç°è‰²å¯¹è±¡çš„è·¯å¾„ä¿æŠ¤ï¼ˆå³å®ƒæœ€ç»ˆä¼šè¢«æ‰«æåˆ°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å†™å±éšœ&lt;/strong&gt; å°±æ˜¯åœ¨â€œèµ‹å€¼æ“ä½œâ€å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œçš„ä¸€æ®µä»£ç ï¼Œç”¨äºç»´æŠ¤ä¸Šè¿°ä¸å˜é‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;33-æ·±å…¥æ¼”è¿›ä»æ’å…¥å±éšœåˆ°æ··åˆå±éšœ&#34;&gt;3.3 æ·±å…¥æ¼”è¿›ï¼šä»æ’å…¥å±éšœåˆ°æ··åˆå±éšœ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å½»åº•ç†è§£ Go 1.8 çš„æ··åˆå†™å±éšœï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å®ƒè¯•å›¾èåˆçš„ä¸¤ç§åŸºç¡€ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç­–ç•¥-aæ’å…¥å†™å±éšœ-dijkstra--å¼ºä¸‰è‰²ä¸å˜é‡&#34;&gt;ç­–ç•¥ Aï¼šæ’å…¥å†™å±éšœ (Dijkstra) â€” å¼ºä¸‰è‰²ä¸å˜é‡
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;: æ—¢ç„¶æ€•é»‘è‰²æŒ‡å‘ç™½è‰²ï¼Œé‚£æˆ‘å°±&lt;strong&gt;ä¸å…è®¸é»‘è‰²æŒ‡å‘ç™½è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åšæ³•&lt;/strong&gt;: å½“ä½ æ‰§è¡Œ &lt;code&gt;A.ptr = C&lt;/code&gt;ï¼ˆA æ˜¯é»‘ï¼ŒC æ˜¯ç™½ï¼‰æ—¶ï¼Œå†™å±éšœç«‹é©¬è§¦å‘ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œåœï¼Cï¼Œä½ è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨äº†ï¼Œä½ ä¸èƒ½æ˜¯ç™½è‰²çš„ï¼ŒæŠŠä½ æ¶‚æˆç°è‰²ï¼â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;: C å˜æˆäº†ç°è‰²ï¼ŒåŠ å…¥æ‰«æé˜Ÿåˆ—ã€‚C å®‰å…¨äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ˆçš„ç‰¹æ®Šæ€§&lt;/strong&gt;: ä¸ºäº†æé«˜çš„è¿è¡Œé€Ÿåº¦ï¼Œ&lt;strong&gt;æ ˆä¸Šçš„æŒ‡é’ˆä¿®æ”¹æ˜¯ä¸èƒ½åŠ å†™å±éšœçš„&lt;/strong&gt;ï¼ˆåŠ äº†ä¼šæ…¢æ­»ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¼æ´&lt;/strong&gt;: å¦‚æœæˆ‘åœ¨æ ˆä¸Šæ”¹äº†æŒ‡é’ˆï¼ˆæ¯”å¦‚æ ˆä¸Šçš„é»‘å¯¹è±¡å¼•ç”¨äº†å †ä¸Šçš„ç™½å¯¹è±¡ï¼‰ï¼Œå†™å±éšœæŠ“ä¸åˆ°ï¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥æ•‘&lt;/strong&gt;: æ‰€ä»¥ GC å¿…é¡»åœ¨ç»“æŸå‰ï¼Œ&lt;strong&gt;æš‚åœæ•´ä¸ªç¨‹åº (STW)&lt;/strong&gt;ï¼Œé‡æ–°æŠŠæ‰€æœ‰æ ˆæ‰«æä¸€éï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚è¿™å°±æ˜¯ Go 1.5 æ—¶ä»£ STW è€—æ—¶è¾ƒé«˜çš„åŸå› ï¼ˆ10ms - 100ms çº§åˆ«ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç­–ç•¥-båˆ é™¤å†™å±éšœ-yuasa--å¼±ä¸‰è‰²ä¸å˜é‡&#34;&gt;ç­–ç•¥ Bï¼šåˆ é™¤å†™å±éšœ (Yuasa) â€” å¼±ä¸‰è‰²ä¸å˜é‡
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;: æ—¢ç„¶æ€•â€œç™½è‰²å¤±å»ä¿æŠ¤â€ï¼Œé‚£æˆ‘å°±&lt;strong&gt;ä¸å…è®¸ç™½è‰²å¤±å»ä¿æŠ¤&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†™å±éšœæœºåˆ¶&lt;/strong&gt;: å†æ¬¡å¼ºè°ƒï¼Œå†™å±éšœæ˜¯ç¼–è¯‘å™¨æ’å…¥åœ¨&lt;strong&gt;ä½ çš„ Go ä»£ç &lt;/strong&gt;èµ‹å€¼æ“ä½œä¸­çš„ä¸€æ®µä¿æŠ¤é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åšæ³•&lt;/strong&gt;: å½“ä½ æ‰§è¡Œ &lt;code&gt;B.ptr = nil&lt;/code&gt; æˆ–è€… &lt;code&gt;B.ptr = D&lt;/code&gt;ï¼ˆB åŸæœ¬å¼•ç”¨ Cï¼Œç°åœ¨æ–­å¼€æˆ–è¦†ç›–ï¼‰æ—¶ï¼Œå†™å±éšœè§¦å‘ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œåœï¼Cï¼Œä½ è¦è¢«æŠ›å¼ƒäº†å—ï¼Ÿåœ¨ä½ è¢«æ–­å¼€ä¹‹å‰ï¼Œæˆ‘å¿…é¡»æŠŠä½ &lt;strong&gt;æ¶‚æˆç°è‰²&lt;/strong&gt;ï¼â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯æ·±åº¦è§£æï¼šå¯¹è±¡â€œç§»åŠ¨â€ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ C æ˜¯ç™½è‰²å¯¹è±¡ï¼Œåªæœ‰ B (ç°è‰²) å¼•ç”¨å®ƒã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„ä»»åŠ¡æ˜¯ï¼šæŠŠ C ä» B ç§»åŠ¨åˆ° A (é»‘è‰²)ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å¯èƒ½æ˜¯ï¼š&lt;code&gt;A.ptr = B.ptr; B.ptr = nil;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;1.  **å¦‚æœæ²¡æœ‰å±éšœï¼ˆå±é™©ï¼‰**:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   `A.ptr = C`: A æ˜¯é»‘è‰²ï¼ŒGC ä¸ä¼šå†æ‰«æ Aã€‚GC æ­¤æ—¶ä¸çŸ¥é“ A å¼•ç”¨äº† Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   `B.ptr = nil`: B å’Œ C çš„è¿æ¥æ–­å¼€ã€‚GC æ‰«æ B æ—¶å‘ç°å®ƒä¸å†å¼•ç”¨ Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   **ç»“æœ**: C æˆäº†â€œå­¤å„¿â€ï¼ˆç™½è‰²ï¼‰ï¼ŒGC ä»¥ä¸ºæ²¡äººè¦å®ƒï¼Œç›´æ¥å›æ”¶ã€‚**å´©ï¼**
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;2.  **æœ‰äº†åˆ é™¤å±éšœï¼ˆå®‰å…¨ï¼‰**:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   åœ¨æ‰§è¡Œ `B.ptr = nil`ï¼ˆæ–­å¼€å¼•ç”¨ï¼‰çš„é‚£ä¸€åˆ»ï¼Œå†™å±éšœä»‹å…¥ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   å®ƒå‘ç° B åŸæœ¬å¼•ç”¨çš„æ˜¯ Cã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   å®ƒå¼ºåˆ¶æŠŠ **C (æ—§å€¼)** æ ‡è®°ä¸º **ç°è‰²**ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    *   **ç»“æœ**: æ—¢ç„¶ C ç°äº†ï¼ŒGC ç¨åä¸€å®šä¼šæ‰«æ Cã€‚è™½ç„¶ A (é»‘è‰²) å¼•ç”¨ C æ²¡è¢« GC çœ‹åˆ°ï¼Œä½† C è‡ªå·±å˜ç°äº†ï¼Œå®ƒå°±å®‰å…¨äº†ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿«ç…§æ€§è´¨ (Snapshot-at-the-beginning)&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;è¿™ç§ç­–ç•¥å®é™…ä¸Šæ˜¯ä¿ç•™äº† &lt;strong&gt;GC å¼€å§‹é‚£ä¸€åˆ»çš„å­˜æ´»å¿«ç…§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åªè¦ GC å¼€å§‹æ—¶ C æ˜¯æ´»çš„ï¼Œå“ªæ€•ä½ ä¸­é—´æŠŠå®ƒæ–­å¼€äº†ã€ç§»èµ°äº†ï¼Œå†™å±éšœéƒ½ä¼šæŠŠå®ƒæ¶‚ç°ï¼Œå¼ºè¡Œä¿å®ƒæ´»è¿‡è¿™ä¸€è½® GCã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ®åŠ¨åƒåœ¾&lt;/strong&gt;: å¦‚æœ C åæ¥çœŸçš„æ²¡äººå¼•ç”¨äº†ï¼ˆä¹Ÿæ²¡ç»™ Aï¼‰ï¼Œå®ƒè¿™è½®ä¾ç„¶ä¼šè¢«ä¿ç•™ã€‚è¿™å°±æ˜¯â€œæµ®åŠ¨åƒåœ¾â€ï¼Œä½†è¿™æ˜¯ä¸ºäº†å®‰å…¨ï¼ˆä¸è¯¯åˆ ï¼‰æ‰€ä»˜å‡ºçš„æœ€å°ä»£ä»·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;: è™½ç„¶ä¸éœ€è¦ STW é‡æ‰«æ ˆï¼Œä½†å›æ”¶ç²¾åº¦è¾ƒä½ï¼ˆä¼šäº§ç”Ÿæµ®åŠ¨åƒåœ¾ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;ç»ˆæå½¢æ€go-18-æ··åˆå†™å±éšœ-hybrid-write-barrier&#34;&gt;ç»ˆæå½¢æ€ï¼šGo 1.8 æ··åˆå†™å±éšœ (Hybrid Write Barrier)
&lt;/h4&gt;&lt;p&gt;Go 1.8 ç»“åˆäº†ä¸Šè¿°ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œè®¾è®¡äº†&lt;strong&gt;æ··åˆå†™å±éšœ&lt;/strong&gt;ã€‚å®ƒçš„ç›®æ ‡æ˜¯ï¼š&lt;strong&gt;æ—¢ä¸éœ€è¦ STW é‡æ‰«æ ˆï¼ˆåƒåˆ é™¤å±éšœï¼‰ï¼Œä¹Ÿä¸éœ€è¦åœ¨æ ˆä¸ŠåŠ å±éšœï¼ˆåƒæ’å…¥å±éšœï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåšæ³•&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;GC å¼€å§‹æ—¶&lt;/strong&gt;: ç›´æ¥æŠŠæ ˆä¸Šæ‰€æœ‰å¯è¾¾çš„å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸º&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ï¼ˆæ— éœ€ STW é‡æ‰«ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GC æœŸé—´&lt;/strong&gt;: ä»»ä½•åœ¨æ ˆä¸Š&lt;strong&gt;æ–°åˆ›å»º&lt;/strong&gt;çš„å¯¹è±¡ï¼Œç›´æ¥æ ‡è®°ä¸º&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †ä¸Šå†™å±éšœ&lt;/strong&gt;: å½“å †ä¸Šçš„æŒ‡é’ˆä¿®æ”¹æ—¶ï¼Œæ‰§è¡Œæ··åˆé€»è¾‘ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// å½“æ‰§è¡Œ ptr.field = obj æ—¶ï¼ˆä¿®æ”¹å †ä¸Šçš„å¼•ç”¨ï¼‰ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;write_barrier&lt;/span&gt;(slot, obj) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 1. [åˆ é™¤å±éšœé€»è¾‘] ä¿æŠ¤æ—§å€¼ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// å¦‚æœæ—§å€¼ï¼ˆptr.fieldæŒ‡çš„ä»¥å‰çš„å€¼ï¼‰æ˜¯ç™½è‰²çš„ï¼Œå°±æ¶‚æˆç°è‰²ã€‚é˜²æ­¢å®ƒè¢«æ–­å¼€åä¸¢å¤±ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#50fa7b&#34;&gt;shade&lt;/span&gt;(slot.old_value)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 2. [æ’å…¥å±éšœé€»è¾‘] ä¿æŠ¤æ–°å€¼ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// å¦‚æœæ–°å€¼æ˜¯ç™½è‰²çš„ï¼Œå°±æ¶‚æˆç°è‰²ã€‚é˜²æ­¢å®ƒè¢«æŒ‚åœ¨é»‘è‰²å¯¹è±¡ä¸‹è€Œä¸è¢«æ‰«æã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#50fa7b&#34;&gt;shade&lt;/span&gt;(obj)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 3. æ‰§è¡ŒçœŸæ­£çš„èµ‹å€¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;slot = obj
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ˆçš„æ“ä½œ&lt;/strong&gt;: æ ˆå…¨æ˜¯é»‘çš„ï¼ˆæˆ–èƒ½å¼•ç”¨çš„éƒ½ç°äº†ï¼‰ï¼Œä¸”æ–°åˆ†é…çš„ä¹Ÿæ˜¯é»‘çš„ã€‚æ‰€ä»¥åœ¨æ ˆä¸Šæ€ä¹ˆæ”¹æŒ‡é’ˆéƒ½ä¸æ€•ä¸¢å¯¹è±¡ï¼Œ&lt;strong&gt;ä¸éœ€è¦åŠ å±éšœï¼Œä¹Ÿä¸éœ€è¦ STW é‡æ‰«&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †çš„æ“ä½œ&lt;/strong&gt;: æ··åˆå±éšœåŒæ—¶ä¿æŠ¤äº†â€œæ—§å¯¹è±¡ä¸ä¸¢å¤±â€å’Œâ€œæ–°å¯¹è±¡è¢«æ‰«æâ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;:
Go çš„ GC æš‚åœæ—¶é—´ (STW) è¢«å‹ç¼©åˆ°äº† &lt;strong&gt;äºšæ¯«ç§’çº§&lt;/strong&gt;ï¼ˆé€šå¸¸å‡ åå¾®ç§’ï¼‰ï¼Œåªå‰©ä¸‹å¼€å¯/å…³é—­å±éšœçš„æçŸ­ç¬é—´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ€»ç»“gc-æ¼”è¿›&#34;&gt;æ€»ç»“ï¼šGC æ¼”è¿›
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Go 1.3&lt;/strong&gt;: STW æ ‡è®°æ¸…é™¤ (ç™¾æ¯«ç§’çº§)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Go 1.5&lt;/strong&gt;: å¹¶å‘æ ‡è®° + Dijkstra æ’å…¥å±éšœ (éœ€è¦ STW é‡æ‰«æ ˆï¼Œæ¯«ç§’çº§)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Go 1.8&lt;/strong&gt;: &lt;strong&gt;æ··åˆå†™å±éšœ&lt;/strong&gt; (æ— éœ€ STW é‡æ‰«æ ˆï¼Œäºšæ¯«ç§’/å¾®ç§’çº§)ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰ Go GC ä½å»¶è¿Ÿçš„æ ¸å¿ƒåŸºçŸ³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ€»ç»“å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å›æ”¶&#34;&gt;æ€»ç»“ï¼šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å›æ”¶
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
          &lt;th&gt;æ ˆ (Stack)&lt;/th&gt;
          &lt;th&gt;å † (Heap)&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;åˆ†é…ä½ç½®&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å±€éƒ¨å˜é‡ï¼Œæ— æŒ‡é’ˆé€ƒé€¸&lt;/td&gt;
          &lt;td&gt;é€ƒé€¸çš„å˜é‡ï¼Œå¤§å¯¹è±¡ï¼ŒåŠ¨æ€å¯¹è±¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;åˆ†é…é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æå¿« (SP æŒ‡é’ˆç§»åŠ¨)&lt;/td&gt;
          &lt;td&gt;è¾ƒæ…¢ (å†…å­˜åˆ†é…å™¨ mallocgc)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å›æ”¶æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt;: å‡½æ•°è¿”å›å³é”€æ¯&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;GC&lt;/strong&gt;: æ ‡è®°æ¸…é™¤&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;GC è§’è‰²&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;ä½œä¸ºæ ¹èŠ‚ç‚¹ (Root)&lt;/strong&gt;: GC æ‰«ææ ˆä»¥å‘ç°å †å¯¹è±¡çš„å¼•ç”¨&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;è¢«å›æ”¶ç›®æ ‡&lt;/strong&gt;: GC æ‰«æå¹¶æ¸…ç†ä¸å¯è¾¾å¯¹è±¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æä½&lt;/td&gt;
          &lt;td&gt;è¾ƒé«˜ (åˆ†é…å¼€é”€ + GC CPU å ç”¨)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æœ€ä½³å®è·µ&#34;&gt;æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å‡å°‘ GC å‹åŠ›ï¼ˆStop The World æ—¶é—´å’Œ CPU å ç”¨ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘é€ƒé€¸&lt;/strong&gt;: å°½é‡åœ¨æ ˆä¸Šåˆ†é…ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå°å¯¹è±¡ï¼Œç›´æ¥ä¼ å€¼è€Œéä¼ æŒ‡é’ˆï¼ˆå¦‚æœå¤åˆ¶æˆæœ¬ &amp;lt; GC æ‰«ææˆæœ¬ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢„åˆ†é…å†…å­˜&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;make([]T, 0, cap)&lt;/code&gt; é¢„åˆ†é…åˆ‡ç‰‡ï¼Œå‡å°‘æ‰©å®¹å¯¼è‡´çš„å †åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡å¤ç”¨&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;sync.Pool&lt;/code&gt; å¤ç”¨å †ä¸Šçš„å¤§å¯¹è±¡ï¼Œé¿å…åå¤åˆ›å»ºå’Œé”€æ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>go-zero çš„ Model å±‚ Redis ç¼“å­˜æœºåˆ¶</title>
        <link>https://skylm808.github.io/p/go-zero-%E7%9A%84-model-%E5%B1%82-redis-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</link>
        <pubDate>Fri, 16 Jan 2026 08:00:00 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/go-zero-%E7%9A%84-model-%E5%B1%82-redis-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</guid>
        <description>&lt;p&gt;åœ¨æ„å»ºé«˜æ€§èƒ½å¾®æœåŠ¡æ—¶ï¼Œæ•°æ®åº“å¾€å¾€æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚go-zero åœ¨ Model å±‚å†…ç½®äº†ä¸€å¥—é«˜æ•ˆä¸”è‡ªåŠ¨åŒ–çš„ Redis ç¼“å­˜æœºåˆ¶ã€‚æœ¬æ–‡åŸºäºæºç é€»è¾‘ï¼Œè®²æ¸…æ¥šå®ƒå¦‚ä½•å¤„ç†ä¸»é”®ç¼“å­˜ã€å”¯ä¸€ç´¢å¼•ç¼“å­˜ä»¥åŠæ•°æ®ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-æ ¸å¿ƒè®¾è®¡å“²å­¦index-cacheç´¢å¼•ç¼“å­˜&#34;&gt;1. æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼šIndex Cacheï¼ˆç´¢å¼•ç¼“å­˜ï¼‰
&lt;/h2&gt;&lt;p&gt;go-zero å¹¶æ²¡æœ‰é‡‡ç”¨â€œå¤§æ‚çƒ©â€å¼çš„ç¼“å­˜ç­–ç•¥ï¼Œè€Œæ˜¯ä¸¥æ ¼éµå¾ª &lt;strong&gt;â€œæ‰€æœ‰æŸ¥è¯¢æœ€ç»ˆéƒ½å›å½’åˆ° IDâ€&lt;/strong&gt; çš„è®¾è®¡åŸåˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;11-ä¸¤ç§ç¼“å­˜ç±»å‹&#34;&gt;1.1 ä¸¤ç§ç¼“å­˜ç±»å‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Primary Cache (ä¸»é”®ç¼“å­˜)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Key&lt;/strong&gt;: &lt;code&gt;cache:user:id:1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Value&lt;/strong&gt;: &lt;code&gt;{&amp;quot;Id&amp;quot;:1, &amp;quot;Username&amp;quot;:&amp;quot;admin&amp;quot;, ...}&lt;/code&gt;ï¼ˆæ•´è¡Œæ•°æ® JSONï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;: çœŸæ­£å­˜å‚¨æ•°æ®çš„åœ°æ–¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;Index Cache (å”¯ä¸€ç´¢å¼•ç¼“å­˜)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Key&lt;/strong&gt;: &lt;code&gt;cache:user:username:admin&lt;/code&gt; / &lt;code&gt;cache:user:phone:138xxxx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Value&lt;/strong&gt;: &lt;code&gt;1&lt;/code&gt;ï¼ˆå¯¹åº”çš„ UserIDï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;: åªæ˜¯ä¸€ä¸ªè·¯æ ‡ï¼ŒæŒ‡å‘ä¸»é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-æŸ¥è¯¢æµç¨‹ä»ä¸¤æ­¥èµ°åˆ°ä¸€æ­¥åˆ°ä½&#34;&gt;2. æŸ¥è¯¢æµç¨‹ï¼šä»â€œä¸¤æ­¥èµ°â€åˆ°â€œä¸€æ­¥åˆ°ä½â€
&lt;/h2&gt;&lt;h3 id=&#34;åœºæ™¯-aåŸºäºä¸»é”®æŸ¥è¯¢findoneid&#34;&gt;åœºæ™¯ Aï¼šåŸºäºä¸»é”®æŸ¥è¯¢ï¼ˆ&lt;code&gt;FindOne(id)&lt;/code&gt;ï¼‰
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€å¿«è·¯å¾„ï¼Œä¸€æ­¥åˆ°ä½ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»£ç è°ƒç”¨ &lt;code&gt;FindOne(1)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¡†æ¶ç›´æ¥æŸ¥ Redis &lt;code&gt;cache:user:id:1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hit&lt;/strong&gt;: æ‹¿åˆ° JSONï¼Œååºåˆ—åŒ–è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Miss&lt;/strong&gt;: æŸ¥ MySQL -&amp;gt; æ‹¿åˆ°æ•´è¡Œæ•°æ® -&amp;gt; &lt;strong&gt;å†™å…¥ Redis&lt;/strong&gt; -&amp;gt; è¿”å›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åœºæ™¯-båŸºäºå”¯ä¸€ç´¢å¼•æŸ¥è¯¢findonebyusernameadmin&#34;&gt;åœºæ™¯ Bï¼šåŸºäºå”¯ä¸€ç´¢å¼•æŸ¥è¯¢ï¼ˆ&lt;code&gt;FindOneByUsername(&amp;quot;admin&amp;quot;)&lt;/code&gt;ï¼‰
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯å…¸å‹çš„â€œä»¥ç©ºé—´æ¢æ—¶é—´ + æ•°æ®å½’ä¸€åŒ–â€ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼ˆæ‰¾ IDï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥ Redis &lt;code&gt;cache:user:username:admin&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‹¿åˆ° UserID: &lt;code&gt;1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼ˆæ‰¾æ•°æ®ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶å†…éƒ¨è‡ªåŠ¨å¤ç”¨ &lt;code&gt;FindOne(1)&lt;/code&gt; çš„é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥ Redis &lt;code&gt;cache:user:id:1&lt;/code&gt; æ‹¿åˆ°è¯¦ç»†æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ&lt;/strong&gt;&lt;br&gt;
å¦‚æœåœ¨ &lt;code&gt;username&lt;/code&gt; çš„ç¼“å­˜é‡Œä¹Ÿå­˜ä¸€ä»½å®Œæ•´çš„ User æ•°æ®ï¼Œå½“ç”¨æˆ·ä¿®æ”¹æ˜µç§°æ—¶ï¼Œéœ€è¦åŒæ—¶æ›´æ–° &lt;code&gt;id:1&lt;/code&gt;ã€&lt;code&gt;username:admin&lt;/code&gt;ã€&lt;code&gt;phone:xxxx&lt;/code&gt; ç­‰å¤šä»½ç¼“å­˜ï¼Œææ˜“äº§ç”Ÿä¸ä¸€è‡´ã€‚&lt;br&gt;
ç°åœ¨çš„æ–¹æ¡ˆæ˜¯åªç»´æŠ¤ä¸»é”®ç¼“å­˜ï¼šåˆ é™¤ &lt;code&gt;id:1&lt;/code&gt; åï¼Œæ‰€æœ‰ç´¢å¼•æŸ¥è¯¢éƒ½ä¼šå›åˆ°ä¸»é”®ç¼“å­˜ï¼Œå¤©ç„¶ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-å†™å…¥ä¸æ›´æ–°æµç¨‹cache-aside-pattern&#34;&gt;3. å†™å…¥ä¸æ›´æ–°æµç¨‹ï¼šCache-Aside Pattern
&lt;/h2&gt;&lt;p&gt;go-zero ä¸¥æ ¼éµå¾ª &lt;strong&gt;æ—è·¯ç¼“å­˜ (Cache-Aside)&lt;/strong&gt; æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;31-ä»€ä¹ˆæ—¶å€™å†™å…¥ç¼“å­˜&#34;&gt;3.1 ä»€ä¹ˆæ—¶å€™å†™å…¥ç¼“å­˜ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;åªæœ‰åœ¨è¯»å–å¤±è´¥ï¼ˆCache Missï¼‰æ—¶æ‰å†™å…¥&lt;/strong&gt;ã€‚å³ &lt;code&gt;Lazy Load&lt;/code&gt;ï¼ˆæ‡’åŠ è½½ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶ä¸æ˜¯ update å®Œæ•°æ®åº“é©¬ä¸Šå†™ Redisã€‚&lt;/li&gt;
&lt;li&gt;è€Œæ˜¯ update å®Œåªåˆ ç¼“å­˜ã€‚ä¸‹æ¬¡è°æ¥è¯»ï¼Œè°è´Ÿè´£å»æŠŠæ•°æ®ä» MySQLâ€œæ¬è¿â€åˆ° Redisã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;32-æ›´æ–°åˆ é™¤æ—¶çš„è‡ªåŠ¨æ¸…ç†&#34;&gt;3.2 æ›´æ–°/åˆ é™¤æ—¶çš„â€œè‡ªåŠ¨æ¸…ç†â€
&lt;/h3&gt;&lt;p&gt;å½“ä½ è°ƒç”¨ &lt;code&gt;Update(user)&lt;/code&gt; æˆ– &lt;code&gt;Delete(id)&lt;/code&gt; æ—¶ï¼Œæ¡†æ¶åº•å±‚ï¼ˆ&lt;code&gt;sqlc.CachedConn&lt;/code&gt;ï¼‰ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// ä¼ªä»£ç é€»è¾‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;Delete&lt;/span&gt;(id &lt;span style=&#34;color:#8be9fd&#34;&gt;int64&lt;/span&gt;) &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 1. å…ˆæŸ¥å‡ºè€æ•°æ®ï¼ˆä¸ºäº†æ‹¿åˆ° usernameã€phone ç­‰ç´¢å¼•é”®ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    data, _ &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;FindOne&lt;/span&gt;(id)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 2. å‡†å¤‡æ‰€æœ‰ç›¸å…³çš„ Redis Keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    keys &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:id:1&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:username:admin&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;cache:user:phone:138xxxx&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 3. æ‰§è¡Œæ•°æ®åº“æ“ä½œ + åˆ é™¤ç¼“å­˜&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    _, err &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;Exec&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt;() &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; DB.&lt;span style=&#34;color:#50fa7b&#34;&gt;Delete&lt;/span&gt;(id)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }, keys&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; err
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢æ˜¯ &lt;code&gt;github.com/zeromicro/go-zero@v1.9.4/core/stores/sqlc/cachedsql.go&lt;/code&gt; ä¸­çš„å…·ä½“ä»£ç ï¼Œ&lt;code&gt;ExecCtx&lt;/code&gt; æ˜¯ç”Ÿæˆçš„ model å±‚ä»£ç é‡Œæ‰§è¡Œæ•°æ®åº“æ“ä½œå¹¶åˆ é™¤ç¼“å­˜çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (cc CachedConn) &lt;span style=&#34;color:#50fa7b&#34;&gt;ExecCtx&lt;/span&gt;(ctx context.Context, exec ExecCtxFn, keys &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;) (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sql.Result, &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    res, err &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;exec&lt;/span&gt;(ctx, cc.db)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; err &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;, err
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; res, cc.&lt;span style=&#34;color:#50fa7b&#34;&gt;DelCacheCtx&lt;/span&gt;(ctx, keys&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ Redis é‡Œæœ‰ç¼“å­˜&lt;/strong&gt; -&amp;gt; &lt;code&gt;DEL&lt;/code&gt; å‘½ä»¤è¢«æ‰§è¡Œï¼Œç¼“å­˜è¢«æ¸…ç©ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ Redis é‡Œæ²¡ç¼“å­˜&lt;/strong&gt; -&amp;gt; &lt;code&gt;DEL&lt;/code&gt; å‘½ä»¤ä¾ç„¶è¢«æ‰§è¡Œï¼ˆè¿”å› 0ï¼‰ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-æ€»ç»“&#34;&gt;4. æ€»ç»“
&lt;/h2&gt;&lt;p&gt;go-zero çš„ç¼“å­˜æœºåˆ¶é€šè¿‡ &lt;strong&gt;Model ä»£ç ç”Ÿæˆ&lt;/strong&gt; å¸®æˆ‘ä»¬å±è”½äº†å¤æ‚çš„ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å½’ä¸€&lt;/strong&gt;ï¼šæ‰€æœ‰æ•°æ®å®ä½“åªå­˜ä¸€ä»½ï¼ˆåœ¨ ID ç¼“å­˜é‡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ˜ å°„&lt;/strong&gt;ï¼šå”¯ä¸€ç´¢å¼•åªå­˜ IDï¼Œé€šè¿‡ä¸¤æ¬¡æŸ¥æ‰¾è§£å†³é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§ä¿è¯&lt;/strong&gt;ï¼šä¿®æ”¹æ•°æ®åº“è‡ªåŠ¨çº§è”åˆ é™¤å¯¹åº”çš„æ‰€æœ‰ç¼“å­˜ Keyï¼ˆåŒ…æ‹¬ ID Key å’Œ Index Keysï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å¥—æœºåˆ¶ç®€å•ã€å¥å£®ï¼Œæ˜¯è§£å†³é«˜å¹¶å‘è¯»é—®é¢˜çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Golang slice ä¸ map åº•å±‚è¯¦è§£</title>
        <link>https://skylm808.github.io/p/golang-slice-%E4%B8%8E-map-%E5%BA%95%E5%B1%82%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Thu, 15 Jan 2026 16:39:08 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/golang-slice-%E4%B8%8E-map-%E5%BA%95%E5%B1%82%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h2 id=&#34;ä¸ºä»€ä¹ˆè¦ç†è§£-slice-å’Œ-map-çš„åº•å±‚&#34;&gt;ä¸ºä»€ä¹ˆè¦ç†è§£ slice å’Œ map çš„åº•å±‚
&lt;/h2&gt;&lt;p&gt;åœ¨ Go é‡Œï¼Œslice å’Œ map æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç±»å®¹å™¨ã€‚å®ƒä»¬çœ‹èµ·æ¥ç®€å•ï¼Œä½†å¾ˆå¤šæ€§èƒ½å·®å¼‚ã€å†…å­˜å ç”¨ã€å¹¶å‘é—®é¢˜éƒ½å’Œåº•å±‚å®ç°ç›¸å…³ã€‚æœ¬æ–‡ä»è¿è¡Œæ—¶è§†è§’è§£é‡Š slice ä¸ map çš„å†…å­˜å¸ƒå±€ã€æ‰©å®¹ç­–ç•¥ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åŸºäº Go 1.18+ çš„å®ç°æ€è·¯ï¼Œå…·ä½“ç»†èŠ‚å¯èƒ½éšç‰ˆæœ¬å¾®è°ƒï¼Œæ ¸å¿ƒæ¦‚å¿µä¿æŒç¨³å®šã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;slice-çš„åº•å±‚ç»“æ„&#34;&gt;slice çš„åº•å±‚ç»“æ„
&lt;/h2&gt;&lt;h3 id=&#34;1-slice-åªæ˜¯ä¸€ä¸ªæè¿°ç¬¦&#34;&gt;1) slice åªæ˜¯ä¸€ä¸ªâ€œæè¿°ç¬¦â€
&lt;/h3&gt;&lt;p&gt;slice æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒæŒ‡å‘ä¸€æ®µè¿ç»­æ•°ç»„ï¼Œå¹¶è®°å½•é•¿åº¦ä¸å®¹é‡ï¼ˆä¼ªä»£ç ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; slice &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    array unsafe.Pointer
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    len   &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    cap   &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;array&lt;/code&gt; æŒ‡å‘åº•å±‚æ•°ç»„é¦–å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;len&lt;/code&gt; è¡¨ç¤ºå½“å‰å¯ç”¨å…ƒç´ æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cap&lt;/code&gt; è¡¨ç¤ºåº•å±‚æ•°ç»„ä» &lt;code&gt;array&lt;/code&gt; èµ·å§‹è¿˜èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œslice çš„å¤åˆ¶æ˜¯â€œæµ…æ‹·è´â€ã€‚å¤šä¸ª slice å¯èƒ½å…±äº«åŒä¸€åº•å±‚æ•°ç»„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-nil-slice-ä¸-empty-slice&#34;&gt;2) nil slice ä¸ empty slice
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; s1 []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;          &lt;span style=&#34;color:#6272a4&#34;&gt;// nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s2 &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;{}         &lt;span style=&#34;color:#6272a4&#34;&gt;// empty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s3 &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;)  &lt;span style=&#34;color:#6272a4&#34;&gt;// empty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;s1 == nil&lt;/code&gt; ä¸º trueï¼Œ&lt;code&gt;len&lt;/code&gt; ä¸ &lt;code&gt;cap&lt;/code&gt; éƒ½ä¸º 0ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s2&lt;/code&gt;/&lt;code&gt;s3&lt;/code&gt; çš„ &lt;code&gt;len&lt;/code&gt;/&lt;code&gt;cap&lt;/code&gt; ä¸º 0ï¼Œä½† &lt;code&gt;s2 == nil&lt;/code&gt; ä¸º falseã€‚&lt;/li&gt;
&lt;li&gt;è®¿é—®/éå†è¡Œä¸ºä¸€è‡´ï¼Œä½†å¯¹ JSON ç¼–ç æˆ–åå°„ç»“æœå¯èƒ½ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-åˆ‡ç‰‡è¡¨è¾¾å¼ä¸å…±äº«å†…å­˜&#34;&gt;3) åˆ‡ç‰‡è¡¨è¾¾å¼ä¸å…±äº«å†…å­˜
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;a &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;{&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;5&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;b &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; a[&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;]    &lt;span style=&#34;color:#6272a4&#34;&gt;// [2,3]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;c &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; a[&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;4&lt;/span&gt;]  &lt;span style=&#34;color:#6272a4&#34;&gt;// len=2, cap=3 (cap = max - low)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;b&lt;/code&gt; ä¸ &lt;code&gt;a&lt;/code&gt; å…±äº«åº•å±‚æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[low:high:max]&lt;/code&gt; å¯ä»¥æ˜¾å¼é™åˆ¶æ–° slice çš„ &lt;code&gt;cap&lt;/code&gt;ï¼Œé¿å…åç»­ &lt;code&gt;append&lt;/code&gt; å½±å“åˆ°åŸæ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;é‡æ–°åˆ‡ç‰‡ä¸ä¼šæ‹·è´æ•°æ®ï¼Œåªä¼šåˆ›å»ºæ–°çš„ slice å¤´éƒ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-append-çš„æ‰©å®¹ç­–ç•¥&#34;&gt;4) append çš„æ‰©å®¹ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;append&lt;/code&gt; çš„è¡Œä¸ºå–å†³äº &lt;code&gt;cap&lt;/code&gt; æ˜¯å¦å¤Ÿç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;len+appendLen &amp;lt;= cap&lt;/code&gt;ï¼Œç›´æ¥åœ¨åŸæ•°ç»„ä¸Šè¿½åŠ ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™åˆ†é…æ–°æ•°ç»„å¹¶æ‹·è´æ—§æ•°æ®ï¼Œå†è¿½åŠ æ–°å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰©å®¹ç­–ç•¥å¤§è‡´ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°å®¹é‡æ—¶æŒ‰ 2 å€å¢é•¿ã€‚&lt;/li&gt;
&lt;li&gt;å¤§å®¹é‡æ—¶æŒ‰ ~1.25 å€å¢é•¿ï¼ˆå…·ä½“é˜ˆå€¼ä¸ç®—æ³•å¯èƒ½éšç‰ˆæœ¬å˜åŒ–ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ„å‘³ç€é¢‘ç¹å°æ­¥ &lt;code&gt;append&lt;/code&gt; ä¼šäº§ç”Ÿå¤šæ¬¡æ‰©å®¹å’Œæ‹·è´ã€‚å¯ç”¨ &lt;code&gt;make([]T, 0, n)&lt;/code&gt; è¿›è¡Œé¢„åˆ†é…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-å†…å­˜æ»ç•™ä¸åˆ‡ç‰‡æ³„æ¼&#34;&gt;5) å†…å­˜æ»ç•™ä¸â€œåˆ‡ç‰‡æ³„æ¼â€
&lt;/h3&gt;&lt;p&gt;å½“ä½ ä»ä¸€ä¸ªå¾ˆå¤§çš„ slice ä¸Šåˆ‡ä¸€å°æ®µæ—¶ï¼Œåº•å±‚æ•°ç»„ä¾ç„¶è¢«å¼•ç”¨ï¼Œå¯¼è‡´å¤§å—å†…å­˜æ— æ³•å›æ”¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;big &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd&#34;&gt;byte&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;20&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; big[:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶å³ä½¿ &lt;code&gt;small&lt;/code&gt; çš„ &lt;code&gt;len&lt;/code&gt; å¾ˆå°ï¼Œåº•å±‚æ•°ç»„ä»è¢« &lt;code&gt;cap&lt;/code&gt; å¼•ç”¨ã€‚è§£å†³æ–¹å¼æ˜¯æ˜¾å¼æ‹·è´ä¸€ä»½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small = &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;append&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;byte&lt;/span&gt;(&lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;), small&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ · &lt;code&gt;small&lt;/code&gt; åªä¿ç•™éœ€è¦çš„é‚£æ®µæ•°æ®ã€‚è‹¥åªæ˜¯ä¸ºäº†é¿å…åç»­ &lt;code&gt;append&lt;/code&gt; æ±¡æŸ“åŸæ•°ç»„ï¼Œå¯ç”¨ &lt;code&gt;full slice&lt;/code&gt; é™åˆ¶å®¹é‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;small &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; big[:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;:&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šé™åˆ¶ &lt;code&gt;cap&lt;/code&gt; å¹¶ä¸èƒ½é‡Šæ”¾å¤§æ•°ç»„æœ¬èº«ï¼ŒçœŸæ­£é‡Šæ”¾ä»éœ€æ‹·è´æˆ–è®©åŸ slice å¤±å»å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;6-åˆ‡ç‰‡å†…æŒ‡é’ˆæœªé‡Šæ”¾&#34;&gt;6) åˆ‡ç‰‡å†…æŒ‡é’ˆæœªé‡Šæ”¾
&lt;/h3&gt;&lt;p&gt;å½“ slice å…ƒç´ æ˜¯æŒ‡é’ˆï¼Œæˆ–å…ƒç´ åŒ…å«æŒ‡é’ˆå­—æ®µæ—¶ï¼Œå³ä½¿ä½ â€œç¼©çŸ­â€äº† sliceï¼Œåº•å±‚æ•°ç»„ä¸­å°¾éƒ¨çš„æ—§æŒ‡é’ˆä»ä¼šè¢« GC æ‰«æï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•å›æ”¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; Node &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Next &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Node
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;make&lt;/span&gt;([]&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Node, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;1024&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// ... append äº†ä¸€å †å…ƒç´ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#6272a4&#34;&gt;// å°¾éƒ¨ä»ä¿ç•™æ—§æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­£ç¡®åšæ³•æ˜¯æ˜¾å¼æ¸…ç†å¼•ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;range&lt;/span&gt; s {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    s[i] = &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ é™¤å…ƒç´ æ—¶ä¹Ÿè¦æ¸…æ‰å°¾éƒ¨å¼•ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;copy&lt;/span&gt;(s[i:], s[i&lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;:])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s[&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;len&lt;/span&gt;(s)&lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;] = &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;s = s[:&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;len&lt;/span&gt;(s)&lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœå…ƒç´ æ˜¯åŒ…å«æŒ‡é’ˆçš„ç»“æ„ä½“ï¼Œå¯ç”¨é›¶å€¼æ¸…ç†ï¼š&lt;code&gt;var zero T; s[i] = zero&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;7-copy-ä¸-append-çš„è¯­ä¹‰&#34;&gt;7) copy ä¸ append çš„è¯­ä¹‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;copy(dst, src)&lt;/code&gt; ä¼šæŒ‰å…ƒç´ é¡ºåºæ‹·è´ï¼Œå…è®¸å†…å­˜é‡å ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;append(dst, src...)&lt;/code&gt; ä¼šæŠŠ &lt;code&gt;src&lt;/code&gt; å±•å¼€æˆå…ƒç´ ï¼Œå†è¿½åŠ åˆ° &lt;code&gt;dst&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ &lt;code&gt;dst&lt;/code&gt; å’Œ &lt;code&gt;src&lt;/code&gt; å…±äº«åº•å±‚æ•°ç»„æ—¶ï¼Œ&lt;code&gt;append&lt;/code&gt; å¯èƒ½è§¦å‘æ‰©å®¹ï¼Œä»è€Œå¾—åˆ°æ–°çš„æ•°ç»„ï¼›æ‰€ä»¥è¡Œä¸ºä¾èµ–å®¹é‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;map-çš„åº•å±‚ç»“æ„&#34;&gt;map çš„åº•å±‚ç»“æ„
&lt;/h2&gt;&lt;h3 id=&#34;1-map-æ˜¯å“ˆå¸Œè¡¨&#34;&gt;1) map æ˜¯å“ˆå¸Œè¡¨
&lt;/h3&gt;&lt;p&gt;Go çš„ map åº•å±‚æ˜¯å“ˆå¸Œè¡¨ç»“æ„ï¼Œæ ¸å¿ƒæ˜¯ &lt;code&gt;hmap&lt;/code&gt;ï¼ˆä¼ªç»“æ„ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; hmap &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    count     &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;           &lt;span style=&#34;color:#ff79c6&#34;&gt;//å½“å‰mapä¸­å·²ç»å­˜å‚¨é”®å€¼å¯¹çš„æ€»æ•°é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    B         &lt;span style=&#34;color:#8be9fd&#34;&gt;uint8&lt;/span&gt;        &lt;span style=&#34;color:#6272a4&#34;&gt;// æ¡¶æ•° = 2^B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    buckets   unsafe.Pointer  &lt;span style=&#34;color:#ff79c6&#34;&gt;//ä¸»æ¡¶æ•°ç»„æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    oldbuckets unsafe.Pointer    &lt;span style=&#34;color:#ff79c6&#34;&gt;//æ—§æ¡¶æ•°ç»„æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    nevacuate &lt;span style=&#34;color:#8be9fd&#34;&gt;uintptr&lt;/span&gt;            &lt;span style=&#34;color:#ff79c6&#34;&gt;//ä¸‹ä¸€ä¸ªè¦æ¬è¿çš„æ¡¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    hash0     &lt;span style=&#34;color:#8be9fd&#34;&gt;uint32&lt;/span&gt;            &lt;span style=&#34;color:#ff79c6&#34;&gt;//å“ˆå¸Œç§å­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;buckets&lt;/code&gt; æŒ‡å‘æ¡¶æ•°ç»„ï¼ˆbucketï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ª bucket å›ºå®šå®¹çº³ 8 ä¸ª key/valueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;oldbuckets&lt;/code&gt; ç”¨äºæ‰©å®¹è¿‡ç¨‹ä¸­çš„æ¸è¿›å¼æ¬è¿ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœå®ƒæ˜¯ nilï¼šè¯´æ˜ map å½“å‰å¤„äºæ­£å¸¸çŠ¶æ€ï¼Œæ²¡æœ‰åœ¨æ‰©å®¹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå®ƒé nilï¼šè¯´æ˜ map æ­£å¤„äºâ€œæ¸è¿›å¼æ‰©å®¹â€çš„è¿‡ç¨‹ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hash0&lt;/code&gt; æ˜¯éšæœºç§å­ï¼Œç”¨äºé˜²æ­¢ hash ç¢°æ’æ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-makemap--å»ºå‚ä¸åŸºç¡€è®¾æ–½æ­å»º&#34;&gt;2) make(map) â€”â€” å»ºå‚ä¸åŸºç¡€è®¾æ–½æ­å»º
&lt;/h3&gt;&lt;p&gt;ä»¥ &lt;code&gt;m := make(map[string]int, 10)&lt;/code&gt; ä¸ºä¾‹ï¼Œè¿è¡Œæ—¶ä¼šåšä¸€ç³»åˆ—åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€é˜¶æ®µï¼šç®—æ¡¶æ•°é‡ï¼ˆBï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è´Ÿè½½å› å­çº¦ä¸º 6.5ï¼Œæ¯ä¸ªæ¡¶å›ºå®š 8 ä¸ªæ§½ä½ï¼Œä½†ä¸å…è®¸æ»¡è½½è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ® &lt;code&gt;hint&lt;/code&gt; ä¼°ç®—æ¡¶æ•°ï¼Œé€‰æ‹©æœ€å°çš„ &lt;code&gt;B&lt;/code&gt; ä½¿å¾— &lt;code&gt;2^B &amp;gt;= hint / 6.5&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ &lt;code&gt;hint=10&lt;/code&gt;ï¼Œé€šå¸¸éœ€è¦ &lt;code&gt;B=1&lt;/code&gt;ï¼ˆ2 ä¸ªæ¡¶ï¼Œ16 ä¸ªæ§½ä½ï¼‰ï¼Œå®é™…ä¼šç•¥å‘ä¸Šå–æ•´ä»¥ç•™ä½™é‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šåˆå§‹åŒ– &lt;code&gt;hmap&lt;/code&gt; å¤´éƒ¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨å †ä¸Šåˆ†é… &lt;code&gt;hmap&lt;/code&gt;ï¼Œ&lt;code&gt;count=0&lt;/code&gt;ã€&lt;code&gt;B&lt;/code&gt; å†™å…¥ã€å…¶ä½™å­—æ®µæ¸…é›¶ã€‚&lt;/li&gt;
&lt;li&gt;è®¾ç½® &lt;code&gt;hash0&lt;/code&gt; éšæœºç§å­ï¼Œé˜²æ­¢å“ˆå¸Œç¢°æ’æ”»å‡»ï¼ˆæ¯æ¬¡è¿›ç¨‹å¯åŠ¨éƒ½ä¸åŒï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬ä¸‰é˜¶æ®µï¼šåˆ†é…æ¡¶æ•°ç»„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è‹¥ &lt;code&gt;hint &amp;gt; 0&lt;/code&gt;ï¼Œé€šå¸¸ä¼šç›´æ¥åˆ†é…æ¡¶æ•°ç»„ï¼ˆè¿ç»­å†…å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;hint&lt;/code&gt; å¾ˆå°æˆ–ä¸º 0ï¼Œæ¡¶æ•°ç»„å¯èƒ½å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡å†™å…¥æ‰åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;å½“ key/elem éƒ½ä¸å«æŒ‡é’ˆæ—¶ï¼Œä¼šåˆå§‹åŒ– &lt;code&gt;mapextra&lt;/code&gt; ç”¨äºè·Ÿè¸ª overflow bucketï¼Œé¿å…è¢« GC è¯¯å›æ”¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;hint&lt;/code&gt; åªæ˜¯å®¹é‡å»ºè®®ï¼Œä¸æ˜¯ç¡¬ä¸Šé™ï¼Œè¶…è¿‡åä¼šè§¦å‘æ‰©å®¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-bucket-çš„å¸ƒå±€&#34;&gt;3) bucket çš„å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ª bucket é‡ŒåŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tophash[8]&lt;/code&gt;ï¼šhash é«˜ä½çš„ 8 ä¸ªæ ‡è®°ï¼Œç”¨äºå¿«é€Ÿè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;keys[8]&lt;/code&gt; ä¸ &lt;code&gt;values[8]&lt;/code&gt;ï¼šçœŸæ­£çš„ key/valueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;overflow&lt;/code&gt; æŒ‡é’ˆï¼šå½“ bucket æ»¡äº†ï¼Œé“¾æ¥é¢å¤– bucketã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§â€œåˆ†ç¦»æ¡¶ + æº¢å‡ºé“¾â€çš„è®¾è®¡ï¼Œå…¼é¡¾äº†å±€éƒ¨æ€§ä¸æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;4-å†™å…¥è¯»å–æ—¶çš„å“ˆå¸Œæµç¨‹ä»¥-mhello--10086-ä¸ºä¾‹&#34;&gt;4) å†™å…¥/è¯»å–æ—¶çš„å“ˆå¸Œæµç¨‹ï¼ˆä»¥ m[&amp;ldquo;hello&amp;rdquo;] = 10086 ä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šç²¾å¯†çš„å­˜å‚¨è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;Step 1: è®¡ç®—å“ˆå¸Œå€¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒç”¨å“ˆå¸Œå‡½æ•°ï¼ˆä¾‹å¦‚ aeshash/memhashï¼‰ï¼Œç»“åˆ &lt;code&gt;h.hash0&lt;/code&gt; ç§å­ä¸ key å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;å¾—åˆ°ä¸€ä¸ª 64 ä½ hashã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 2: ä½ B ä½å®šä½æ¡¶ï¼ˆbucketIndexï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¡ç®— &lt;code&gt;bucketIndex = hash &amp;amp; ((1&amp;lt;&amp;lt;B) - 1)&lt;/code&gt;ï¼Œç”¨ä½ B ä½å†³å®šå»å“ªä¸ªæ¡¶ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æ­£åœ¨æ‰©å®¹ï¼Œå…ˆè§¦å‘ &lt;code&gt;growWork&lt;/code&gt; æ¬è¿å¯¹åº”æ—§æ¡¶ï¼Œå†å®šä½æ–°æ¡¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 3: è®¡ç®— tophashï¼ˆé«˜ 8 ä½æŒ‡çº¹ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å– &lt;code&gt;tophash = hash &amp;gt;&amp;gt; (wordbits - 8)&lt;/code&gt; ä½œä¸ºæŒ‡çº¹ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;tophash &amp;lt; minTopHash(5)&lt;/code&gt;ï¼Œåˆ™åŠ ä¸Šåç§»ï¼Œä½¿å…¶è½åœ¨ 5..255 èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;0..4 é¢„ç•™ç”¨äºç©ºæ§½ä¸æ¬è¿çŠ¶æ€æ ‡è®°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 4: æ‰«ææ¡¶ä¸æº¢å‡ºæ¡¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éå†å½“å‰æ¡¶çš„ 8 ä¸ªæ§½ä½ï¼Œå¿…è¦æ—¶éå† overflow bucketã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tophash&lt;/code&gt; ä¸åŒ¹é…ç›´æ¥è·³è¿‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tophash&lt;/code&gt; åŒ¹é…åå†æ¯”è¾ƒçœŸå® keyï¼ˆå¯èƒ½å“ˆå¸Œå†²çªï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®°å½•é‡åˆ°çš„ç¬¬ä¸€ä¸ªç©ºæ§½ä½ï¼ˆæ’å…¥å€™é€‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥å‘½ä¸­åŒ keyï¼Œç›´æ¥è¦†ç›– value å¹¶è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥é‡åˆ° &lt;code&gt;emptyRest&lt;/code&gt;ï¼Œè¯´æ˜åé¢å…¨ç©ºï¼Œå¯æå‰ç»“æŸæ‰«æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 5: æ’å…¥æˆ–æ‰©å®¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥æœªæ‰¾åˆ° keyï¼šæ£€æŸ¥ &lt;code&gt;count+1&lt;/code&gt; æ˜¯å¦è¶…è¿‡è´Ÿè½½å› å­ï¼Œæˆ– overflow è¿‡å¤šã€‚&lt;/li&gt;
&lt;li&gt;è‹¥è§¦å‘æ‰©å®¹ï¼Œå…ˆ grow å†é‡æ–°èµ°ä¸€éæµç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ä½¿ç”¨ç©ºæ§½ä½å†™å…¥ï¼š&lt;code&gt;tophash&lt;/code&gt;ã€keyã€valueã€‚&lt;/li&gt;
&lt;li&gt;è‹¥å½“å‰æ¡¶å·²æ»¡ä¸”æ²¡æœ‰ç©ºæ§½ï¼Œç”³è¯· overflow bucket å¹¶æ’å…¥ã€‚&lt;/li&gt;
&lt;li&gt;å†™å…¥å &lt;code&gt;count++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯»æµç¨‹ä¸å†™æµç¨‹ç±»ä¼¼ï¼Œä½†ä¸ä¼šåˆ›å»ºæ–°æ¡¶æˆ–æ–°æ§½ï¼Œæ‰¾ä¸åˆ° key å°±è¿”å›é›¶å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¹³å‡å¤æ‚åº¦ä¸º O(1)ï¼Œç¢°æ’æˆ–æº¢å‡ºé“¾è¿‡é•¿æ—¶ä¼šé€€åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;h3 id=&#34;5-æ‰©å®¹ä¸æ¸è¿›å¼è¿ç§»&#34;&gt;5) æ‰©å®¹ä¸æ¸è¿›å¼è¿ç§»
&lt;/h3&gt;&lt;p&gt;map çš„æ‰©å®¹ä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆï¼Œè€Œæ˜¯æ’å…¥/è®¿é—®æ—¶é€æ­¥â€œæ¬è¿â€ bucketï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;oldbuckets&lt;/code&gt; ä¿å­˜æ—§è¡¨ï¼Œ&lt;code&gt;nevacuate&lt;/code&gt; è®°å½•æ¬è¿è¿›åº¦ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ map æ“ä½œä¼šé¡ºå¸¦æ¬è¿å°‘é‡æ¡¶ï¼Œæ‘Šè–„æš‚åœæ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-æ‰©å®¹çš„ä¸¤ç§å½¢å¼&#34;&gt;6) æ‰©å®¹çš„ä¸¤ç§å½¢å¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¿»å€æ‰©å®¹ï¼ˆB+1ï¼‰&lt;/strong&gt;&lt;br&gt;
å½“è´Ÿè½½å› å­è¿‡é«˜ï¼ˆçº¦ 6.5 ä¸ªå…ƒç´ /æ¡¶ï¼‰è§¦å‘ï¼Œæ¡¶æ•°é‡ç¿»å€ï¼Œå‡å°‘å†²çªã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç­‰é‡æ‰©å®¹ï¼ˆsame-size growï¼‰&lt;/strong&gt;&lt;br&gt;
å½“ overflow bucket è¿‡å¤šæ—¶è§¦å‘ï¼Œæ¡¶æ•°é‡ä¸å˜ï¼Œä½†é‡æ–°åˆ†å¸ƒå…ƒç´ ï¼Œç¼©çŸ­æº¢å‡ºé“¾ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;7-åˆ é™¤ä¸å†…å­˜æ”¶ç¼©&#34;&gt;7) åˆ é™¤ä¸å†…å­˜æ”¶ç¼©
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;delete(m, key)&lt;/code&gt; ä¼šæ¸…æ‰ key/valueï¼Œä½† map é€šå¸¸ä¸ä¼šè‡ªåŠ¨ç¼©å®¹ã€‚å¤§é‡åˆ é™¤åï¼Œmap å¯èƒ½ä»å ç”¨è¾ƒå¤§å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;é‡Šæ”¾å†…å­˜çš„å¸¸è§åŠæ³•æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ–° map å¹¶æ‹·è´éœ€è¦çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;8-nil-map-ä¸å¹¶å‘å®‰å…¨&#34;&gt;8) nil map ä¸å¹¶å‘å®‰å…¨
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; m &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#6272a4&#34;&gt;// nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;è¯»å– &lt;code&gt;m[key]&lt;/code&gt; è¿”å›é›¶å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å†™å…¥ä¼š panicï¼š&lt;code&gt;assignment to entry in nil map&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;map ä¸æ˜¯å¹¶å‘å®‰å…¨ç»“æ„ï¼Œå¤šä¸ª goroutine å¹¶å‘å†™ä¼šè§¦å‘è¿è¡Œæ—¶å´©æºƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹¶å‘åœºæ™¯å¯ç”¨ &lt;code&gt;sync.Mutex&lt;/code&gt; ä¿æŠ¤æˆ–ä½¿ç”¨ &lt;code&gt;sync.Map&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;9-go-ç‰ˆæœ¬å·®å¼‚æç¤º&#34;&gt;9) Go ç‰ˆæœ¬å·®å¼‚æç¤º
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æœ¬æ–‡ä»¥ Go 1.18+ çš„ &lt;code&gt;hmap/bucket&lt;/code&gt; ç»“æ„ä¸ºå‚è€ƒï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½åœ¨å­—æ®µå¸ƒå±€å’Œå¸¸é‡ä¸Šæœ‰å¾®è°ƒã€‚&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œå‡½æ•°å®ç°ä¼šéšç‰ˆæœ¬ä¸ CPU ç‰¹æ€§è°ƒæ•´ï¼ˆä¾‹å¦‚ aeshash/memhashï¼‰ï¼Œä½†æ•´ä½“æµç¨‹ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æ‰©å®¹é˜ˆå€¼ä¸ same-size grow çš„è§¦å‘æ¡ä»¶å¯èƒ½ä¼šåœ¨ç‰ˆæœ¬é—´å°å¹…è°ƒå‚ï¼Œç»†èŠ‚ä»¥ &lt;code&gt;GOROOT/src/runtime/map.go&lt;/code&gt; ä¸ºå‡†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;slice-vs-map-çš„å…³é”®å¯¹æ¯”&#34;&gt;slice vs map çš„å…³é”®å¯¹æ¯”
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»´åº¦&lt;/th&gt;
          &lt;th&gt;slice&lt;/th&gt;
          &lt;th&gt;map&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;åº•å±‚ç»“æ„&lt;/td&gt;
          &lt;td&gt;è¿ç»­æ•°ç»„ + å¤´éƒ¨æè¿°ç¬¦&lt;/td&gt;
          &lt;td&gt;å“ˆå¸Œè¡¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è®¿é—®å¤æ‚åº¦&lt;/td&gt;
          &lt;td&gt;O(1) é€šè¿‡ç´¢å¼•&lt;/td&gt;
          &lt;td&gt;O(1) å¹³å‡ï¼Œé€šè¿‡ key&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å†…å­˜å±€éƒ¨æ€§&lt;/td&gt;
          &lt;td&gt;å¾ˆå¥½&lt;/td&gt;
          &lt;td&gt;ä¸€èˆ¬&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;é€‚ç”¨åœºæ™¯&lt;/td&gt;
          &lt;td&gt;é¡ºåºæ•°æ®ã€å¯ç´¢å¼•&lt;/td&gt;
          &lt;td&gt;æ— åºæŸ¥æ‰¾ã€å»é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ‰©å®¹ä»£ä»·&lt;/td&gt;
          &lt;td&gt;æ‹·è´æ•°ç»„&lt;/td&gt;
          &lt;td&gt;æ¸è¿›å¼ rehash&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ&#34;&gt;å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢„åˆ†é…å®¹é‡&lt;/strong&gt;&lt;br&gt;
é¢„ä¼°é•¿åº¦æ—¶ä½¿ç”¨ &lt;code&gt;make([]T, 0, n)&lt;/code&gt; æˆ– &lt;code&gt;make(map[K]V, n)&lt;/code&gt;ï¼Œå‡å°‘æ‰©å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…å…±äº«åº•å±‚æ•°ç»„å¼•å‘çš„å‰¯ä½œç”¨&lt;/strong&gt;&lt;br&gt;
ä¸ç¡®å®šæ˜¯å¦å…±äº«æ—¶ï¼Œå¯ &lt;code&gt;copy&lt;/code&gt;/&lt;code&gt;append&lt;/code&gt; ç”Ÿæˆæ–° sliceã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;map è¿­ä»£é¡ºåºä¸ç¨³å®š&lt;/strong&gt;&lt;br&gt;
Go åˆ»æ„éšæœºåŒ–éå†é¡ºåºï¼Œä¸èƒ½ä¾èµ–é¡ºåºé€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…å¤„ç†å¤§å¯¹è±¡åˆ‡ç‰‡ä¸æŒ‡é’ˆæ®‹ç•™&lt;/strong&gt;&lt;br&gt;
åˆ‡å° slice æ—¶æ³¨æ„åº•å±‚æ•°ç»„å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ»ç•™ï¼›åˆ é™¤/ç¼©çŸ­æ—¶å¯¹æŒ‡é’ˆå…ƒç´ æ¸…é›¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘å†™ map å¿…é¡»åŠ é”&lt;/strong&gt;&lt;br&gt;
è¯»å†™æ··ç”¨ä¹Ÿéœ€è¦åŒæ­¥ï¼Œé¿å…è¿è¡Œæ—¶å´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­
&lt;/h2&gt;&lt;p&gt;ç†è§£ slice ä¸ map çš„åº•å±‚å®ç°ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨æ€§èƒ½è°ƒä¼˜ã€å†…å­˜æ§åˆ¶å’Œå¹¶å‘å®‰å…¨æ–¹é¢åšå‡ºæ›´å¯é çš„é€‰æ‹©ã€‚å†™ Go æ—¶ä¸å¿…å¤„å¤„å¾®ä¼˜åŒ–ï¼Œä½†çŸ¥é“â€œå®ƒä¸ºä»€ä¹ˆæ…¢â€æˆ–â€œä¸ºä»€ä¹ˆå å†…å­˜â€ï¼Œå°±èƒ½æ›´å¿«å®šä½é—®é¢˜ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é“¾è¡¨åè½¬ï¼šå¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«</title>
        <link>https://skylm808.github.io/p/%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC%E5%A4%B4%E6%8F%92%E6%B3%95%E4%B8%8E%E5%8F%8C%E6%8C%87%E9%92%88%E8%BF%AD%E4%BB%A3%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
        <pubDate>Mon, 08 Dec 2025 10:35:20 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC%E5%A4%B4%E6%8F%92%E6%B3%95%E4%B8%8E%E5%8F%8C%E6%8C%87%E9%92%88%E8%BF%AD%E4%BB%A3%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
        <description>&lt;h1 id=&#34;é“¾è¡¨åè½¬å¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«&#34;&gt;é“¾è¡¨åè½¬ï¼šå¤´æ’æ³•ä¸åŒæŒ‡é’ˆè¿­ä»£æ³•çš„åŒºåˆ«
&lt;/h1&gt;&lt;p&gt;é“¾è¡¨åè½¬æ˜¯ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸¤ç§å¸¸è§çš„æ–¹æ³•ï¼šå¤´æ’æ³•å’ŒåŒæŒ‡é’ˆè¿­ä»£æ³•ã€‚æœ¬æ–‡å°†è®¨è®ºå®ƒä»¬çš„åŒºåˆ«ï¼Œå¹¶é™„ä¸Šæ ¸å¿ƒä»£ç ç¤ºä¾‹ï¼ˆä½¿ç”¨Goï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤´æ’æ³•&#34;&gt;å¤´æ’æ³•
&lt;/h2&gt;&lt;p&gt;å¤´æ’æ³•é€šè¿‡ä¸æ–­å°†åŸé“¾è¡¨çš„èŠ‚ç‚¹æ’å…¥åˆ°ä¸€ä¸ªæ–°é“¾è¡¨çš„å¤´éƒ¨æ¥å®ç°åè½¬ã€‚è¿™ç§æ–¹æ³•éœ€è¦ä¸€ä¸ªè¾…åŠ©é“¾è¡¨å¤´éƒ¨ã€‚æ¯”å¦‚åŠ›æ‰£ä¸­çš„ 92. &lt;a class=&#34;link&#34; href=&#34;https://leetcode.cn/problems/reverse-linked-list-ii/description/?envType=study-plan-v2&amp;amp;envId=top-interview-150&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åè½¬é“¾è¡¨ II&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–ä¸€ä¸ªæ–°å¤´èŠ‚ç‚¹ï¼ˆdummyï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éå†åŸé“¾è¡¨ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹æ’å…¥åˆ°æ–°å¤´èŠ‚ç‚¹çš„åé¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä»£ç &#34;&gt;æ ¸å¿ƒä»£ç 
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; ListNode &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Val  &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Next &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// å¤´æ’æ³•ï¼šåˆ©ç”¨ dummy å¤´æ„å»ºæ–°é“¾è¡¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;reverseList&lt;/span&gt;(head &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    dummy &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;ListNode{}   &lt;span style=&#34;color:#6272a4&#34;&gt;// æ–°é“¾è¡¨çš„è™šæ‹Ÿå¤´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; head &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        next &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; head.Next         &lt;span style=&#34;color:#6272a4&#34;&gt;// å…ˆä¿å­˜åç»§&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        head.Next = dummy.Next    &lt;span style=&#34;color:#6272a4&#34;&gt;// æ’åˆ° dummy åé¢&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        dummy.Next = head
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        head = next
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; dummy.Next
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åŒæŒ‡é’ˆè¿­ä»£æ³•&#34;&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•
&lt;/h2&gt;&lt;p&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼ˆprev å’Œ currï¼‰æ¥åè½¬é“¾è¡¨çš„æŒ‡å‘ã€‚æ¯”å¦‚åŠ›æ‰£ä¸­çš„ 25. &lt;a class=&#34;link&#34; href=&#34;https://leetcode.cn/problems/reverse-nodes-in-k-group/description/?envType=study-plan-v2&amp;amp;envId=top-interview-150&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ– prev ä¸º nilï¼Œcurr ä¸º headã€‚&lt;/li&gt;
&lt;li&gt;éå†é“¾è¡¨ï¼Œæ”¹å˜ curr çš„ next æŒ‡å‘ prevï¼Œç„¶åç§»åŠ¨æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä»£ç -1&#34;&gt;æ ¸å¿ƒä»£ç 
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// åŒæŒ‡é’ˆè¿­ä»£æ³•ï¼šåŸåœ°åè½¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;reverseList&lt;/span&gt;(head &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;var&lt;/span&gt; prev &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ListNode
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    cur &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; head
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; cur &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        next &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; cur.Next   &lt;span style=&#34;color:#6272a4&#34;&gt;// ä¿å­˜åç»§&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        cur.Next = prev    &lt;span style=&#34;color:#6272a4&#34;&gt;// ç¿»è½¬æŒ‡é’ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        prev = cur         &lt;span style=&#34;color:#6272a4&#34;&gt;// prev å‰è¿›&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        cur = next         &lt;span style=&#34;color:#6272a4&#34;&gt;// cur å‰è¿›&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; prev
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åŒºåˆ«&#34;&gt;åŒºåˆ«
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤´æ’æ³•&lt;/strong&gt;ï¼šç±»ä¼¼äºæ„å»ºä¸€ä¸ªæ–°é“¾è¡¨ï¼Œé€‚åˆéœ€è¦å¤åˆ¶æˆ–é¢å¤–ç©ºé—´çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæŒ‡é’ˆè¿­ä»£æ³•&lt;/strong&gt;ï¼šåŸåœ°åè½¬ï¼Œä¸éœ€è¦é¢å¤–ç©ºé—´ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¤ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å»ºåšå®¢æˆåŠŸï¼</title>
        <link>https://skylm808.github.io/p/%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%88%90%E5%8A%9F/</link>
        <pubDate>Tue, 22 Jul 2025 17:09:54 +0800</pubDate>
        
        <guid>https://skylm808.github.io/p/%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%88%90%E5%8A%9F/</guid>
        <description>&lt;h2 id=&#34;-å»ºåšå®¢æˆåŠŸ&#34;&gt;ğŸ‰ å»ºåšå®¢æˆåŠŸï¼
&lt;/h2&gt;&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„æŠ€æœ¯åšå®¢ï¼è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ ‡å¿—ç€æˆ‘æ­£å¼å¼€å§‹äº†æŠ€æœ¯å†™ä½œä¹‹æ—…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³äºè¿™ä¸ªåšå®¢&#34;&gt;å…³äºè¿™ä¸ªåšå®¢
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªåšå®¢ä¸»è¦ç”¨æ¥åˆ†äº«æˆ‘åœ¨ç¼–ç¨‹å­¦ä¹ å’Œå·¥ä½œä¸­çš„å¿ƒå¾—ä½“ä¼šï¼Œä¸»è¦ä¼šæ¶‰åŠä»¥ä¸‹æŠ€æœ¯é¢†åŸŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç¨‹è¯­è¨€&lt;/strong&gt;: Java, Go, C++, Python&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•ä¸æ•°æ®ç»“æ„&lt;/strong&gt;: ç®—æ³•é¢˜è§£ã€æ•°æ®ç»“æ„åˆ†æ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯æ€»ç»“&lt;/strong&gt;: é¡¹ç›®ç»éªŒã€æŠ€æœ¯éš¾ç‚¹è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­¦ä¹ ç¬”è®°&lt;/strong&gt;: æ–°æŠ€æœ¯å­¦ä¹ è®°å½•&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœªæ¥è®¡åˆ’&#34;&gt;æœªæ¥è®¡åˆ’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒç»­æ›´æ–°æŠ€æœ¯æ–‡ç« &lt;/li&gt;
&lt;li&gt;åˆ†äº«å®é™…é¡¹ç›®ç»éªŒ&lt;/li&gt;
&lt;li&gt;è®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„æ€è€ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœŸå¾…ä¸å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ï¼ ğŸš€&lt;/p&gt;
</description>
        </item>
        <item>
        <title>First</title>
        <link>https://skylm808.github.io/first/</link>
        <pubDate>Tue, 22 Jul 2025 16:18:26 +0800</pubDate>
        
        <guid>https://skylm808.github.io/first/</guid>
        <description></description>
        </item>
        <item>
        <title>å½’æ¡£ | Archives</title>
        <link>https://skylm808.github.io/archives/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>https://skylm808.github.io/archives/</guid>
        <description></description>
        </item>
        <item>
        <title>æœç´¢ | Search</title>
        <link>https://skylm808.github.io/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://skylm808.github.io/search/</guid>
        <description></description>
        </item>
        <item>
        <title>å‹æƒ…é“¾æ¥ | Links</title>
        <link>https://skylm808.github.io/links/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://skylm808.github.io/links/</guid>
        <description></description>
        </item>
        
    </channel>
</rss>
